{"file_contents":{"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"server/openai.ts":{"content":"import OpenAI from \"openai\";\n\n// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ \n  apiKey: process.env.OPENAI_API_KEY || process.env.OPENAI_API_KEY_ENV_VAR || \"default_key\" \n});\n\nexport async function searchLegalDatabase(query: string, filters?: any): Promise<any> {\n  try {\n    const prompt = `You are a legal research assistant. Search for relevant legal information based on this query: \"${query}\".\n\nPlease provide a comprehensive response that includes:\n1. Relevant case law with citations\n2. Applicable statutes and regulations\n3. Legal precedents\n4. Relevance scores (0-100%)\n5. Brief summaries of each result\n\nFormat the response as JSON with this structure:\n{\n  \"results\": [\n    {\n      \"title\": \"Case or Statute Title\",\n      \"type\": \"Case Law\" | \"Federal Statute\" | \"State Law\" | \"Regulation\" | \"Supreme Court\",\n      \"citation\": \"Legal citation\",\n      \"relevance\": 95,\n      \"summary\": \"Brief summary of the legal document\",\n      \"keyPoints\": [\"point 1\", \"point 2\"],\n      \"url\": \"link to full document\"\n    }\n  ],\n  \"totalResults\": 5,\n  \"searchTime\": \"2.3 seconds\"\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert legal research assistant with access to comprehensive legal databases. Provide accurate, relevant legal information with proper citations.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"OpenAI legal search error:\", error);\n    throw new Error(\"Failed to perform legal search\");\n  }\n}\n\nexport async function summarizeDocument(documentText: string, summaryType: string = 'quick'): Promise<any> {\n  try {\n    const prompt = `You are a legal document analysis expert. Analyze this legal document and provide a ${summaryType} summary.\n\nDocument text:\n${documentText}\n\nPlease provide a comprehensive analysis in JSON format:\n{\n  \"documentType\": \"Contract/Brief/Statute/etc\",\n  \"keyPoints\": [\"point 1\", \"point 2\", \"point 3\"],\n  \"parties\": [\"party names if applicable\"],\n  \"summary\": \"Detailed summary of the document\",\n  \"legalImplications\": [\n    {\n      \"type\": \"warning\" | \"notice\" | \"recommendation\",\n      \"message\": \"Important legal consideration\",\n      \"severity\": \"high\" | \"medium\" | \"low\"\n    }\n  ],\n  \"importantDates\": [\"date 1\", \"date 2\"],\n  \"financialTerms\": {\n    \"totalValue\": \"amount if applicable\",\n    \"paymentSchedule\": \"schedule if applicable\"\n  },\n  \"risks\": [\"potential risk 1\", \"potential risk 2\"],\n  \"recommendations\": [\"recommendation 1\", \"recommendation 2\"]\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert legal document analyzer. Provide thorough, accurate analysis of legal documents with practical insights.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"OpenAI document summarization error:\", error);\n    throw new Error(\"Failed to summarize document\");\n  }\n}\n\nexport async function analyzeRisk(caseData: {\n  caseType: string;\n  description: string;\n  jurisdiction?: string;\n  caseValue?: string;\n}): Promise<any> {\n  try {\n    const prompt = `You are a legal risk assessment expert. Analyze this case and provide a comprehensive risk assessment.\n\nCase Details:\n- Type: ${caseData.caseType}\n- Description: ${caseData.description}\n- Jurisdiction: ${caseData.jurisdiction || 'Not specified'}\n- Case Value: ${caseData.caseValue || 'Not specified'}\n\nProvide a detailed risk analysis in JSON format:\n{\n  \"successProbability\": 75,\n  \"confidenceLevel\": 85,\n  \"riskFactors\": [\n    {\n      \"factor\": \"Risk description\",\n      \"severity\": \"high\" | \"medium\" | \"low\",\n      \"impact\": \"Description of potential impact\"\n    }\n  ],\n  \"strengths\": [\"strength 1\", \"strength 2\"],\n  \"weaknesses\": [\"weakness 1\", \"weakness 2\"],\n  \"recommendations\": {\n    \"immediate\": [\"action 1\", \"action 2\"],\n    \"longterm\": [\"strategy 1\", \"strategy 2\"]\n  },\n  \"precedentAnalysis\": {\n    \"similarCases\": 150,\n    \"successRate\": 68,\n    \"averageSettlement\": \"$75,000\"\n  },\n  \"settlementRange\": {\n    \"low\": \"$45,000\",\n    \"high\": \"$95,000\",\n    \"recommended\": \"$70,000\"\n  },\n  \"timeline\": {\n    \"estimated\": \"12-18 months\",\n    \"factors\": [\"factor 1\", \"factor 2\"]\n  }\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert legal risk analyst with extensive knowledge of case outcomes, precedents, and legal strategy. Provide data-driven risk assessments.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"OpenAI risk analysis error:\", error);\n    throw new Error(\"Failed to analyze legal risk\");\n  }\n}\n\nexport async function answerLegalQuestion(question: string): Promise<any> {\n  try {\n    const prompt = `You are an expert legal advisor. Answer this legal question comprehensively with accurate references and citations.\n\nQuestion: ${question}\n\nProvide a detailed response in JSON format:\n{\n  \"answer\": \"Comprehensive answer to the legal question\",\n  \"references\": [\n    {\n      \"title\": \"Legal source title\",\n      \"citation\": \"Proper legal citation\",\n      \"summary\": \"Brief summary of relevance\"\n    }\n  ],\n  \"keyPoints\": [\n    \"Important legal point 1\",\n    \"Important legal point 2\"\n  ],\n  \"jurisdiction\": \"Applicable jurisdiction if relevant\",\n  \"disclaimer\": \"This is legal information, not legal advice. Consult with a qualified attorney for specific legal matters.\",\n  \"relatedConcepts\": [\"concept 1\", \"concept 2\"],\n  \"practicalAdvice\": [\n    \"Practical step 1\",\n    \"Practical step 2\"\n  ]\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert legal advisor with comprehensive knowledge of law across multiple jurisdictions. Provide accurate, well-cited legal information with proper references.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"OpenAI law agent error:\", error);\n    throw new Error(\"Failed to answer legal question\");\n  }\n}\n\nexport async function performWebSearch(query: string): Promise<any> {\n  try {\n    const prompt = `You are a legal web search specialist. Based on this search query: \"${query}\", provide realistic web search results that would typically be found when searching for legal information online.\n\nSimulate web search results with current, relevant legal information and provide an AI-generated summary.\n\nProvide results in JSON format:\n{\n  \"results\": [\n    {\n      \"title\": \"Search result title\",\n      \"url\": \"https://example-legal-site.com/article\",\n      \"domain\": \"legal-site.com\",\n      \"snippet\": \"Brief excerpt from the page describing the legal information\",\n      \"date\": \"2024-12-15\"\n    }\n  ],\n  \"totalResults\": 8,\n  \"summary\": \"AI-generated summary of the key findings from the search results, highlighting the most important legal information and trends.\",\n  \"relatedQueries\": [\"related query 1\", \"related query 2\"],\n  \"legalUpdates\": \"Any recent legal developments or changes related to the search topic\"\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are a legal information researcher specializing in finding and summarizing current legal information from web sources. Provide realistic, current legal search results.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"OpenAI web search error:\", error);\n    throw new Error(\"Failed to perform web search\");\n  }\n}\n\nexport async function generateDocument(documentType: string, inputMethod: 'voice' | 'paste' | 'manual', textContent?: string, formData?: Record<string, string>): Promise<any> {\n  try {\n    let contentDescription = '';\n    let documentSpecificInstructions = '';\n    \n    // Build content description based on input method\n    if (inputMethod === 'voice' || inputMethod === 'paste') {\n      contentDescription = textContent || '';\n    } else if (inputMethod === 'manual' && formData) {\n      contentDescription = Object.entries(formData)\n        .filter(([_, value]) => value && value.trim() !== '')\n        .map(([key, value]) => `${key}: ${value}`)\n        .join('\\n');\n    }\n\n    // Document-specific formatting instructions\n    switch (documentType) {\n      case 'business-letter':\n        documentSpecificInstructions = `\nBUSINESS LETTER SPECIFIC REQUIREMENTS:\n- Use full block format (all text aligned left)\n- Include sender's letterhead information at top\n- Date should be 2-3 lines below sender info\n- Recipient's address 2 lines below date\n- Subject line format: \"Re: [Subject]\"\n- Professional salutation: \"Dear Mr./Ms. [Last Name]:\" or \"Dear [Title] [Last Name]:\"\n- Body paragraphs with single spacing within, double spacing between\n- Professional closing: \"Sincerely,\" \"Best regards,\" or \"Respectfully,\"\n- 4 line spaces for signature, then typed name and title`;\n        break;\n      \n      case 'cover-letter':\n        documentSpecificInstructions = `\nCOVER LETTER SPECIFIC REQUIREMENTS:\n- Modern cover letter format with applicant info at top\n- Addressed to specific hiring manager if known, otherwise \"Dear Hiring Manager:\"\n- Opening paragraph: State position and how you learned about it\n- Body paragraph 1: Relevant experience and achievements with specific examples\n- Body paragraph 2: Skills and qualifications that match job requirements  \n- Body paragraph 3: Why you want to work for this specific company\n- Closing paragraph: Call to action and availability for interview\n- Professional closing with \"Sincerely,\" and full name\n- Keep to one page maximum`;\n        break;\n\n      case 'recommendation-letter':\n        documentSpecificInstructions = `\nRECOMMENDATION LETTER SPECIFIC REQUIREMENTS:\n- Academic/Professional letterhead format\n- Date and recipient information (if known)\n- Subject line: \"Letter of Recommendation for [Name]\"\n- Opening: State relationship to candidate and duration\n- Body paragraph 1: Candidate's strengths and key qualifications\n- Body paragraph 2: Specific examples of achievements and performance\n- Body paragraph 3: Comparison to peers and overall assessment\n- Closing: Clear recommendation level and contact information for follow-up\n- Professional signature with credentials and title`;\n        break;\n\n      case 'service-agreement':\n        documentSpecificInstructions = `\nSERVICE AGREEMENT SPECIFIC REQUIREMENTS:\n- Contract title: \"SERVICE AGREEMENT\" centered at top\n- Parties section identifying Provider and Client with full legal names\n- Recitals section stating the purpose and background\n- Scope of Services section with detailed service descriptions\n- Term and Termination section with start/end dates\n- Compensation and Payment Terms section\n- Intellectual Property and Confidentiality clauses\n- Governing Law clause specifying state jurisdiction\n- Signature blocks with dates for both parties\n- Include standard contract disclaimers and notices`;\n        break;\n\n      case 'employment-contract':\n        documentSpecificInstructions = `\nEMPLOYMENT CONTRACT SPECIFIC REQUIREMENTS:\n- Contract title: \"EMPLOYMENT AGREEMENT\" centered at top\n- Parties section: Employer (Company) and Employee with addresses\n- Position and Duties section with job title and responsibilities\n- Compensation section: salary, benefits, payment schedule\n- Term of Employment section with start date and at-will status\n- Confidentiality and Non-Disclosure provisions\n- Intellectual Property assignment clauses\n- Termination and Severance provisions\n- Governing law and dispute resolution clauses\n- Signature blocks with dates for both parties`;\n        break;\n\n      case 'job-application':\n        documentSpecificInstructions = `\nJOB APPLICATION SPECIFIC REQUIREMENTS:\n- Application header: \"EMPLOYMENT APPLICATION\"\n- Personal Information section with all contact details\n- Position Information: job title, salary expectations, availability\n- Employment History: chronological listing with dates, companies, positions\n- Education section: degrees, institutions, graduation dates\n- Skills and Qualifications relevant to position\n- References section with complete contact information\n- Certification statements and applicant signature with date\n- Equal Opportunity/Non-Discrimination statements\n- Format as official application form with clear sections`;\n        break;\n\n      case 'visa-application':\n        documentSpecificInstructions = `\nVISA APPLICATION SPECIFIC REQUIREMENTS:\n- Official application header with visa type\n- Personal Details section: full legal name, date/place of birth, nationality\n- Passport Information: number, issue/expiry dates, issuing country\n- Travel Information: purpose, duration, planned dates, accommodation\n- Financial Information: funding source, bank statements reference\n- Supporting Documents checklist\n- Declaration and signature section with date\n- Official government application format style\n- Include all required legal disclaimers and warnings\n- Clear section divisions with numbered items where appropriate`;\n        break;\n\n      default:\n        documentSpecificInstructions = `\nGENERAL DOCUMENT REQUIREMENTS:\n- Professional USA business document format\n- Appropriate headers and contact information\n- Clear structure with logical sections\n- Professional tone and language throughout\n- Proper closing and signature sections`;\n    }\n\n    const prompt = `You are a professional document generation specialist with expertise in USA business and legal document standards. Generate a ${documentType} document following strict USA professional formatting and content standards.\n\nDocument Type: ${documentType}\nInput Method: ${inputMethod}\nContent/Requirements:\n${contentDescription}\n\n${documentSpecificInstructions}\n\nGENERAL USA FORMATTING STANDARDS:\n- Date format: Month DD, YYYY (e.g., January 15, 2024)\n- Address format: Street Address, Suite/Unit, City, State ZIP\n- Phone format: (XXX) XXX-XXXX\n- Professional language and tone throughout\n- Proper spacing and margins\n- Clear section divisions\n- Consistent formatting\n\nReturn the response in JSON format:\n{\n  \"id\": \"unique-document-id\",\n  \"type\": \"${documentType}\",\n  \"title\": \"Document Title\",\n  \"content\": \"Raw document content\",\n  \"formattedContent\": \"Formatted document content with proper spacing and structure\",\n  \"metadata\": {\n    \"wordCount\": 0,\n    \"estimatedPages\": 1,\n    \"documentStandard\": \"USA International\",\n    \"generatedAt\": \"current-date\",\n    \"inputMethod\": \"${inputMethod}\"\n  },\n  \"sections\": [\n    {\n      \"name\": \"Header\",\n      \"content\": \"Header content\"\n    },\n    {\n      \"name\": \"Body\",\n      \"content\": \"Main body content\"\n    },\n    {\n      \"name\": \"Closing\",\n      \"content\": \"Closing content\"\n    }\n  ],\n  \"suggestions\": [\n    \"Suggestion 1 for improvement\",\n    \"Suggestion 2 for customization\"\n  ]\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert document generation specialist with extensive knowledge of USA business and legal document standards. Generate professional, properly formatted documents that comply with international USA standards for business correspondence, contracts, and applications.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    const result = JSON.parse(response.choices[0].message.content || '{}');\n    \n    // Add current timestamp and ensure proper structure\n    return {\n      ...result,\n      createdAt: new Date().toISOString(),\n      id: result.id || `doc_${Date.now()}`,\n      metadata: {\n        ...result.metadata,\n        generatedAt: new Date().toISOString(),\n        inputMethod: inputMethod\n      }\n    };\n  } catch (error) {\n    console.error(\"OpenAI document generation error:\", error);\n    throw new Error(\"Failed to generate document\");\n  }\n}\n\nexport async function improveDocumentSection(\n  type: string, \n  item: any, \n  documentContent: string\n): Promise<{ improvedText: string; explanation: string }> {\n  try {\n    let prompt = '';\n    \n    if (type === 'weak-point') {\n      prompt = `You are an expert legal document editor. A document has been analyzed and a specific weak point has been identified. Your task is to provide an improved version of the relevant section.\n\nDOCUMENT CONTENT:\n${documentContent}\n\nWEAK POINT IDENTIFIED:\n- Issue: ${item.point}\n- Category: ${item.category}\n- Severity: ${item.severity}\n- Explanation: ${item.explanation}\n\nPlease provide an improved version of the specific section or paragraph that addresses this weak point. Your response should:\n\n1. Identify the exact text that needs improvement\n2. Provide a professionally written replacement that fixes the identified issue\n3. Maintain the document's tone and purpose\n4. Use clear, legally appropriate language\n5. Follow USA professional document standards\n\nRespond with ONLY the improved text that can directly replace the problematic section. Do not include explanations or comments - just the clean, improved text that the user can copy and paste into their document.`;\n\n    } else if (type === 'improvement') {\n      prompt = `You are an expert legal document editor. A document has been analyzed and a specific improvement suggestion has been made. Your task is to provide a concrete example of how to implement this improvement.\n\nDOCUMENT CONTENT:\n${documentContent}\n\nIMPROVEMENT SUGGESTION:\n- Area: ${item.area}\n- Priority: ${item.priority}\n- Suggestion: ${item.suggestion}\n\nPlease provide a specific example of improved text that implements this suggestion. Your response should:\n\n1. Create a concrete example that addresses the improvement area\n2. Demonstrate best practices for this type of document section\n3. Use professional, legally appropriate language\n4. Follow USA professional document standards\n5. Be directly applicable to the user's document\n\nRespond with ONLY the example improved text that demonstrates how to implement the suggestion. Do not include explanations or comments - just the clean, example text that shows the improvement in action.`;\n    }\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert legal document editor and attorney specializing in document improvement and professional writing. Provide only the improved text without any additional commentary or explanations.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ]\n    });\n\n    const improvedText = response.choices[0].message.content || '';\n    \n    return {\n      improvedText: improvedText.trim(),\n      explanation: type === 'weak-point' \n        ? `Improved version addressing: ${item.point}` \n        : `Example implementation for: ${item.area}`\n    };\n\n  } catch (error) {\n    console.error(\"OpenAI document improvement error:\", error);\n    throw new Error(\"Failed to generate document improvement\");\n  }\n}\n\nexport async function analyzeDocument(documentContent: string, documentTitle: string): Promise<any> {\n  try {\n    const prompt = `You are an expert legal document analyst with extensive experience in reviewing business documents, contracts, letters, and legal filings. Analyze the following document and provide a comprehensive professional review.\n\nDOCUMENT TITLE: ${documentTitle}\nDOCUMENT CONTENT:\n${documentContent}\n\nProvide a detailed analysis in JSON format with the following structure:\n\n{\n  \"documentTitle\": \"${documentTitle}\",\n  \"documentType\": \"Determine the type of document (contract, letter, agreement, etc.)\",\n  \"overallQuality\": {\n    \"score\": 85,\n    \"grade\": \"B+\",\n    \"summary\": \"Overall assessment summary\"\n  },\n  \"strongPoints\": [\n    {\n      \"point\": \"Clear and concise language\",\n      \"explanation\": \"Detailed explanation of why this is a strength\",\n      \"category\": \"Clarity\"\n    }\n  ],\n  \"weakPoints\": [\n    {\n      \"point\": \"Missing essential clause\",\n      \"explanation\": \"Detailed explanation of the issue and its implications\",\n      \"category\": \"Legal Structure\",\n      \"severity\": \"high\"\n    }\n  ],\n  \"improvements\": [\n    {\n      \"area\": \"Termination Clauses\",\n      \"suggestion\": \"Specific actionable suggestion for improvement\",\n      \"priority\": \"high\"\n    }\n  ],\n  \"legalInsights\": [\n    {\n      \"insight\": \"Professional legal insight\",\n      \"type\": \"compliance\",\n      \"explanation\": \"Detailed explanation of the legal implication\"\n    }\n  ],\n  \"recommendations\": [\n    \"Final recommendation 1\",\n    \"Final recommendation 2\"\n  ]\n}\n\nANALYSIS GUIDELINES:\n1. STRONG POINTS - Identify what the document does well:\n   - Clear language and structure\n   - Proper legal formatting\n   - Complete information\n   - Good organization\n   - Appropriate tone\n\n2. WEAK POINTS - Identify areas of concern (rate severity as low/medium/high):\n   - Missing critical information\n   - Ambiguous language\n   - Legal vulnerabilities\n   - Formatting issues\n   - Unclear terms\n\n3. IMPROVEMENTS - Specific actionable suggestions (rate priority as low/medium/high):\n   - Add missing clauses\n   - Clarify ambiguous terms\n   - Improve structure\n   - Enhance legal protections\n   - Better formatting\n\n4. LEGAL INSIGHTS - Professional insights categorized as:\n   - compliance: Regulatory or legal compliance matters\n   - risk: Potential legal risks\n   - best-practice: Industry best practices\n   - warning: Important legal warnings\n\n5. QUALITY SCORING:\n   - 90-100: Excellent, professional-grade document\n   - 80-89: Good quality with minor improvements needed\n   - 70-79: Acceptable but needs several improvements\n   - 60-69: Below standard, significant issues\n   - Below 60: Poor quality, major revision needed\n\nProvide practical, actionable feedback that would be valuable to a legal professional or business person.`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an expert legal document analyst and attorney with 20+ years of experience reviewing contracts, legal documents, and business correspondence. Provide thorough, professional analysis with practical insights.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"OpenAI document analysis error:\", error);\n    throw new Error(\"Failed to analyze document\");\n  }\n}\n\n// Medical Intelligence Suite Helper\nexport async function runMedicalIntelligence(mode: string, payload: any): Promise<any> {\n  try {\n    let prompt = \"\";\n    let systemMessage = \"You are an expert medical legal analyst specializing in personal injury cases, medical billing, and medical chronologies. Provide accurate, professional analysis.\";\n\n    switch (mode) {\n      case \"chronology\":\n        prompt = `Analyze the following medical records and create a detailed chronological timeline. Extract and organize:\n- Date of each visit/treatment\n- Provider name and type\n- Diagnosis (with ICD codes if mentioned)\n- Treatments/procedures performed (with CPT codes if mentioned)\n- Medications prescribed\n- Follow-up appointments\n- Treatment gaps (periods with no care)\n\nMedical Records Text:\n${payload.documentText}\n\nProvide response in JSON format:\n{\n  \"timeline\": [\n    {\n      \"date\": \"YYYY-MM-DD\",\n      \"provider\": \"Provider name\",\n      \"type\": \"Initial visit/Follow-up/Emergency/etc\",\n      \"diagnosis\": \"Diagnosis text\",\n      \"diagnosisCodes\": [\"ICD-10 codes\"],\n      \"treatment\": \"Treatment performed\",\n      \"procedureCodes\": [\"CPT codes\"],\n      \"medications\": [\"Medication list\"],\n      \"notes\": \"Additional notes\"\n    }\n  ],\n  \"summary\": \"Overall treatment summary\",\n  \"treatmentGaps\": [\"List of gaps in treatment\"],\n  \"totalVisits\": 0\n}`;\n        break;\n\n      case \"bills\":\n        prompt = `Analyze the following medical bills and provide a comprehensive billing summary. Extract:\n- Provider information\n- Service dates\n- CPT codes and descriptions\n- Charges and payments\n- Insurance information\n- Outstanding balances\n\nMedical Bills Text:\n${payload.documentText}\n\nProvide response in JSON format:\n{\n  \"bills\": [\n    {\n      \"provider\": \"Provider name\",\n      \"serviceDate\": \"YYYY-MM-DD\",\n      \"services\": [\n        {\n          \"cptCode\": \"CPT code\",\n          \"description\": \"Service description\",\n          \"charge\": 0.00,\n          \"paid\": 0.00,\n          \"balance\": 0.00\n        }\n      ]\n    }\n  ],\n  \"summary\": {\n    \"totalCharges\": 0.00,\n    \"totalPaid\": 0.00,\n    \"totalOutstanding\": 0.00,\n    \"insurancePaid\": 0.00,\n    \"patientResponsibility\": 0.00\n  },\n  \"unusualCharges\": [\"List of unusual or duplicate charges\"],\n  \"recommendations\": [\"Billing recommendations\"]\n}`;\n        break;\n\n      case \"summary\":\n        prompt = `Create a comprehensive medical summary report for legal purposes. Include:\n- Chief complaint and injury details\n- Complete treatment history\n- All treating physicians\n- Current medical status and prognosis\n- Pre-existing conditions\n- Total medical expenses\n\nMedical Information:\n${payload.documentText}\n\nProvide response in JSON format:\n{\n  \"chiefComplaint\": \"Primary injury/complaint\",\n  \"injuryDate\": \"YYYY-MM-DD\",\n  \"treatmentHistory\": \"Comprehensive treatment narrative\",\n  \"treatingPhysicians\": [\n    {\n      \"name\": \"Doctor name\",\n      \"specialty\": \"Specialty\",\n      \"dates\": \"Treatment period\"\n    }\n  ],\n  \"currentStatus\": \"Current medical condition\",\n  \"prognosis\": \"Future medical needs and prognosis\",\n  \"preExistingConditions\": [\"List of pre-existing conditions\"],\n  \"totalMedicalExpenses\": 0.00,\n  \"recommendations\": [\"Medical and legal recommendations\"]\n}`;\n        break;\n\n      default:\n        throw new Error(\"Invalid mode\");\n    }\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        { role: \"system\", content: systemMessage },\n        { role: \"user\", content: prompt }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"Medical intelligence error:\", error);\n    throw new Error(\"Failed to process medical intelligence request\");\n  }\n}\n\n// Demand Letter Generation Helper\nexport async function generateDemandLetter(data: any): Promise<any> {\n  try {\n    const prompt = `Generate a professional demand letter for a personal injury case with the following details:\n\nCase Type: ${data.caseType || \"Personal Injury\"}\nClaimant: ${data.claimantName}\nDefendant: ${data.defendantName}\nIncident Date: ${data.incidentDate}\nIncident Description: ${data.incidentDescription}\nInjuries: ${data.injuries}\nMedical Treatment: ${data.medicalTreatment || \"\"}\nMedical Expenses: $${data.medicalExpenses || 0}\nLost Wages: $${data.lostWages || 0}\nPain and Suffering Multiplier: ${data.painMultiplier || 3}x\nSettlement Demand: $${data.demandAmount}\n\nCreate a comprehensive, professionally formatted demand letter that includes:\n1. Professional letterhead formatting\n2. Proper addressing and salutations\n3. Statement of representation\n4. Detailed accident description\n5. Liability analysis\n6. Injury description\n7. Medical treatment summary\n8. Damages breakdown (medical expenses, lost wages, pain and suffering)\n9. Settlement demand with justification\n10. Deadline for response (typically 30 days)\n11. Professional closing\n\nProvide the response in JSON format:\n{\n  \"letterContent\": \"Full letter text with proper formatting\",\n  \"damagesBreakdown\": {\n    \"medicalExpenses\": 0.00,\n    \"lostWages\": 0.00,\n    \"painAndSuffering\": 0.00,\n    \"total\": 0.00\n  },\n  \"settlementCalculation\": {\n    \"economicDamages\": 0.00,\n    \"painMultiplier\": 3.0,\n    \"recommendedRange\": {\n      \"low\": 0.00,\n      \"high\": 0.00\n    }\n  },\n  \"keyPoints\": [\"List of key liability and damages points\"]\n}`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an experienced personal injury attorney specializing in demand letter preparation. Create professional, persuasive demand letters that maximize settlement value while maintaining professional standards.\"\n        },\n        { role: \"user\", content: prompt }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"Demand letter generation error:\", error);\n    throw new Error(\"Failed to generate demand letter\");\n  }\n}\n\n// Discovery Response Generator Helper\nexport async function generateDiscoveryResponse(type: string, payload: any): Promise<any> {\n  try {\n    let prompt = \"\";\n    let systemMessage = \"You are an experienced litigation attorney specializing in discovery practice. Generate professional, strategic discovery responses that protect client interests while complying with discovery rules.\";\n\n    const jurisdiction = payload.jurisdiction || \"Federal\";\n    const caseType = payload.caseType || \"General\";\n\n    switch (type) {\n      case \"interrogatories\":\n        prompt = `Generate professional responses to the following interrogatories for a ${caseType} case in ${jurisdiction} jurisdiction:\n\nInterrogatories:\n${payload.questions}\n\nCase Facts:\n${payload.caseFacts || \"\"}\n\nInstructions:\n- Include standard objections where appropriate (relevance, overbroad, privilege, etc.)\n- Provide substantive answers based on the case facts provided\n- Use proper legal formatting and citation\n- Include reservation of rights language\n\nProvide response in JSON format:\n{\n  \"responses\": [\n    {\n      \"number\": 1,\n      \"question\": \"Original interrogatory text\",\n      \"objections\": [\"List of objections\"],\n      \"response\": \"Substantive response text\",\n      \"notes\": \"Internal notes or strategy considerations\"\n    }\n  ],\n  \"generalObjections\": [\"List of general objections applicable to all responses\"],\n  \"verificationLanguage\": \"Verification statement text\"\n}`;\n        break;\n\n      case \"requests\":\n        prompt = `Generate professional responses to the following Requests for Production of Documents for a ${caseType} case in ${jurisdiction} jurisdiction:\n\nRequests:\n${payload.requests}\n\nAvailable Documents:\n${payload.documents || \"\"}\n\nInstructions:\n- Include standard objections where appropriate\n- Specify which documents will be produced\n- Note any privileged documents in privilege log format\n- Use proper legal formatting\n\nProvide response in JSON format:\n{\n  \"responses\": [\n    {\n      \"number\": 1,\n      \"request\": \"Original request text\",\n      \"objections\": [\"List of objections\"],\n      \"response\": \"Response text (will produce/objection/etc)\",\n      \"documentsProduced\": [\"List of document descriptions\"]\n    }\n  ],\n  \"privilegeLog\": [\n    {\n      \"description\": \"Document description\",\n      \"date\": \"Document date\",\n      \"author\": \"Author\",\n      \"recipient\": \"Recipient\",\n      \"privilege\": \"Type of privilege\"\n    }\n  ]\n}`;\n        break;\n\n      case \"admissions\":\n        prompt = `Generate professional responses to the following Requests for Admission for a ${caseType} case in ${jurisdiction} jurisdiction:\n\nRequests for Admission:\n${payload.admissions}\n\nCase Position:\n${payload.casePosition || \"\"}\n\nInstructions:\n- Respond with \"Admitted\", \"Denied\", or qualified response\n- Include explanatory statements where needed\n- Preserve legal positions strategically\n\nProvide response in JSON format:\n{\n  \"responses\": [\n    {\n      \"number\": 1,\n      \"request\": \"Original request text\",\n      \"response\": \"Admitted/Denied/Qualified Response\",\n      \"explanation\": \"Explanation if needed\",\n      \"strategy\": \"Internal strategy note\"\n    }\n  ],\n  \"summary\": \"Overall response strategy summary\"\n}`;\n        break;\n\n      default:\n        throw new Error(\"Invalid discovery type\");\n    }\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        { role: \"system\", content: systemMessage },\n        { role: \"user\", content: prompt }\n      ],\n      response_format: { type: \"json_object\" }\n    });\n\n    return JSON.parse(response.choices[0].message.content || '{}');\n  } catch (error) {\n    console.error(\"Discovery response generation error:\", error);\n    throw new Error(\"Failed to generate discovery response\");\n  }\n}\n","size_bytes":33640},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/pages/document-analyzer.tsx":{"content":"import React, { useState, useRef } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Upload, FileText, AlertCircle, CheckCircle, TrendingUp, AlertTriangle, Lightbulb, Star, Scale, Wand2, Copy, X, GripVertical } from \"lucide-react\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from \"@/components/ui/dialog\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\ninterface DocumentAnalysis {\n  documentTitle: string;\n  documentType: string;\n  overallQuality: {\n    score: number;\n    grade: string;\n    summary: string;\n  };\n  strongPoints: Array<{\n    point: string;\n    explanation: string;\n    category: string;\n  }>;\n  weakPoints: Array<{\n    point: string;\n    explanation: string;\n    category: string;\n    severity: 'low' | 'medium' | 'high';\n  }>;\n  improvements: Array<{\n    area: string;\n    suggestion: string;\n    priority: 'low' | 'medium' | 'high';\n  }>;\n  legalInsights: Array<{\n    insight: string;\n    type: 'compliance' | 'risk' | 'best-practice' | 'warning';\n    explanation: string;\n  }>;\n  recommendations: string[];\n}\n\n// Format document content to preserve formatting\nconst formatDocumentContent = (content: string): string => {\n  if (!content) return '';\n  \n  // Split content into lines and preserve formatting\n  const lines = content.split('\\n');\n  let formattedContent = '';\n  \n  for (let i = 0; i < lines.length; i++) {\n    const line = lines[i].trim();\n    \n    // Skip empty lines at the beginning\n    if (!line && formattedContent === '') continue;\n    \n    // Handle different types of content\n    if (line.startsWith('[Document:') && line.endsWith(']')) {\n      // Document header - skip or style differently\n      continue;\n    } else if (line.match(/^[A-Z][A-Z\\s]+$/)) {\n      // All caps lines (likely headers)\n      formattedContent += `<h3 style=\"font-weight: bold; margin: 20px 0 10px 0; text-transform: uppercase; font-size: 16px;\">${line}</h3>`;\n    } else if (line.match(/^[A-Z][a-zA-Z\\s]+:$/) || line.match(/^\\d+\\./)) {\n      // Section headers or numbered items\n      formattedContent += `<h4 style=\"font-weight: bold; margin: 15px 0 8px 0; font-size: 15px;\">${line}</h4>`;\n    } else if (line.startsWith('Dear ') || line.startsWith('To:') || line.startsWith('From:') || line.startsWith('Date:') || line.startsWith('Subject:')) {\n      // Letter headers\n      formattedContent += `<p style=\"margin: 8px 0; font-weight: ${line.startsWith('Dear') ? 'normal' : 'bold'};\">${line}</p>`;\n    } else if (line.match(/^\\s*[-â€¢]\\s/)) {\n      // Bullet points\n      formattedContent += `<p style=\"margin: 5px 0 5px 20px;\">${line}</p>`;\n    } else if (line.length > 0) {\n      // Regular paragraphs\n      formattedContent += `<p style=\"margin: 12px 0; text-align: justify;\">${line}</p>`;\n    } else {\n      // Empty lines for spacing\n      formattedContent += '<br/>';\n    }\n  }\n  \n  return formattedContent || content.replace(/\\n/g, '<br/>');\n};\n\n// Custom Resizable Panel Layout Component\nfunction ResizablePanelLayout({ \n  leftPanel, \n  rightPanel \n}: { \n  leftPanel: React.ReactNode; \n  rightPanel: React.ReactNode; \n}) {\n  const [leftWidth, setLeftWidth] = useState(50);\n  const [isDragging, setIsDragging] = useState(false);\n  const [startX, setStartX] = useState(0);\n  const [startLeftWidth, setStartLeftWidth] = useState(50);\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setIsDragging(true);\n    setStartX(e.clientX);\n    setStartLeftWidth(leftWidth);\n    document.body.style.cursor = 'col-resize';\n    e.preventDefault();\n  };\n\n  const handleMouseMove = (e: MouseEvent) => {\n    if (!isDragging) return;\n    \n    const containerWidth = window.innerWidth - 320; // Account for sidebar\n    const deltaX = e.clientX - startX;\n    const deltaPercent = (deltaX / containerWidth) * 100;\n    const newLeftWidth = Math.max(20, Math.min(80, startLeftWidth + deltaPercent));\n    \n    setLeftWidth(newLeftWidth);\n    e.preventDefault();\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n    document.body.style.cursor = 'default';\n  };\n\n  // Mouse event listeners\n  React.useEffect(() => {\n    if (isDragging) {\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n      \n      return () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n    }\n  }, [isDragging, startX, startLeftWidth]);\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Left Panel */}\n      <div \n        className=\"h-full pr-2\" \n        style={{ width: `${leftWidth}%` }}\n      >\n        {leftPanel}\n      </div>\n      \n      {/* Resize Handle */}\n      <div\n        className=\"w-2 bg-border hover:bg-accent transition-colors flex items-center justify-center cursor-col-resize group select-none\"\n        onMouseDown={handleMouseDown}\n        data-testid=\"panel-resize-handle\"\n      >\n        <div className=\"w-1 h-16 bg-border rounded-full group-hover:bg-accent-foreground transition-colors flex items-center justify-center\">\n          <GripVertical className=\"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity\" />\n        </div>\n      </div>\n      \n      {/* Right Panel */}\n      <div \n        className=\"h-full pl-2\" \n        style={{ width: `${100 - leftWidth}%` }}\n      >\n        {rightPanel}\n      </div>\n    </div>\n  );\n}\n\nexport default function DocumentAnalyzer() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // State management\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null);\n  const [documentContent, setDocumentContent] = useState<string>('');\n  const [analysis, setAnalysis] = useState<DocumentAnalysis | null>(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  \n  // Improvement modal state\n  const [improvementModal, setImprovementModal] = useState<{\n    isOpen: boolean;\n    type: 'weak-point' | 'improvement' | null;\n    item: any;\n    suggestion: string;\n    isLoading: boolean;\n  }>({\n    isOpen: false,\n    type: null,\n    item: null,\n    suggestion: '',\n    isLoading: false\n  });\n\n  // Document improvement mutation\n  const improvementMutation = useMutation({\n    mutationFn: async ({ type, item, documentContent }: { type: string; item: any; documentContent: string }) => {\n      const res = await fetch(\"/api/improve-document-section\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          type,\n          item,\n          documentContent\n        }),\n        credentials: \"include\"\n      });\n      \n      if (!res.ok) {\n        const errorData = await res.json();\n        throw new Error(errorData.error || \"Failed to generate improvement\");\n      }\n      \n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setImprovementModal(prev => ({\n        ...prev,\n        suggestion: data.improvedText,\n        isLoading: false\n      }));\n      toast({\n        title: \"Improvement generated\",\n        description: \"AI has generated an improved version of this section.\",\n      });\n    },\n    onError: (error: Error) => {\n      setImprovementModal(prev => ({\n        ...prev,\n        isLoading: false\n      }));\n      toast({\n        title: \"Failed to generate improvement\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // File upload mutation\n  const uploadMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('document', file);\n      \n      const res = await fetch(\"/api/analyze-document\", {\n        method: \"POST\",\n        body: formData,\n        credentials: \"include\"\n      });\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setDocumentContent(data.content);\n      setAnalysis(data.analysis);\n      setIsAnalyzing(false);\n      toast({\n        title: \"Document analyzed successfully\",\n        description: \"Your document has been analyzed by our AI legal expert.\",\n      });\n    },\n    onError: (error: Error) => {\n      setIsAnalyzing(false);\n      toast({\n        title: \"Analysis failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Check file type\n      const allowedTypes = [\n        'application/vnd.openxmlformats-officedocument.wordprocessingml.document', // .docx\n        'application/msword', // .doc\n        'text/plain', // .txt\n        'application/pdf' // .pdf\n      ];\n      \n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: \"Invalid file type\",\n          description: \"Please upload a Word document (.doc, .docx), PDF, or text file.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      // Check file size (10MB limit)\n      if (file.size > 10 * 1024 * 1024) {\n        toast({\n          title: \"File too large\",\n          description: \"Please upload a file smaller than 10MB.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      setUploadedFile(file);\n      setIsAnalyzing(true);\n      uploadMutation.mutate(file);\n    }\n  };\n\n  const handleUploadClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const resetAnalysis = () => {\n    setUploadedFile(null);\n    setDocumentContent('');\n    setAnalysis(null);\n    setIsAnalyzing(false);\n    setImprovementModal({\n      isOpen: false,\n      type: null,\n      item: null,\n      suggestion: '',\n      isLoading: false\n    });\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleImproveItem = (type: 'weak-point' | 'improvement', item: any) => {\n    setImprovementModal({\n      isOpen: true,\n      type,\n      item,\n      suggestion: '',\n      isLoading: true\n    });\n    \n    improvementMutation.mutate({\n      type,\n      item,\n      documentContent\n    });\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n    toast({\n      title: \"Copied to clipboard\",\n      description: \"The improved text has been copied to your clipboard.\",\n    });\n  };\n\n  const closeImprovementModal = () => {\n    setImprovementModal({\n      isOpen: false,\n      type: null,\n      item: null,\n      suggestion: '',\n      isLoading: false\n    });\n  };\n\n\n  const getQualityColor = (score: number) => {\n    if (score >= 85) return \"text-green-600 bg-green-50 border-green-200\";\n    if (score >= 70) return \"text-blue-600 bg-blue-50 border-blue-200\";\n    if (score >= 50) return \"text-yellow-600 bg-yellow-50 border-yellow-200\";\n    return \"text-red-600 bg-red-50 border-red-200\";\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'high': return \"border-l-red-500 bg-red-50\";\n      case 'medium': return \"border-l-yellow-500 bg-yellow-50\";\n      case 'low': return \"border-l-blue-500 bg-blue-50\";\n      default: return \"border-l-gray-500 bg-gray-50\";\n    }\n  };\n\n  const getPriorityBadge = (priority: string) => {\n    switch (priority) {\n      case 'high': return <Badge variant=\"destructive\">High Priority</Badge>;\n      case 'medium': return <Badge variant=\"secondary\">Medium Priority</Badge>;\n      case 'low': return <Badge variant=\"outline\">Low Priority</Badge>;\n      default: return <Badge variant=\"outline\">Standard</Badge>;\n    }\n  };\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'compliance': return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case 'risk': return <AlertTriangle className=\"h-4 w-4 text-red-600\" />;\n      case 'best-practice': return <Lightbulb className=\"h-4 w-4 text-blue-600\" />;\n      case 'warning': return <AlertCircle className=\"h-4 w-4 text-yellow-600\" />;\n      default: return <FileText className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  return (\n    <SidebarLayout>\n      <div className=\"flex flex-col h-full\">\n        {/* Header */}\n        <div className=\"bg-card border-b border-border p-4 md:p-6\">\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-xl md:text-2xl font-bold text-foreground\">Document Analyzer</h1>\n              <p className=\"text-sm md:text-base text-muted-foreground\">\n                Upload documents for AI-powered legal analysis and review\n              </p>\n            </div>\n            {(uploadedFile || analysis) && (\n              <Button variant=\"outline\" onClick={resetAnalysis} data-testid=\"button-reset-analysis\">\n                New Analysis\n              </Button>\n            )}\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 p-4 md:p-6 overflow-hidden\">\n          {!uploadedFile && !isAnalyzing && !analysis ? (\n            /* Upload Interface */\n            <div className=\"h-full flex items-center justify-center\">\n              <Card className=\"w-full max-w-md\">\n                <CardHeader className=\"text-center\">\n                  <CardTitle className=\"flex items-center justify-center gap-2\">\n                    <FileText className=\"h-6 w-6\" />\n                    Upload Document\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div \n                    className=\"border-2 border-dashed border-border rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors\"\n                    onClick={handleUploadClick}\n                    data-testid=\"upload-zone\"\n                  >\n                    <Upload className=\"h-12 w-12 mx-auto mb-4 text-muted-foreground\" />\n                    <h3 className=\"text-lg font-medium mb-2\">Upload Document</h3>\n                    <p className=\"text-sm text-muted-foreground mb-4\">\n                      Click here or drag and drop your document\n                    </p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      Supports: .doc, .docx, .pdf, .txt (Max 10MB)\n                    </p>\n                  </div>\n                  \n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".doc,.docx,.pdf,.txt\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                    data-testid=\"file-input\"\n                  />\n                  \n                  <Button \n                    onClick={handleUploadClick}\n                    className=\"w-full\"\n                    data-testid=\"button-upload\"\n                  >\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                    Choose File\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n          ) : isAnalyzing ? (\n            /* Loading State */\n            <div className=\"h-full flex items-center justify-center\">\n              <Card className=\"w-full max-w-md\">\n                <CardContent className=\"p-8 text-center space-y-4\">\n                  <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto\"></div>\n                  <h3 className=\"text-lg font-medium\">Analyzing Document</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Our AI is analyzing \"{uploadedFile?.name}\" for legal insights...\n                  </p>\n                  <Progress value={undefined} className=\"w-full\" />\n                </CardContent>\n              </Card>\n            </div>\n          ) : (\n            /* Split Screen Analysis View with Custom Resizable Layout */\n            <ResizablePanelLayout \n              leftPanel={\n                <Card className=\"h-full flex flex-col\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <FileText className=\"h-5 w-5\" />\n                      Document Content\n                    </CardTitle>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {uploadedFile?.name} ({Math.round((uploadedFile?.size || 0) / 1024)} KB)\n                    </p>\n                  </CardHeader>\n                  <CardContent className=\"flex-1 overflow-hidden\">\n                    <div \n                      className=\"h-full overflow-auto bg-white p-6 rounded-lg border shadow-sm\"\n                      style={{ fontFamily: 'Times, \"Times New Roman\", serif' }}\n                      data-testid=\"document-content\"\n                    >\n                      {documentContent ? (\n                        <div className=\"document-preview\">\n                          <div className=\"mb-4 pb-2 border-b border-gray-200\">\n                            <h3 className=\"text-lg font-semibold text-gray-800\">\n                              {uploadedFile?.name || \"Document Preview\"}\n                            </h3>\n                            <p className=\"text-sm text-gray-500\">\n                              {uploadedFile?.type} â€¢ {Math.round((uploadedFile?.size || 0) / 1024)} KB\n                            </p>\n                          </div>\n                          <div \n                            className=\"prose prose-sm max-w-none leading-relaxed text-gray-900\"\n                            style={{\n                              fontSize: '14px',\n                              lineHeight: '1.6',\n                              fontFamily: 'Times, \"Times New Roman\", serif'\n                            }}\n                            dangerouslySetInnerHTML={{\n                              __html: formatDocumentContent(documentContent)\n                            }}\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"flex items-center justify-center h-full text-gray-500\">\n                          <div className=\"text-center\">\n                            <FileText className=\"h-12 w-12 mx-auto mb-2 text-gray-300\" />\n                            <p>Document content will appear here...</p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              }\n              rightPanel={\n                <Card className=\"h-full flex flex-col\">\n                  <CardHeader>\n                    <CardTitle className=\"flex items-center gap-2\">\n                      <TrendingUp className=\"h-5 w-5\" />\n                      AI Legal Analysis\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"flex-1 overflow-auto space-y-6\">\n                    {analysis && (\n                      <>\n                        {/* Overall Quality Assessment */}\n                        <div className={`p-4 rounded-lg border ${getQualityColor(analysis.overallQuality.score)}`}>\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <h3 className=\"font-semibold\">Overall Quality Assessment</h3>\n                            <Badge variant=\"secondary\" className=\"text-lg px-3 py-1\">\n                              {analysis.overallQuality.grade}\n                            </Badge>\n                          </div>\n                          <div className=\"mb-3\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"text-sm font-medium\">Score:</span>\n                              <span className=\"text-lg font-bold\">{analysis.overallQuality.score}/100</span>\n                            </div>\n                            <Progress value={analysis.overallQuality.score} className=\"w-full\" />\n                          </div>\n                          <p className=\"text-sm\">{analysis.overallQuality.summary}</p>\n                        </div>\n\n                        {/* Strong Points */}\n                        <div>\n                          <h3 className=\"font-semibold text-green-700 mb-3 flex items-center gap-2\">\n                            <CheckCircle className=\"h-5 w-5\" />\n                            Strong Points ({analysis.strongPoints.length})\n                          </h3>\n                          <div className=\"space-y-3\">\n                            {analysis.strongPoints.map((point, index) => (\n                              <div key={index} className=\"border-l-4 border-l-green-500 bg-green-50 p-3 rounded-r-lg\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                  <Star className=\"h-4 w-4 text-green-600\" />\n                                  <span className=\"font-medium text-green-800\">{point.point}</span>\n                                  <Badge variant=\"outline\" className=\"text-xs\">{point.category}</Badge>\n                                </div>\n                                <p className=\"text-sm text-green-700 ml-6\">{point.explanation}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n\n                        <Separator />\n\n                        {/* Weak Points */}\n                        <div>\n                          <h3 className=\"font-semibold text-red-700 mb-3 flex items-center gap-2\">\n                            <AlertCircle className=\"h-5 w-5\" />\n                            Areas of Concern ({analysis.weakPoints.length})\n                          </h3>\n                          <div className=\"space-y-3\">\n                            {analysis.weakPoints.map((point, index) => (\n                              <div key={index} className={`border-l-4 p-3 rounded-r-lg ${getSeverityColor(point.severity)}`}>\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                  <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n                                  <span className=\"font-medium text-red-800\">{point.point}</span>\n                                  <Badge variant=\"outline\" className=\"text-xs\">{point.category}</Badge>\n                                  {getPriorityBadge(point.severity)}\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    className=\"ml-auto h-6 px-2 text-xs\"\n                                    onClick={() => handleImproveItem('weak-point', point)}\n                                    data-testid={`button-improve-weak-${index}`}\n                                  >\n                                    <Wand2 className=\"h-3 w-3 mr-1\" />\n                                    Fix This\n                                  </Button>\n                                </div>\n                                <p className=\"text-sm text-red-700 ml-6\">{point.explanation}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n\n                        <Separator />\n\n                        {/* Improvement Suggestions */}\n                        <div>\n                          <h3 className=\"font-semibold text-blue-700 mb-3 flex items-center gap-2\">\n                            <Lightbulb className=\"h-5 w-5\" />\n                            Improvement Suggestions ({analysis.improvements.length})\n                          </h3>\n                          <div className=\"space-y-3\">\n                            {analysis.improvements.map((improvement, index) => (\n                              <div key={index} className=\"border-l-4 border-l-blue-500 bg-blue-50 p-3 rounded-r-lg\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                  <TrendingUp className=\"h-4 w-4 text-blue-600\" />\n                                  <span className=\"font-medium text-blue-800\">{improvement.area}</span>\n                                  {getPriorityBadge(improvement.priority)}\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    className=\"ml-auto h-6 px-2 text-xs bg-white\"\n                                    onClick={() => handleImproveItem('improvement', improvement)}\n                                    data-testid={`button-improve-suggestion-${index}`}\n                                  >\n                                    <Wand2 className=\"h-3 w-3 mr-1\" />\n                                    Show Example\n                                  </Button>\n                                </div>\n                                <p className=\"text-sm text-blue-700 ml-6\">{improvement.suggestion}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n\n                        <Separator />\n\n                        {/* Legal Insights */}\n                        <div>\n                          <h3 className=\"font-semibold text-purple-700 mb-3 flex items-center gap-2\">\n                            <Scale className=\"h-5 w-5\" />\n                            Legal Professional Insights ({analysis.legalInsights.length})\n                          </h3>\n                          <div className=\"space-y-3\">\n                            {analysis.legalInsights.map((insight, index) => (\n                              <div key={index} className=\"border border-purple-200 bg-purple-50 p-3 rounded-lg\">\n                                <div className=\"flex items-center gap-2 mb-1\">\n                                  {getInsightIcon(insight.type)}\n                                  <span className=\"font-medium text-purple-800 capitalize\">{insight.type.replace('-', ' ')}</span>\n                                </div>\n                                <p className=\"text-sm text-purple-900 mb-2 font-medium\">{insight.insight}</p>\n                                <p className=\"text-sm text-purple-700\">{insight.explanation}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n\n                        {/* Recommendations */}\n                        {analysis.recommendations.length > 0 && (\n                          <>\n                            <Separator />\n                            <div>\n                              <h3 className=\"font-semibold text-gray-700 mb-3\">Final Recommendations</h3>\n                              <ul className=\"space-y-2\">\n                                {analysis.recommendations.map((rec, index) => (\n                                  <li key={index} className=\"flex items-start gap-2 text-sm\">\n                                    <CheckCircle className=\"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0\" />\n                                    <span>{rec}</span>\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          </>\n                        )}\n                      </>\n                    )}\n                  </CardContent>\n                </Card>\n              }\n            />\n          )}\n        </div>\n\n        {/* Improvement Modal */}\n        <Dialog open={improvementModal.isOpen} onOpenChange={closeImprovementModal}>\n          <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle className=\"flex items-center gap-2\">\n                <Wand2 className=\"h-5 w-5\" />\n                AI Document Improvement\n              </DialogTitle>\n              <DialogDescription>\n                {improvementModal.type === 'weak-point' \n                  ? `AI-generated improvement for: \"${improvementModal.item?.point}\"`\n                  : `AI example for: \"${improvementModal.item?.area}\"`\n                }\n              </DialogDescription>\n            </DialogHeader>\n            \n            <div className=\"space-y-4\">\n              {improvementModal.isLoading ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n                  <span className=\"ml-3\">Generating improvement...</span>\n                </div>\n              ) : improvementModal.suggestion ? (\n                <div className=\"space-y-4\">\n                  <div className=\"bg-muted/50 p-4 rounded-lg border\">\n                    <h4 className=\"font-medium mb-2 flex items-center gap-2\">\n                      <AlertCircle className=\"h-4 w-4\" />\n                      Original Issue:\n                    </h4>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {improvementModal.item?.explanation || improvementModal.item?.suggestion}\n                    </p>\n                  </div>\n                  \n                  <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <h4 className=\"font-medium text-green-800 flex items-center gap-2\">\n                        <CheckCircle className=\"h-4 w-4\" />\n                        AI Improved Version:\n                      </h4>\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => copyToClipboard(improvementModal.suggestion)}\n                        data-testid=\"button-copy-improvement\"\n                      >\n                        <Copy className=\"h-3 w-3 mr-1\" />\n                        Copy\n                      </Button>\n                    </div>\n                    <Textarea\n                      value={improvementModal.suggestion}\n                      readOnly\n                      className=\"min-h-[200px] resize-none bg-white border-green-300\"\n                      data-testid=\"textarea-improvement\"\n                    />\n                  </div>\n                  \n                  <div className=\"bg-blue-50 p-3 rounded-lg border border-blue-200\">\n                    <p className=\"text-sm text-blue-800\">\n                      <strong>How to use:</strong> Copy the improved text above and replace the corresponding section in your document. \n                      Review and modify as needed to match your specific requirements.\n                    </p>\n                  </div>\n                </div>\n              ) : null}\n              \n              <div className=\"flex justify-end gap-2\">\n                <Button variant=\"outline\" onClick={closeImprovementModal} data-testid=\"button-close-improvement\">\n                  <X className=\"h-4 w-4 mr-1\" />\n                  Close\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </SidebarLayout>\n  );\n}","size_bytes":31740},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { setupAuth } from \"./auth\";\nimport { storage } from \"./storage\";\nimport { \n  searchLegalDatabase, \n  summarizeDocument, \n  analyzeRisk,\n  answerLegalQuestion,\n  performWebSearch,\n  generateDocument,\n  analyzeDocument,\n  improveDocumentSection\n} from \"./openai\";\nimport { insertCaseSchema, insertDocumentSchema, insertMedicalRecordSchema } from \"@shared/schema\";\nimport multer from \"multer\";\nimport mammoth from \"mammoth\";\nimport { generatePDF, generateDOCX, generateTXT, type ExportContent } from \"./document-export\";\nimport { runMedicalIntelligence, generateDemandLetter, generateDiscoveryResponse } from \"./openai\";\n\nconst upload = multer({ \n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 50 * 1024 * 1024, // 50MB limit\n  },\n});\n\nfunction isAuthenticated(req: any, res: any, next: any) {\n  if (req.isAuthenticated()) {\n    return next();\n  }\n  res.status(401).json({ error: \"Authentication required\" });\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup authentication routes\n  setupAuth(app);\n\n  // AI Legal Research endpoint\n  app.post(\"/api/legal-search\", isAuthenticated, async (req, res) => {\n    try {\n      const { query, filters } = req.body;\n      \n      if (!query) {\n        return res.status(400).json({ error: \"Query is required\" });\n      }\n\n      const results = await searchLegalDatabase(query, filters);\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'legal-research',\n        query: query,\n        results: results,\n      });\n\n      res.json(results);\n    } catch (error) {\n      console.error(\"Legal search error:\", error);\n      res.status(500).json({ error: \"Failed to search legal database\" });\n    }\n  });\n\n  // Brief Summarizer endpoint\n  app.post(\"/api/summarize-document\", isAuthenticated, upload.single('document'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"Document file is required\" });\n      }\n\n      const { summaryType = 'quick' } = req.body;\n      \n      // Extract text based on file type\n      let documentText = '';\n      const fileType = req.file.mimetype;\n      \n      if (fileType === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document' || \n          req.file.originalname.endsWith('.docx')) {\n        // Use mammoth to extract text from Word documents\n        const result = await mammoth.extractRawText({ buffer: req.file.buffer });\n        documentText = result.value;\n      } else if (fileType === 'application/msword' || req.file.originalname.endsWith('.doc')) {\n        // For older .doc format, attempt text extraction (may not be perfect)\n        documentText = req.file.buffer.toString('utf-8');\n      } else if (fileType === 'text/plain' || req.file.originalname.endsWith('.txt')) {\n        // Plain text files\n        documentText = req.file.buffer.toString('utf-8');\n      } else {\n        // Try UTF-8 conversion for other formats\n        documentText = req.file.buffer.toString('utf-8');\n      }\n      \n      const summary = await summarizeDocument(documentText, summaryType);\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'brief-summarizer',\n        query: req.file.originalname || 'Document uploaded',\n        results: summary,\n      });\n\n      res.json(summary);\n    } catch (error) {\n      console.error(\"Document summarization error:\", error);\n      res.status(500).json({ error: \"Failed to summarize document\" });\n    }\n  });\n\n  // Risk Analysis endpoint\n  app.post(\"/api/analyze-risk\", isAuthenticated, async (req, res) => {\n    try {\n      const { caseType, description, jurisdiction, caseValue } = req.body;\n      \n      if (!caseType || !description) {\n        return res.status(400).json({ error: \"Case type and description are required\" });\n      }\n\n      const analysis = await analyzeRisk({\n        caseType,\n        description,\n        jurisdiction,\n        caseValue,\n      });\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'risk-analysis',\n        query: `${caseType}: ${description.substring(0, 100)}...`,\n        results: analysis,\n      });\n\n      res.json(analysis);\n    } catch (error) {\n      console.error(\"Risk analysis error:\", error);\n      res.status(500).json({ error: \"Failed to analyze risk\" });\n    }\n  });\n\n  // Law Agent endpoint\n  app.post(\"/api/law-agent\", isAuthenticated, async (req, res) => {\n    try {\n      const { question } = req.body;\n      \n      if (!question) {\n        return res.status(400).json({ error: \"Question is required\" });\n      }\n\n      const answer = await answerLegalQuestion(question);\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'law-agent',\n        query: question,\n        results: answer,\n      });\n\n      res.json(answer);\n    } catch (error) {\n      console.error(\"Law agent error:\", error);\n      res.status(500).json({ error: \"Failed to answer legal question\" });\n    }\n  });\n\n  // Web Search endpoint\n  app.post(\"/api/web-search\", isAuthenticated, async (req, res) => {\n    try {\n      const { query } = req.body;\n      \n      if (!query) {\n        return res.status(400).json({ error: \"Search query is required\" });\n      }\n\n      const results = await performWebSearch(query);\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'web-search',\n        query: query,\n        results: results,\n      });\n\n      res.json(results);\n    } catch (error) {\n      console.error(\"Web search error:\", error);\n      res.status(500).json({ error: \"Failed to perform web search\" });\n    }\n  });\n\n  // Quick Question endpoint\n  app.post(\"/api/quick-question\", isAuthenticated, async (req, res) => {\n    try {\n      const { question } = req.body;\n      \n      console.log(\"[QUICK-QUESTION] Received question:\", question);\n      \n      if (!question) {\n        return res.status(400).json({ error: \"Question is required\" });\n      }\n\n      const answer = await answerLegalQuestion(question);\n      console.log(\"[QUICK-QUESTION] OpenAI response:\", JSON.stringify(answer, null, 2));\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'quick-question',\n        query: question,\n        results: { answer },\n      });\n\n      const response = { answer };\n      console.log(\"[QUICK-QUESTION] Sending response:\", JSON.stringify(response, null, 2));\n      res.json(response);\n    } catch (error) {\n      console.error(\"Quick question error:\", error);\n      res.status(500).json({ error: \"Failed to answer question\" });\n    }\n  });\n\n  // Document Generation endpoint\n  app.post(\"/api/generate-document\", isAuthenticated, async (req, res) => {\n    try {\n      const { documentType, inputMethod, textContent, formData } = req.body;\n      \n      console.log(\"[DOCUMENT-GENERATION] Received request:\", { documentType, inputMethod, textContent: textContent?.substring(0, 100), formData });\n      \n      if (!documentType || !inputMethod) {\n        return res.status(400).json({ error: \"Document type and input method are required\" });\n      }\n\n      // Validate input based on method\n      if ((inputMethod === 'voice' || inputMethod === 'paste') && !textContent) {\n        return res.status(400).json({ error: \"Text content is required for voice and paste input methods\" });\n      }\n\n      if (inputMethod === 'manual' && !formData) {\n        return res.status(400).json({ error: \"Form data is required for manual input method\" });\n      }\n\n      const document = await generateDocument(documentType, inputMethod, textContent, formData);\n      console.log(\"[DOCUMENT-GENERATION] Generated document:\", { \n        id: document.id, \n        type: document.type, \n        title: document.title,\n        contentLength: document.formattedContent?.length || 0\n      });\n      \n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'document-generation',\n        query: `${documentType} - ${inputMethod}`,\n        results: { document },\n      });\n\n      res.json(document);\n    } catch (error) {\n      console.error(\"Document generation error:\", error);\n      res.status(500).json({ error: \"Failed to generate document\" });\n    }\n  });\n\n  // Document Analysis endpoint\n  app.post(\"/api/analyze-document\", isAuthenticated, upload.single('document'), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"No document file provided\" });\n      }\n\n      console.log(\"[DOCUMENT-ANALYSIS] Received file:\", { \n        filename: req.file.originalname, \n        mimetype: req.file.mimetype, \n        size: req.file.size \n      });\n\n      // Extract text content from the uploaded file\n      let documentContent = '';\n      const fileBuffer = req.file.buffer;\n      const fileName = req.file.originalname;\n\n      // For now, handle text files directly, PDF and Word files would need additional processing\n      if (req.file.mimetype === 'text/plain') {\n        documentContent = fileBuffer.toString('utf-8');\n      } else if (req.file.mimetype.includes('word') || req.file.mimetype.includes('document')) {\n        // For Word documents, we'll create a formatted demo version\n        documentContent = `BUSINESS LETTER SAMPLE\n\n[Company Letterhead Area]\n\nDate: ${new Date().toLocaleDateString('en-US', { \n  year: 'numeric', \n  month: 'long', \n  day: 'numeric' \n})}\n\n[Recipient Name]\n[Recipient Title]\n[Company Name]\n[Address Line 1]\n[Address Line 2]\n[City, State ZIP Code]\n\nDear [Recipient Name],\n\nI am writing to [state the purpose of your letter clearly and concisely]. This document demonstrates how a properly formatted business letter should appear with appropriate spacing, professional tone, and clear structure.\n\nBODY PARAGRAPHS:\n\nThe main body of your letter should contain the essential information you want to convey. Each paragraph should focus on a specific point or topic. Use clear, professional language that is appropriate for your audience.\n\nâ€¢ First key point or important information\nâ€¢ Second key point with supporting details  \nâ€¢ Third key point if applicable\n\nCONCLUSION:\n\nIn closing, please feel free to contact me at [phone number] or [email address] if you have any questions or need additional information. I look forward to hearing from you soon.\n\nSincerely,\n\n[Your Signature]\n[Your Printed Name]\n[Your Title]\n[Your Contact Information]\n\n---\nNote: This is a demonstration of a properly formatted business document. In a production environment, this would show the actual content of your uploaded Word document with preserved formatting, headers, and document structure.`;\n      } else if (req.file.mimetype === 'application/pdf') {\n        // For PDF documents, create a formatted demo version\n        documentContent = `LEGAL DOCUMENT SAMPLE\n\nCONFIDENTIAL AGREEMENT\n\nPARTIES:\nParty A: [Company/Individual Name]\nParty B: [Company/Individual Name]\n\nEFFECTIVE DATE: ${new Date().toLocaleDateString()}\n\nWHEREAS, the parties wish to enter into this agreement for the following purposes:\n\n1. PURPOSE AND SCOPE\n   This agreement establishes the terms and conditions under which the parties will collaborate and share information.\n\n2. CONFIDENTIALITY OBLIGATIONS\n   Each party agrees to maintain the confidentiality of any proprietary information received from the other party.\n\n3. TERM AND TERMINATION\n   This agreement shall remain in effect for a period of [duration] unless terminated earlier in accordance with the provisions herein.\n\n4. GOVERNING LAW\n   This agreement shall be governed by the laws of [State/Country].\n\nADDITIONAL TERMS:\n- All communications shall be in writing\n- Any modifications must be agreed upon by both parties\n- This agreement constitutes the entire understanding between the parties\n\nIN WITNESS WHEREOF, the parties have executed this agreement as of the date first written above.\n\nSIGNATURES:\n\n_________________________           _________________________\n[Party A Signature]                  [Party B Signature]\n[Printed Name]                       [Printed Name]\n[Title]                             [Title]\n[Date]                              [Date]\n\n---\nNote: This is a demonstration of a legal document format. In a production environment, this would display the actual content of your uploaded PDF document with preserved formatting, legal structure, and original text.`;\n      } else {\n        return res.status(400).json({ error: \"Unsupported file type. Please upload a Word document, PDF, or text file.\" });\n      }\n\n      if (!documentContent.trim()) {\n        return res.status(400).json({ error: \"Could not extract content from the document\" });\n      }\n\n      console.log(\"[DOCUMENT-ANALYSIS] Extracted content length:\", documentContent.length);\n\n      // Analyze the document using AI\n      const analysis = await analyzeDocument(documentContent, fileName);\n      console.log(\"[DOCUMENT-ANALYSIS] Analysis completed:\", { \n        documentTitle: analysis.documentTitle,\n        overallScore: analysis.overallQuality?.score,\n        strongPointsCount: analysis.strongPoints?.length || 0,\n        weakPointsCount: analysis.weakPoints?.length || 0\n      });\n\n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'document-analysis',\n        query: `Document Analysis: ${fileName}`,\n        results: { analysis, fileName, fileSize: req.file.size },\n      });\n\n      res.json({\n        content: documentContent,\n        analysis: analysis,\n        fileName: fileName,\n        fileSize: req.file.size\n      });\n    } catch (error) {\n      console.error(\"Document analysis error:\", error);\n      res.status(500).json({ error: \"Failed to analyze document\" });\n    }\n  });\n\n  // Document improvement endpoint\n  app.post(\"/api/improve-document-section\", isAuthenticated, async (req, res) => {\n    try {\n      const { type, item, documentContent } = req.body;\n\n      if (!type || !item || !documentContent) {\n        return res.status(400).json({ error: \"Missing required fields: type, item, documentContent\" });\n      }\n\n      console.log(\"[DOCUMENT-IMPROVEMENT] Processing improvement request:\", { \n        type, \n        itemPoint: item.point || item.area,\n        contentLength: documentContent.length \n      });\n\n      // Generate improvement using AI\n      const improvement = await improveDocumentSection(type, item, documentContent);\n      \n      console.log(\"[DOCUMENT-IMPROVEMENT] Improvement generated:\", { \n        improvedTextLength: improvement.improvedText.length,\n        explanation: improvement.explanation\n      });\n\n      // Save to search history\n      await storage.createSearchHistory({\n        userId: req.user!.id,\n        type: 'document-improvement',\n        query: `${type}: ${item.point || item.area}`,\n        results: { improvement, type, item },\n      });\n\n      res.json(improvement);\n    } catch (error) {\n      console.error(\"Document improvement error:\", error);\n      res.status(500).json({ error: \"Failed to generate improvement\" });\n    }\n  });\n\n  // Get search history\n  app.get(\"/api/search-history\", isAuthenticated, async (req, res) => {\n    try {\n      const history = await storage.getSearchHistoryByUserId(req.user!.id);\n      res.json(history);\n    } catch (error) {\n      console.error(\"Search history error:\", error);\n      res.status(500).json({ error: \"Failed to get search history\" });\n    }\n  });\n\n  // Case Management Routes\n  app.get(\"/api/cases\", isAuthenticated, async (req, res) => {\n    try {\n      const cases = await storage.getCasesByUser(req.user!.id);\n      res.json(cases);\n    } catch (error) {\n      console.error(\"Get cases error:\", error);\n      res.status(500).json({ error: \"Failed to get cases\" });\n    }\n  });\n\n  app.get(\"/api/cases/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const caseData = await storage.getCase(req.params.id);\n      if (!caseData || caseData.userId !== req.user!.id) {\n        return res.status(404).json({ error: \"Case not found\" });\n      }\n      res.json(caseData);\n    } catch (error) {\n      console.error(\"Get case error:\", error);\n      res.status(500).json({ error: \"Failed to get case\" });\n    }\n  });\n\n  app.post(\"/api/cases\", isAuthenticated, async (req, res) => {\n    try {\n      // Validate request body\n      const validatedData = insertCaseSchema.parse({\n        ...req.body,\n        userId: req.user!.id, // Always set userId from authenticated user\n      });\n      const newCase = await storage.createCase(validatedData);\n      res.json(newCase);\n    } catch (error) {\n      console.error(\"Create case error:\", error);\n      if (error instanceof Error && error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid case data\", details: error });\n      }\n      res.status(500).json({ error: \"Failed to create case\" });\n    }\n  });\n\n  app.put(\"/api/cases/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const existingCase = await storage.getCase(req.params.id);\n      if (!existingCase || existingCase.userId !== req.user!.id) {\n        return res.status(404).json({ error: \"Case not found\" });\n      }\n      // Validate and prevent userId modification\n      const { userId: _ignored, ...updateData } = req.body;\n      const validatedData = insertCaseSchema.partial().parse(updateData);\n      const updatedCase = await storage.updateCase(req.params.id, validatedData);\n      res.json(updatedCase);\n    } catch (error) {\n      console.error(\"Update case error:\", error);\n      if (error instanceof Error && error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid case data\", details: error });\n      }\n      res.status(500).json({ error: \"Failed to update case\" });\n    }\n  });\n\n  app.delete(\"/api/cases/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const existingCase = await storage.getCase(req.params.id);\n      if (!existingCase || existingCase.userId !== req.user!.id) {\n        return res.status(404).json({ error: \"Case not found\" });\n      }\n      await storage.deleteCase(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete case error:\", error);\n      res.status(500).json({ error: \"Failed to delete case\" });\n    }\n  });\n\n  // Document Management Routes\n  app.get(\"/api/documents\", isAuthenticated, async (req, res) => {\n    try {\n      const { caseId } = req.query;\n      \n      if (caseId) {\n        // Verify user owns the case before returning documents\n        const caseData = await storage.getCase(caseId as string);\n        if (!caseData || caseData.userId !== req.user!.id) {\n          return res.status(403).json({ error: \"Access denied\" });\n        }\n        const documents = await storage.getDocumentsByCase(caseId as string);\n        res.json(documents);\n      } else {\n        const documents = await storage.getDocumentsByUser(req.user!.id);\n        res.json(documents);\n      }\n    } catch (error) {\n      console.error(\"Get documents error:\", error);\n      res.status(500).json({ error: \"Failed to get documents\" });\n    }\n  });\n\n  app.post(\"/api/documents\", isAuthenticated, async (req, res) => {\n    try {\n      // If caseId provided, verify user owns the case\n      if (req.body.caseId) {\n        const caseData = await storage.getCase(req.body.caseId);\n        if (!caseData || caseData.userId !== req.user!.id) {\n          return res.status(403).json({ error: \"Access denied\" });\n        }\n      }\n      \n      // Validate and create document\n      const validatedData = insertDocumentSchema.parse({\n        ...req.body,\n        userId: req.user!.id,\n      });\n      const newDoc = await storage.createDocument(validatedData);\n      res.json(newDoc);\n    } catch (error) {\n      console.error(\"Create document error:\", error);\n      if (error instanceof Error && error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid document data\", details: error });\n      }\n      res.status(500).json({ error: \"Failed to create document\" });\n    }\n  });\n\n  app.delete(\"/api/documents/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const doc = await storage.getDocument(req.params.id);\n      if (!doc || doc.userId !== req.user!.id) {\n        return res.status(404).json({ error: \"Document not found\" });\n      }\n      await storage.deleteDocument(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete document error:\", error);\n      res.status(500).json({ error: \"Failed to delete document\" });\n    }\n  });\n\n  // Medical Records Routes\n  app.get(\"/api/medical-records/:caseId\", isAuthenticated, async (req, res) => {\n    try {\n      const caseData = await storage.getCase(req.params.caseId);\n      if (!caseData || caseData.userId !== req.user!.id) {\n        return res.status(404).json({ error: \"Case not found\" });\n      }\n      const records = await storage.getMedicalRecordsByCase(req.params.caseId);\n      res.json(records);\n    } catch (error) {\n      console.error(\"Get medical records error:\", error);\n      res.status(500).json({ error: \"Failed to get medical records\" });\n    }\n  });\n\n  app.post(\"/api/medical-records\", isAuthenticated, async (req, res) => {\n    try {\n      const caseData = await storage.getCase(req.body.caseId);\n      if (!caseData || caseData.userId !== req.user!.id) {\n        return res.status(403).json({ error: \"Access denied\" });\n      }\n      \n      // Validate and create medical record\n      const validatedData = insertMedicalRecordSchema.parse({\n        ...req.body,\n        userId: req.user!.id,\n      });\n      const newRecord = await storage.createMedicalRecord(validatedData);\n      res.json(newRecord);\n    } catch (error) {\n      console.error(\"Create medical record error:\", error);\n      if (error instanceof Error && error.name === \"ZodError\") {\n        return res.status(400).json({ error: \"Invalid medical record data\", details: error });\n      }\n      res.status(500).json({ error: \"Failed to create medical record\" });\n    }\n  });\n\n  app.delete(\"/api/medical-records/:id\", isAuthenticated, async (req, res) => {\n    try {\n      const record = await storage.getMedicalRecord(req.params.id);\n      if (!record || record.userId !== req.user!.id) {\n        return res.status(404).json({ error: \"Medical record not found\" });\n      }\n      await storage.deleteMedicalRecord(req.params.id);\n      res.json({ success: true });\n    } catch (error) {\n      console.error(\"Delete medical record error:\", error);\n      res.status(500).json({ error: \"Failed to delete medical record\" });\n    }\n  });\n\n  // Document Export Routes\n  app.post(\"/api/export-document\", isAuthenticated, async (req, res) => {\n    try {\n      const { format, content } = req.body;\n      \n      if (!format || !content) {\n        return res.status(400).json({ error: \"Format and content are required\" });\n      }\n\n      if (![\"pdf\", \"docx\", \"txt\"].includes(format)) {\n        return res.status(400).json({ error: \"Invalid format. Must be pdf, docx, or txt\" });\n      }\n\n      const exportContent: ExportContent = {\n        title: content.title || \"LawHelper Document\",\n        sections: content.sections || [{ content: JSON.stringify(content, null, 2) }],\n        metadata: {\n          author: req.user!.name,\n          subject: content.subject || \"Legal Document\",\n          keywords: content.keywords || [],\n        },\n      };\n\n      let fileBuffer: Buffer | string;\n      let mimeType: string;\n      let filename: string;\n\n      switch (format) {\n        case \"pdf\":\n          fileBuffer = await generatePDF(exportContent);\n          mimeType = \"application/pdf\";\n          filename = `${exportContent.title.replace(/\\s+/g, \"_\")}.pdf`;\n          break;\n        case \"docx\":\n          fileBuffer = await generateDOCX(exportContent);\n          mimeType = \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n          filename = `${exportContent.title.replace(/\\s+/g, \"_\")}.docx`;\n          break;\n        case \"txt\":\n          fileBuffer = generateTXT(exportContent);\n          mimeType = \"text/plain\";\n          filename = `${exportContent.title.replace(/\\s+/g, \"_\")}.txt`;\n          break;\n        default:\n          return res.status(400).json({ error: \"Invalid format\" });\n      }\n\n      res.setHeader(\"Content-Type\", mimeType);\n      res.setHeader(\"Content-Disposition\", `attachment; filename=\"${filename}\"`);\n      res.send(fileBuffer);\n    } catch (error) {\n      console.error(\"Document export error:\", error);\n      res.status(500).json({ error: \"Failed to export document\" });\n    }\n  });\n\n  // Medical Intelligence Suite Route\n  app.post(\"/api/medical-intelligence\", isAuthenticated, async (req, res) => {\n    try {\n      const { mode, payload } = req.body;\n      \n      if (!mode || !payload) {\n        return res.status(400).json({ error: \"Mode and payload are required\" });\n      }\n\n      if (![\"chronology\", \"bills\", \"summary\"].includes(mode)) {\n        return res.status(400).json({ error: \"Invalid mode. Must be chronology, bills, or summary\" });\n      }\n\n      const result = await runMedicalIntelligence(mode, payload);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Medical intelligence error:\", error);\n      res.status(500).json({ error: \"Failed to process medical intelligence request\" });\n    }\n  });\n\n  // Demand Letter Automation Route\n  app.post(\"/api/demand-letter\", isAuthenticated, async (req, res) => {\n    try {\n      const result = await generateDemandLetter(req.body);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Demand letter generation error:\", error);\n      res.status(500).json({ error: \"Failed to generate demand letter\" });\n    }\n  });\n\n  // Discovery Response Tools Route\n  app.post(\"/api/discovery-tools\", isAuthenticated, async (req, res) => {\n    try {\n      const { type, payload } = req.body;\n      \n      if (!type || !payload) {\n        return res.status(400).json({ error: \"Type and payload are required\" });\n      }\n\n      if (![\"interrogatories\", \"requests\", \"admissions\"].includes(type)) {\n        return res.status(400).json({ error: \"Invalid type. Must be interrogatories, requests, or admissions\" });\n      }\n\n      const result = await generateDiscoveryResponse(type, payload);\n      res.json(result);\n    } catch (error) {\n      console.error(\"Discovery response generation error:\", error);\n      res.status(500).json({ error: \"Failed to generate discovery response\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":26856},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/layout/sidebar-layout.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { cn } from \"@/lib/utils\";\nimport { Menu, X } from \"lucide-react\";\nimport { useState } from \"react\";\n\ninterface SidebarLayoutProps {\n  children: React.ReactNode;\n}\n\ninterface NavigationItem {\n  id: string;\n  label: string;\n  icon: string;\n  path: string;\n  testId: string;\n}\n\nconst navigationItems: NavigationItem[] = [\n  {\n    id: \"dashboard\",\n    label: \"Dashboard\",\n    icon: \"fas fa-tachometer-alt\",\n    path: \"/dashboard\",\n    testId: \"nav-dashboard\"\n  },\n  {\n    id: \"my-cases\",\n    label: \"My Cases\",\n    icon: \"fas fa-briefcase\",\n    path: \"/my-cases\",\n    testId: \"nav-my-cases\"\n  },\n  {\n    id: \"ai-search\",\n    label: \"AI Search\",\n    icon: \"fas fa-search\",\n    path: \"/ai-search/legal-research\",\n    testId: \"nav-ai-search\"\n  },\n  {\n    id: \"document-generation\",\n    label: \"Document Generation\",\n    icon: \"fas fa-file-alt\",\n    path: \"/document-generation/letters\",\n    testId: \"nav-document-generation\"\n  },\n  {\n    id: \"document-analyzer\",\n    label: \"Document Analyzer\",\n    icon: \"fas fa-chart-line\",\n    path: \"/document-analyzer\",\n    testId: \"nav-document-analyzer\"\n  },\n  {\n    id: \"medical-intelligence\",\n    label: \"Medical Intelligence\",\n    icon: \"fas fa-heartbeat\",\n    path: \"/medical-intelligence\",\n    testId: \"nav-medical-intelligence\"\n  },\n  {\n    id: \"demand-letter\",\n    label: \"Demand Letter\",\n    icon: \"fas fa-file-contract\",\n    path: \"/demand-letter\",\n    testId: \"nav-demand-letter\"\n  },\n  {\n    id: \"discovery-tools\",\n    label: \"Discovery Tools\",\n    icon: \"fas fa-balance-scale-right\",\n    path: \"/discovery-tools\",\n    testId: \"nav-discovery-tools\"\n  }\n];\n\nexport function SidebarLayout({ children }: SidebarLayoutProps) {\n  const { user, logoutMutation } = useAuth();\n  const [location, setLocation] = useLocation();\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  const getInitials = (name: string) => {\n    return name\n      .split(\" \")\n      .map((n) => n[0])\n      .join(\"\")\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  const handleLogout = () => {\n    logoutMutation.mutate();\n  };\n\n  const isActive = (path: string) => {\n    if (path === \"/dashboard\") {\n      return location === \"/dashboard\";\n    }\n    return location.startsWith(path);\n  };\n\n  const handleNavigate = (path: string) => {\n    setLocation(path);\n    setIsMobileMenuOpen(false); // Close mobile menu on navigation\n  };\n\n  // Sidebar content component for reuse\n  const SidebarContent = () => (\n    <>\n      {/* Sidebar Header */}\n      <div className=\"p-4 md:p-6 border-b border-border\">\n        <div className=\"flex items-center space-x-3\">\n          <i className=\"fas fa-balance-scale text-xl md:text-2xl text-primary\"></i>\n          <h1 className=\"text-lg md:text-xl font-semibold text-foreground\">LawHelper</h1>\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 p-3 md:p-4\">\n        <ul className=\"space-y-2\">\n          {navigationItems.map((item) => (\n            <li key={item.id}>\n              <button\n                onClick={() => handleNavigate(item.path)}\n                data-testid={item.testId}\n                className={cn(\n                  \"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors\",\n                  isActive(item.path)\n                    ? \"bg-primary text-primary-foreground\"\n                    : \"text-muted-foreground hover:text-foreground hover:bg-muted\"\n                )}\n              >\n                <i className={`${item.icon} text-lg`}></i>\n                <span className=\"font-medium\">{item.label}</span>\n              </button>\n            </li>\n          ))}\n        </ul>\n      </nav>\n\n      {/* User Profile & Logout */}\n      <div className=\"p-3 md:p-4 border-t border-border\">\n        <div className=\"flex items-center space-x-3 mb-3\">\n          <div className=\"w-8 h-8 bg-primary rounded-full flex items-center justify-center\">\n            <span className=\"text-primary-foreground text-sm font-medium\" data-testid=\"text-user-initials\">\n              {user?.name ? getInitials(user.name) : \"U\"}\n            </span>\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-foreground truncate\" data-testid=\"text-username\">\n              {user?.name || \"User\"}\n            </p>\n            <p className=\"text-xs text-muted-foreground truncate\">\n              {user?.email || \"user@example.com\"}\n            </p>\n          </div>\n        </div>\n        <Button \n          variant=\"outline\" \n          size=\"sm\"\n          onClick={handleLogout}\n          disabled={logoutMutation.isPending}\n          className=\"w-full\"\n          data-testid=\"button-logout\"\n        >\n          <i className=\"fas fa-sign-out-alt mr-2\"></i>\n          {logoutMutation.isPending ? \"Signing out...\" : \"Sign out\"}\n        </Button>\n      </div>\n    </>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background flex\">\n      {/* Desktop Sidebar - Hidden on mobile */}\n      <div className=\"hidden lg:flex w-64 bg-card border-r border-border flex-col\">\n        <SidebarContent />\n      </div>\n\n      {/* Mobile Sidebar Drawer */}\n      <Sheet open={isMobileMenuOpen} onOpenChange={setIsMobileMenuOpen}>\n        <SheetContent side=\"left\" className=\"w-64 p-0\">\n          <div className=\"h-full bg-card flex flex-col\">\n            <SidebarContent />\n          </div>\n        </SheetContent>\n      </Sheet>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Top Header */}\n        <header className=\"bg-card border-b border-border\">\n          <div className=\"px-3 md:px-6 py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                {/* Mobile Menu Button - Only visible on mobile */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"lg:hidden p-2\"\n                  onClick={() => setIsMobileMenuOpen(true)}\n                  data-testid=\"button-mobile-menu\"\n                >\n                  <Menu className=\"h-5 w-5\" />\n                  <span className=\"sr-only\">Open navigation menu</span>\n                </Button>\n                \n                <div>\n                  <h2 className=\"text-base md:text-lg font-semibold text-foreground\">\n                    {navigationItems.find(item => isActive(item.path))?.label || \"LawHelper\"}\n                  </h2>\n                  <p className=\"text-xs md:text-sm text-muted-foreground hidden sm:block\">\n                    AI-powered legal research platform\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-2 md:space-x-4\">\n                {/* User info on mobile - simplified */}\n                <div className=\"flex items-center space-x-2 lg:hidden\">\n                  <div className=\"w-6 h-6 md:w-8 md:h-8 bg-primary rounded-full flex items-center justify-center\">\n                    <span className=\"text-primary-foreground text-xs md:text-sm font-medium\">\n                      {user?.name ? getInitials(user.name) : \"U\"}\n                    </span>\n                  </div>\n                </div>\n                \n                {/* Notifications */}\n                <button \n                  className=\"text-muted-foreground hover:text-foreground p-2\" \n                  data-testid=\"button-notifications\"\n                >\n                  <i className=\"fas fa-bell text-base md:text-lg\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Page Content */}\n        <main className=\"flex-1 overflow-auto\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}","size_bytes":7984},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');\n@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: hsl(210, 20%, 98%);\n  --foreground: hsl(222, 47%, 11%);\n  --card: hsl(0, 0%, 100%);\n  --card-foreground: hsl(222, 47%, 11%);\n  --popover: hsl(0, 0%, 100%);\n  --popover-foreground: hsl(222, 47%, 11%);\n  --primary: hsl(221, 83%, 20%);\n  --primary-foreground: hsl(210, 40%, 98%);\n  --secondary: hsl(210, 40%, 96%);\n  --secondary-foreground: hsl(222, 47%, 11%);\n  --muted: hsl(210, 40%, 96%);\n  --muted-foreground: hsl(215, 16%, 47%);\n  --accent: hsl(210, 40%, 96%);\n  --accent-foreground: hsl(222, 47%, 11%);\n  --destructive: hsl(0, 84%, 60%);\n  --destructive-foreground: hsl(210, 40%, 98%);\n  --border: hsl(214, 32%, 91%);\n  --input: hsl(214, 32%, 91%);\n  --ring: hsl(221, 83%, 20%);\n  --chart-1: hsl(221, 83%, 20%);\n  --chart-2: hsl(159, 78%, 36%);\n  --chart-3: hsl(42, 93%, 56%);\n  --chart-4: hsl(147, 79%, 42%);\n  --chart-5: hsl(341, 75%, 51%);\n  --sidebar: hsl(0, 0%, 100%);\n  --sidebar-foreground: hsl(222, 47%, 11%);\n  --sidebar-primary: hsl(221, 83%, 20%);\n  --sidebar-primary-foreground: hsl(210, 40%, 98%);\n  --sidebar-accent: hsl(210, 40%, 96%);\n  --sidebar-accent-foreground: hsl(221, 83%, 20%);\n  --sidebar-border: hsl(214, 32%, 91%);\n  --sidebar-ring: hsl(221, 83%, 20%);\n  --font-sans: \"Inter\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 1px 2px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 1px 2px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 2px 4px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 4px 6px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 8px 10px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n}\n\n.dark {\n  --background: hsl(0, 0%, 0%);\n  --foreground: hsl(200, 7%, 91%);\n  --card: hsl(228, 10%, 10%);\n  --card-foreground: hsl(0, 0%, 85%);\n  --popover: hsl(0, 0%, 0%);\n  --popover-foreground: hsl(200, 7%, 91%);\n  --primary: hsl(203, 88%, 53%);\n  --primary-foreground: hsl(0, 0%, 100%);\n  --secondary: hsl(195, 15%, 95%);\n  --secondary-foreground: hsl(210, 25%, 8%);\n  --muted: hsl(0, 0%, 9%);\n  --muted-foreground: hsl(210, 3%, 46%);\n  --accent: hsl(206, 70%, 8%);\n  --accent-foreground: hsl(204, 88%, 53%);\n  --destructive: hsl(356, 91%, 54%);\n  --destructive-foreground: hsl(0, 0%, 100%);\n  --border: hsl(210, 5%, 15%);\n  --input: hsl(208, 28%, 18%);\n  --ring: hsl(221, 83%, 20%);\n  --chart-1: hsl(221, 83%, 20%);\n  --chart-2: hsl(159, 78%, 36%);\n  --chart-3: hsl(42, 93%, 56%);\n  --chart-4: hsl(147, 79%, 42%);\n  --chart-5: hsl(341, 75%, 51%);\n  --sidebar: hsl(228, 10%, 10%);\n  --sidebar-foreground: hsl(0, 0%, 85%);\n  --sidebar-primary: hsl(221, 83%, 20%);\n  --sidebar-primary-foreground: hsl(0, 0%, 100%);\n  --sidebar-accent: hsl(206, 70%, 8%);\n  --sidebar-accent-foreground: hsl(204, 88%, 53%);\n  --sidebar-border: hsl(206, 16%, 26%);\n  --sidebar-ring: hsl(221, 83%, 20%);\n  --font-sans: \"Inter\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 1px 2px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 1px 2px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 2px 4px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 4px 6px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00), 0px 8px 10px -1px hsl(221, 83%, 20% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(221, 83%, 20% / 0.00);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n","size_bytes":4547},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"server/storage.ts":{"content":"import { \n  type User, type InsertUser, \n  type SearchHistory, type InsertSearchHistory,\n  type Case, type InsertCase,\n  type SavedDocument, type InsertDocument,\n  type MedicalRecord, type InsertMedicalRecord,\n  users, searchHistory, cases, savedDocuments, medicalRecords\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport session from \"express-session\";\nimport createMemoryStore from \"memorystore\";\nimport { drizzle } from \"drizzle-orm/neon-http\";\nimport { neon } from \"@neondatabase/serverless\";\nimport { eq, desc, and, sql as dsql } from \"drizzle-orm\";\n\nconst MemoryStore = createMemoryStore(session);\n\nconst sql = neon(process.env.DATABASE_URL!);\nconst db = drizzle(sql);\n\nexport interface IStorage {\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  createSearchHistory(search: InsertSearchHistory): Promise<SearchHistory>;\n  getSearchHistoryByUserId(userId: string): Promise<SearchHistory[]>;\n  \n  // Case Management\n  getCasesByUser(userId: string): Promise<Case[]>;\n  getCase(id: string): Promise<Case | undefined>;\n  createCase(caseData: InsertCase): Promise<Case>;\n  updateCase(id: string, caseData: Partial<InsertCase>): Promise<Case>;\n  deleteCase(id: string): Promise<void>;\n  \n  // Document Management\n  getDocumentsByUser(userId: string): Promise<SavedDocument[]>;\n  getDocumentsByCase(caseId: string): Promise<SavedDocument[]>;\n  getDocument(id: string): Promise<SavedDocument | undefined>;\n  createDocument(docData: InsertDocument): Promise<SavedDocument>;\n  updateDocument(id: string, docData: Partial<InsertDocument>): Promise<SavedDocument>;\n  deleteDocument(id: string): Promise<void>;\n  \n  // Medical Records\n  getMedicalRecordsByCase(caseId: string): Promise<MedicalRecord[]>;\n  getMedicalRecord(id: string): Promise<MedicalRecord | undefined>;\n  createMedicalRecord(recordData: InsertMedicalRecord): Promise<MedicalRecord>;\n  updateMedicalRecord(id: string, recordData: Partial<InsertMedicalRecord>): Promise<MedicalRecord>;\n  deleteMedicalRecord(id: string): Promise<void>;\n  \n  sessionStore: session.Store;\n}\n\nexport class DatabaseStorage implements IStorage {\n  public sessionStore: session.Store;\n\n  constructor() {\n    this.sessionStore = new MemoryStore({\n      checkPeriod: 86400000, // 24 hours\n    });\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    console.log(`[DB] Getting user by ID: ${id}`);\n    const result = await db.select().from(users).where(eq(users.id, id)).limit(1);\n    const user = result[0];\n    console.log(`[DB] User found: ${user ? 'YES' : 'NO'}`);\n    return user;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    console.log(`[DB] Getting user by email: ${email}`);\n    const result = await db.select().from(users).where(eq(users.email, email)).limit(1);\n    const user = result[0];\n    console.log(`[DB] User found: ${user ? 'YES' : 'NO'}`);\n    return user;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    console.log(`[DB] Creating user with email: ${insertUser.email}`);\n    const result = await db.insert(users).values(insertUser).returning();\n    const user = result[0];\n    console.log(`[DB] User created with ID: ${user.id}`);\n    return user;\n  }\n\n  async createSearchHistory(insertSearch: InsertSearchHistory): Promise<SearchHistory> {\n    console.log(`[DB] Creating search history for user: ${insertSearch.userId}`);\n    const result = await db.insert(searchHistory).values(insertSearch).returning();\n    const search = result[0];\n    console.log(`[DB] Search history created with ID: ${search.id}`);\n    return search;\n  }\n\n  async getSearchHistoryByUserId(userId: string): Promise<SearchHistory[]> {\n    console.log(`[DB] Getting search history for user: ${userId}`);\n    const result = await db.select()\n      .from(searchHistory)\n      .where(eq(searchHistory.userId, userId))\n      .orderBy(desc(searchHistory.createdAt))\n      .limit(10);\n    console.log(`[DB] Found ${result.length} search history records`);\n    return result;\n  }\n\n  // Legacy method for backward compatibility\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    return this.getUserByEmail(username);\n  }\n\n  // Case Management Methods\n  async getCasesByUser(userId: string): Promise<Case[]> {\n    console.log(`[DB] Getting cases for user: ${userId}`);\n    const result = await db.select()\n      .from(cases)\n      .where(eq(cases.userId, userId))\n      .orderBy(desc(cases.createdAt));\n    console.log(`[DB] Found ${result.length} cases`);\n    return result;\n  }\n\n  async getCase(id: string): Promise<Case | undefined> {\n    console.log(`[DB] Getting case by ID: ${id}`);\n    const result = await db.select().from(cases).where(eq(cases.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createCase(caseData: InsertCase): Promise<Case> {\n    console.log(`[DB] Creating case: ${caseData.caseName}`);\n    const result = await db.insert(cases).values(caseData).returning();\n    const newCase = result[0];\n    console.log(`[DB] Case created with ID: ${newCase.id}`);\n    return newCase;\n  }\n\n  async updateCase(id: string, caseData: Partial<InsertCase>): Promise<Case> {\n    console.log(`[DB] Updating case: ${id}`);\n    const result = await db.update(cases)\n      .set({ ...caseData, updatedAt: new Date() })\n      .where(eq(cases.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteCase(id: string): Promise<void> {\n    console.log(`[DB] Deleting case: ${id}`);\n    await db.delete(cases).where(eq(cases.id, id));\n  }\n\n  // Document Management Methods\n  async getDocumentsByUser(userId: string): Promise<SavedDocument[]> {\n    console.log(`[DB] Getting documents for user: ${userId}`);\n    const result = await db.select()\n      .from(savedDocuments)\n      .where(eq(savedDocuments.userId, userId))\n      .orderBy(desc(savedDocuments.createdAt));\n    console.log(`[DB] Found ${result.length} documents`);\n    return result;\n  }\n\n  async getDocumentsByCase(caseId: string): Promise<SavedDocument[]> {\n    console.log(`[DB] Getting documents for case: ${caseId}`);\n    const result = await db.select()\n      .from(savedDocuments)\n      .where(eq(savedDocuments.caseId, caseId))\n      .orderBy(desc(savedDocuments.createdAt));\n    console.log(`[DB] Found ${result.length} documents for case`);\n    return result;\n  }\n\n  async getDocument(id: string): Promise<SavedDocument | undefined> {\n    console.log(`[DB] Getting document by ID: ${id}`);\n    const result = await db.select().from(savedDocuments).where(eq(savedDocuments.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createDocument(docData: InsertDocument): Promise<SavedDocument> {\n    console.log(`[DB] Creating document: ${docData.title}`);\n    const result = await db.insert(savedDocuments).values(docData).returning();\n    const newDoc = result[0];\n    console.log(`[DB] Document created with ID: ${newDoc.id}`);\n    return newDoc;\n  }\n\n  async updateDocument(id: string, docData: Partial<InsertDocument>): Promise<SavedDocument> {\n    console.log(`[DB] Updating document: ${id}`);\n    const result = await db.update(savedDocuments)\n      .set({ ...docData, updatedAt: new Date() })\n      .where(eq(savedDocuments.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteDocument(id: string): Promise<void> {\n    console.log(`[DB] Deleting document: ${id}`);\n    await db.delete(savedDocuments).where(eq(savedDocuments.id, id));\n  }\n\n  // Medical Records Methods\n  async getMedicalRecordsByCase(caseId: string): Promise<MedicalRecord[]> {\n    console.log(`[DB] Getting medical records for case: ${caseId}`);\n    const result = await db.select()\n      .from(medicalRecords)\n      .where(eq(medicalRecords.caseId, caseId))\n      .orderBy(desc(medicalRecords.serviceDate));\n    console.log(`[DB] Found ${result.length} medical records`);\n    return result;\n  }\n\n  async getMedicalRecord(id: string): Promise<MedicalRecord | undefined> {\n    console.log(`[DB] Getting medical record by ID: ${id}`);\n    const result = await db.select().from(medicalRecords).where(eq(medicalRecords.id, id)).limit(1);\n    return result[0];\n  }\n\n  async createMedicalRecord(recordData: InsertMedicalRecord): Promise<MedicalRecord> {\n    console.log(`[DB] Creating medical record for case: ${recordData.caseId}`);\n    const result = await db.insert(medicalRecords).values(recordData).returning();\n    const newRecord = result[0];\n    console.log(`[DB] Medical record created with ID: ${newRecord.id}`);\n    return newRecord;\n  }\n\n  async updateMedicalRecord(id: string, recordData: Partial<InsertMedicalRecord>): Promise<MedicalRecord> {\n    console.log(`[DB] Updating medical record: ${id}`);\n    const result = await db.update(medicalRecords)\n      .set({ ...recordData, updatedAt: new Date() })\n      .where(eq(medicalRecords.id, id))\n      .returning();\n    return result[0];\n  }\n\n  async deleteMedicalRecord(id: string): Promise<void> {\n    console.log(`[DB] Deleting medical record: ${id}`);\n    await db.delete(medicalRecords).where(eq(medicalRecords.id, id));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":9150},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/pages/landing-page.tsx":{"content":"import React, { useState, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { \n  Scale, \n  Search, \n  FileText, \n  TrendingUp, \n  Brain, \n  Shield, \n  Clock, \n  Users,\n  CheckCircle,\n  ArrowRight,\n  Star,\n  Zap,\n  BookOpen,\n  Target,\n  Sparkles,\n  Rocket,\n  Award,\n  Globe\n} from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nconst fadeInUp = {\n  initial: { opacity: 0, y: 60 },\n  animate: { opacity: 1, y: 0 },\n  transition: { duration: 0.6 }\n};\n\nconst staggerContainer = {\n  animate: {\n    transition: {\n      staggerChildren: 0.1\n    }\n  }\n};\n\nconst scaleIn = {\n  initial: { opacity: 0, scale: 0.8 },\n  animate: { opacity: 1, scale: 1 },\n  transition: { duration: 0.5 }\n};\n\nconst slideInLeft = {\n  initial: { opacity: 0, x: -60 },\n  animate: { opacity: 1, x: 0 },\n  transition: { duration: 0.6 }\n};\n\nconst slideInRight = {\n  initial: { opacity: 0, x: 60 },\n  animate: { opacity: 1, x: 0 },\n  transition: { duration: 0.6 }\n};\n\nconst FloatingCard = ({ children, delay = 0 }: { children: React.ReactNode; delay?: number }) => (\n  <motion.div\n    initial={{ opacity: 0, y: 20 }}\n    animate={{ opacity: 1, y: 0 }}\n    transition={{ duration: 0.6, delay }}\n    whileHover={{ y: -5, transition: { duration: 0.2 } }}\n  >\n    {children}\n  </motion.div>\n);\n\n// Typing Animation Hook\nconst useTypewriter = (text: string, speed: number = 100) => {\n  const [displayText, setDisplayText] = useState('');\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    if (currentIndex < text.length) {\n      const timeout = setTimeout(() => {\n        setDisplayText(prev => prev + text[currentIndex]);\n        setCurrentIndex(prev => prev + 1);\n      }, speed);\n\n      return () => clearTimeout(timeout);\n    }\n  }, [currentIndex, text, speed]);\n\n  return displayText;\n};\n\n// Floating Particles Component\nconst FloatingParticles = () => {\n  const particles = Array.from({ length: 6 }, (_, i) => i);\n  \n  return (\n    <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n      {particles.map((particle) => (\n        <motion.div\n          key={particle}\n          className=\"absolute w-2 h-2 bg-blue-400/30 rounded-full\"\n          initial={{\n            x: Math.random() * window.innerWidth,\n            y: Math.random() * window.innerHeight,\n          }}\n          animate={{\n            x: Math.random() * window.innerWidth,\n            y: Math.random() * window.innerHeight,\n          }}\n          transition={{\n            duration: Math.random() * 10 + 20,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n        />\n      ))}\n    </div>\n  );\n};\n\n// Animated Background Gradients\nconst AnimatedBackground = () => (\n  <div className=\"absolute inset-0 overflow-hidden\">\n    <motion.div\n      className=\"absolute -inset-10 opacity-30\"\n      animate={{\n        background: [\n          \"radial-gradient(600px circle at 0% 0%, rgba(59, 130, 246, 0.15), transparent 50%)\",\n          \"radial-gradient(600px circle at 100% 100%, rgba(99, 102, 241, 0.15), transparent 50%)\",\n          \"radial-gradient(600px circle at 50% 50%, rgba(139, 92, 246, 0.15), transparent 50%)\",\n          \"radial-gradient(600px circle at 0% 100%, rgba(59, 130, 246, 0.15), transparent 50%)\",\n        ],\n      }}\n      transition={{\n        duration: 8,\n        repeat: Infinity,\n        ease: \"linear\"\n      }}\n    />\n    <motion.div\n      className=\"absolute -inset-10 opacity-20\"\n      animate={{\n        background: [\n          \"radial-gradient(400px circle at 100% 0%, rgba(168, 85, 247, 0.1), transparent 50%)\",\n          \"radial-gradient(400px circle at 0% 50%, rgba(59, 130, 246, 0.1), transparent 50%)\",\n          \"radial-gradient(400px circle at 100% 50%, rgba(34, 197, 94, 0.1), transparent 50%)\",\n          \"radial-gradient(400px circle at 50% 100%, rgba(168, 85, 247, 0.1), transparent 50%)\",\n        ],\n      }}\n      transition={{\n        duration: 6,\n        repeat: Infinity,\n        ease: \"linear\"\n      }}\n    />\n  </div>\n);\n\nexport default function LandingPage() {\n  const heroText = useTypewriter(\"Revolutionize Legal Work with AI\", 80);\n  const [showSecondLine, setShowSecondLine] = useState(false);\n  \n  useEffect(() => {\n    const timer = setTimeout(() => setShowSecondLine(true), 2000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-indigo-950 relative overflow-hidden\">\n      <AnimatedBackground />\n      <FloatingParticles />\n      {/* Navigation */}\n      <motion.nav \n        className=\"fixed top-0 w-full bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 z-50\"\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.6 }}\n      >\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <motion.div \n              className=\"flex items-center space-x-2\"\n              whileHover={{ scale: 1.05 }}\n              transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n            >\n              <Scale className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n              <span className=\"text-xl font-bold text-slate-900 dark:text-white\">LawHelper</span>\n            </motion.div>\n            <div className=\"flex items-center space-x-4\">\n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Link href=\"/auth\">\n                  <Button variant=\"ghost\" data-testid=\"nav-login\">Sign In</Button>\n                </Link>\n              </motion.div>\n              <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n                <Link href=\"/auth\">\n                  <Button className=\"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700\" data-testid=\"nav-signup\">\n                    Get Started\n                  </Button>\n                </Link>\n              </motion.div>\n            </div>\n          </div>\n        </div>\n      </motion.nav>\n\n      {/* Hero Section */}\n      <section className=\"pt-32 pb-24 px-4 sm:px-6 lg:px-8 relative z-10\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\n            {/* Left Column - Content */}\n            <motion.div \n              className=\"space-y-8\"\n              initial={{ opacity: 0, x: -50 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ duration: 0.8 }}\n            >\n              {/* Animated Badge */}\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.6, delay: 0.2 }}\n              >\n                <Badge className=\"mb-4 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 dark:from-blue-900 dark:to-indigo-900 dark:text-blue-200 px-6 py-3 text-base\">\n                  <motion.div\n                    animate={{ rotate: 360 }}\n                    transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n                  >\n                    <Sparkles className=\"h-5 w-5 mr-3\" />\n                  </motion.div>\n                  AI-Powered Legal Innovation\n                </Badge>\n              </motion.div>\n              \n              {/* Animated Main Heading */}\n              <div className=\"space-y-4\">\n                <motion.h1 \n                  className=\"text-5xl md:text-6xl lg:text-7xl font-bold text-slate-900 dark:text-white leading-tight\"\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  transition={{ duration: 0.8, delay: 0.4 }}\n                >\n                  <span className=\"block\">{heroText}</span>\n                  <motion.span \n                    className=\"block bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent\"\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: showSecondLine ? 1 : 0, y: showSecondLine ? 0 : 20 }}\n                    transition={{ duration: 0.6 }}\n                  >\n                    Beyond Expectations\n                  </motion.span>\n                </motion.h1>\n                \n                {/* Animated cursor */}\n                <motion.span\n                  className=\"inline-block w-1 h-12 bg-blue-600 ml-2\"\n                  animate={{ opacity: [0, 1, 0] }}\n                  transition={{ duration: 1, repeat: Infinity, ease: \"easeInOut\" }}\n                />\n              </div>\n              \n              {/* Animated Description */}\n              <AnimatePresence>\n                {showSecondLine && (\n                  <motion.p \n                    className=\"text-xl md:text-2xl text-slate-600 dark:text-slate-300 leading-relaxed max-w-lg\"\n                    initial={{ opacity: 0, y: 30 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.8, delay: 0.3 }}\n                  >\n                    Experience the future of legal practice with cutting-edge AI that handles research, generates documents, and analyzes contracts at lightning speed.\n                  </motion.p>\n                )}\n              </AnimatePresence>\n              \n              {/* Enhanced CTA Buttons */}\n              <AnimatePresence>\n                {showSecondLine && (\n                  <motion.div \n                    className=\"flex flex-col sm:flex-row gap-4 pt-4\"\n                    initial={{ opacity: 0, y: 30 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.8, delay: 0.6 }}\n                  >\n                    <motion.div \n                      whileHover={{ scale: 1.05, boxShadow: \"0 20px 40px rgba(59, 130, 246, 0.3)\" }} \n                      whileTap={{ scale: 0.95 }}\n                    >\n                      <Link href=\"/auth\">\n                        <Button \n                          size=\"lg\" \n                          className=\"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 text-white px-10 py-5 text-lg rounded-2xl shadow-2xl border-0 relative overflow-hidden group\"\n                          data-testid=\"hero-get-started\"\n                        >\n                          <motion.div\n                            className=\"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent\"\n                            initial={{ x: '-100%' }}\n                            whileHover={{ x: '100%' }}\n                            transition={{ duration: 0.6 }}\n                          />\n                          <span className=\"relative flex items-center\">\n                            <Rocket className=\"mr-3 h-5 w-5\" />\n                            Launch Your AI Journey\n                            <ArrowRight className=\"ml-3 h-5 w-5 group-hover:translate-x-1 transition-transform\" />\n                          </span>\n                        </Button>\n                      </Link>\n                    </motion.div>\n                    \n                    <motion.div \n                      whileHover={{ scale: 1.05 }} \n                      whileTap={{ scale: 0.95 }}\n                    >\n                      <Button \n                        variant=\"outline\" \n                        size=\"lg\"\n                        className=\"border-2 border-gradient-to-r from-blue-300 to-purple-300 bg-white/10 backdrop-blur-sm px-10 py-5 text-lg rounded-2xl hover:bg-white/20 transition-all duration-300 group\"\n                        data-testid=\"hero-watch-demo\"\n                      >\n                        <motion.div\n                          animate={{ scale: [1, 1.2, 1] }}\n                          transition={{ duration: 2, repeat: Infinity }}\n                        >\n                          <Globe className=\"mr-3 h-5 w-5\" />\n                        </motion.div>\n                        Explore Demo\n                      </Button>\n                    </motion.div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n              \n              {/* Stats Pills */}\n              <AnimatePresence>\n                {showSecondLine && (\n                  <motion.div \n                    className=\"flex flex-wrap gap-4 pt-8\"\n                    initial={{ opacity: 0, y: 30 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 0.8, delay: 0.9 }}\n                  >\n                    {[\n                      { icon: Users, label: \"10K+ Lawyers\", color: \"from-green-400 to-emerald-500\" },\n                      { icon: Clock, label: \"95% Time Saved\", color: \"from-blue-400 to-cyan-500\" },\n                      { icon: Award, label: \"99.9% Accuracy\", color: \"from-purple-400 to-pink-500\" }\n                    ].map((stat, index) => (\n                      <motion.div\n                        key={stat.label}\n                        className={`flex items-center space-x-2 bg-gradient-to-r ${stat.color} text-white px-4 py-2 rounded-full text-sm font-medium shadow-lg`}\n                        whileHover={{ scale: 1.05, y: -2 }}\n                        transition={{ delay: index * 0.1 }}\n                      >\n                        <stat.icon className=\"h-4 w-4\" />\n                        <span>{stat.label}</span>\n                      </motion.div>\n                    ))}\n                  </motion.div>\n                )}\n              </AnimatePresence>\n            </motion.div>\n\n            {/* Right Column - Visual Elements */}\n            <motion.div \n              className=\"relative\"\n              initial={{ opacity: 0, x: 50 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ duration: 0.8, delay: 0.4 }}\n            >\n              {/* Floating Cards Animation */}\n              <div className=\"relative h-96 lg:h-[500px]\">\n                {/* Main Card */}\n                <motion.div\n                  className=\"absolute top-0 left-1/2 transform -translate-x-1/2 w-80 h-48 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl shadow-2xl\"\n                  animate={{ \n                    y: [0, -20, 0],\n                    rotateY: [0, 5, 0, -5, 0]\n                  }}\n                  transition={{ \n                    duration: 6, \n                    repeat: Infinity, \n                    ease: \"easeInOut\" \n                  }}\n                >\n                  <div className=\"p-6 text-white\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <Scale className=\"h-8 w-8\" />\n                      <span className=\"text-2xl font-bold\">LawHelper</span>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"h-2 bg-white/30 rounded-full\"></div>\n                      <div className=\"h-2 bg-white/20 rounded-full w-3/4\"></div>\n                      <div className=\"h-2 bg-white/20 rounded-full w-1/2\"></div>\n                    </div>\n                  </div>\n                </motion.div>\n\n                {/* Satellite Cards */}\n                {[\n                  { icon: Search, label: \"AI Search\", position: \"top-8 left-4\", delay: 0.2 },\n                  { icon: FileText, label: \"Documents\", position: \"top-8 right-4\", delay: 0.4 },\n                  { icon: TrendingUp, label: \"Analysis\", position: \"bottom-8 left-8\", delay: 0.6 },\n                  { icon: Brain, label: \"AI Insights\", position: \"bottom-8 right-8\", delay: 0.8 }\n                ].map((item, index) => (\n                  <motion.div\n                    key={item.label}\n                    className={`absolute ${item.position} w-24 h-24 bg-white dark:bg-slate-800 rounded-2xl shadow-xl flex flex-col items-center justify-center`}\n                    initial={{ opacity: 0, scale: 0 }}\n                    animate={{ opacity: 1, scale: 1 }}\n                    transition={{ delay: item.delay, duration: 0.5 }}\n                    whileHover={{ scale: 1.1, rotate: 5 }}\n                  >\n                    <item.icon className=\"h-6 w-6 text-blue-600 mb-1\" />\n                    <span className=\"text-xs font-medium text-center\">{item.label}</span>\n                  </motion.div>\n                ))}\n\n                {/* Orbiting Elements */}\n                <motion.div\n                  className=\"absolute top-1/2 left-1/2 w-96 h-96 border border-blue-200/30 rounded-full\"\n                  animate={{ rotate: 360 }}\n                  transition={{ duration: 20, repeat: Infinity, ease: \"linear\" }}\n                >\n                  <motion.div className=\"absolute top-0 left-1/2 w-3 h-3 bg-blue-400 rounded-full -translate-x-1/2 -translate-y-1/2\" />\n                  <motion.div className=\"absolute bottom-0 left-1/2 w-3 h-3 bg-purple-400 rounded-full -translate-x-1/2 translate-y-1/2\" />\n                  <motion.div className=\"absolute left-0 top-1/2 w-3 h-3 bg-indigo-400 rounded-full -translate-x-1/2 -translate-y-1/2\" />\n                  <motion.div className=\"absolute right-0 top-1/2 w-3 h-3 bg-cyan-400 rounded-full translate-x-1/2 -translate-y-1/2\" />\n                </motion.div>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* Features Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-white dark:bg-slate-800\">\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div \n            className=\"text-center mb-16\"\n            variants={fadeInUp}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <h2 className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4\">\n              Powerful Features for Legal Professionals\n            </h2>\n            <p className=\"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto\">\n              Everything you need to enhance your legal practice with cutting-edge AI technology\n            </p>\n          </motion.div>\n\n          <motion.div \n            className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\"\n            variants={staggerContainer}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <FloatingCard>\n              <Card className=\"h-full border-2 border-slate-200 dark:border-slate-700 hover:border-blue-300 dark:hover:border-blue-600 transition-colors duration-300\">\n                <CardContent className=\"p-8\">\n                  <div className=\"bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900 dark:to-indigo-900 w-16 h-16 rounded-2xl flex items-center justify-center mb-6\">\n                    <Search className=\"h-8 w-8 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  <h3 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-4\">AI Legal Search</h3>\n                  <p className=\"text-slate-600 dark:text-slate-300 mb-6 leading-relaxed\">\n                    Advanced AI-powered search across legal databases, case law, and statutes with intelligent filtering and relevance ranking.\n                  </p>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Quick Questions\n                    </div>\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Case Law Research\n                    </div>\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Statute Analysis\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </FloatingCard>\n\n            <FloatingCard delay={0.1}>\n              <Card className=\"h-full border-2 border-slate-200 dark:border-slate-700 hover:border-purple-300 dark:hover:border-purple-600 transition-colors duration-300\">\n                <CardContent className=\"p-8\">\n                  <div className=\"bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900 dark:to-pink-900 w-16 h-16 rounded-2xl flex items-center justify-center mb-6\">\n                    <FileText className=\"h-8 w-8 text-purple-600 dark:text-purple-400\" />\n                  </div>\n                  <h3 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-4\">Document Generation</h3>\n                  <p className=\"text-slate-600 dark:text-slate-300 mb-6 leading-relaxed\">\n                    Generate professional legal documents using AI with voice-to-text, template customization, and automated formatting.\n                  </p>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Legal Letters\n                    </div>\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Contracts & Agreements\n                    </div>\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Legal Applications\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </FloatingCard>\n\n            <FloatingCard delay={0.2}>\n              <Card className=\"h-full border-2 border-slate-200 dark:border-slate-700 hover:border-green-300 dark:hover:border-green-600 transition-colors duration-300\">\n                <CardContent className=\"p-8\">\n                  <div className=\"bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900 dark:to-emerald-900 w-16 h-16 rounded-2xl flex items-center justify-center mb-6\">\n                    <TrendingUp className=\"h-8 w-8 text-green-600 dark:text-green-400\" />\n                  </div>\n                  <h3 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-4\">Document Analysis</h3>\n                  <p className=\"text-slate-600 dark:text-slate-300 mb-6 leading-relaxed\">\n                    Comprehensive AI analysis of legal documents with risk assessment, quality scoring, and improvement suggestions.\n                  </p>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Risk Assessment\n                    </div>\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Quality Scoring\n                    </div>\n                    <div className=\"flex items-center text-sm text-slate-500 dark:text-slate-400\">\n                      <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\n                      Smart Improvements\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </FloatingCard>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Benefits Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\n            <motion.div\n              variants={slideInLeft}\n              initial=\"initial\"\n              whileInView=\"animate\"\n              viewport={{ once: true }}\n            >\n              <h2 className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-6\">\n                Why Choose LawHelper?\n              </h2>\n              <p className=\"text-xl text-slate-600 dark:text-slate-300 mb-8 leading-relaxed\">\n                Join thousands of legal professionals who trust LawHelper to streamline their practice and deliver exceptional results for their clients.\n              </p>\n              \n              <div className=\"space-y-6\">\n                <motion.div \n                  className=\"flex items-start space-x-4\"\n                  whileHover={{ x: 10 }}\n                  transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                >\n                  <div className=\"bg-blue-100 dark:bg-blue-900 w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0\">\n                    <Zap className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">10x Faster Research</h3>\n                    <p className=\"text-slate-600 dark:text-slate-300\">\n                      Cut research time from hours to minutes with our advanced AI algorithms that understand legal context and nuance.\n                    </p>\n                  </div>\n                </motion.div>\n\n                <motion.div \n                  className=\"flex items-start space-x-4\"\n                  whileHover={{ x: 10 }}\n                  transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                >\n                  <div className=\"bg-green-100 dark:bg-green-900 w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0\">\n                    <Shield className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Professional Quality</h3>\n                    <p className=\"text-slate-600 dark:text-slate-300\">\n                      All documents meet international USA professional standards with proper formatting and legal precision.\n                    </p>\n                  </div>\n                </motion.div>\n\n                <motion.div \n                  className=\"flex items-start space-x-4\"\n                  whileHover={{ x: 10 }}\n                  transition={{ type: \"spring\", stiffness: 400, damping: 10 }}\n                >\n                  <div className=\"bg-purple-100 dark:bg-purple-900 w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0\">\n                    <Target className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Precision & Accuracy</h3>\n                    <p className=\"text-slate-600 dark:text-slate-300\">\n                      Built on GPT-5 technology with specialized legal training for unmatched accuracy and reliability.\n                    </p>\n                  </div>\n                </motion.div>\n              </div>\n            </motion.div>\n\n            <motion.div\n              variants={slideInRight}\n              initial=\"initial\"\n              whileInView=\"animate\"\n              viewport={{ once: true }}\n              className=\"grid grid-cols-2 gap-6\"\n            >\n              <div className=\"space-y-6\">\n                <motion.div whileHover={{ scale: 1.05 }}>\n                  <Card className=\"p-6 bg-gradient-to-br from-blue-500 to-indigo-600 text-white\">\n                    <Clock className=\"h-8 w-8 mb-4\" />\n                    <div className=\"text-3xl font-bold mb-2\">95%</div>\n                    <div className=\"text-blue-100\">Time Saved</div>\n                  </Card>\n                </motion.div>\n                <motion.div whileHover={{ scale: 1.05 }}>\n                  <Card className=\"p-6 bg-gradient-to-br from-green-500 to-emerald-600 text-white\">\n                    <Users className=\"h-8 w-8 mb-4\" />\n                    <div className=\"text-3xl font-bold mb-2\">10K+</div>\n                    <div className=\"text-green-100\">Happy Lawyers</div>\n                  </Card>\n                </motion.div>\n              </div>\n              <div className=\"space-y-6 mt-12\">\n                <motion.div whileHover={{ scale: 1.05 }}>\n                  <Card className=\"p-6 bg-gradient-to-br from-purple-500 to-pink-600 text-white\">\n                    <Brain className=\"h-8 w-8 mb-4\" />\n                    <div className=\"text-3xl font-bold mb-2\">99.9%</div>\n                    <div className=\"text-purple-100\">Accuracy Rate</div>\n                  </Card>\n                </motion.div>\n                <motion.div whileHover={{ scale: 1.05 }}>\n                  <Card className=\"p-6 bg-gradient-to-br from-orange-500 to-red-600 text-white\">\n                    <BookOpen className=\"h-8 w-8 mb-4\" />\n                    <div className=\"text-3xl font-bold mb-2\">1M+</div>\n                    <div className=\"text-orange-100\">Documents</div>\n                  </Card>\n                </motion.div>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* CEO Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-indigo-600 via-purple-700 to-blue-800 relative overflow-hidden\">\n        {/* Animated Background Elements */}\n        <div className=\"absolute inset-0\">\n          <motion.div\n            className=\"absolute top-10 left-10 w-32 h-32 bg-white/10 rounded-full\"\n            animate={{ \n              scale: [1, 1.2, 1],\n              opacity: [0.3, 0.6, 0.3]\n            }}\n            transition={{ duration: 4, repeat: Infinity, ease: \"easeInOut\" }}\n          />\n          <motion.div\n            className=\"absolute bottom-10 right-10 w-24 h-24 bg-white/10 rounded-full\"\n            animate={{ \n              scale: [1, 1.3, 1],\n              opacity: [0.2, 0.5, 0.2]\n            }}\n            transition={{ duration: 3, repeat: Infinity, ease: \"easeInOut\", delay: 1 }}\n          />\n        </div>\n\n        <div className=\"max-w-6xl mx-auto relative z-10\">\n          <motion.div\n            variants={staggerContainer}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n            className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\"\n          >\n            {/* Left Column - CEO Image */}\n            <motion.div\n              variants={slideInLeft}\n              className=\"relative\"\n            >\n              <div className=\"relative\">\n                {/* Decorative background circle */}\n                <motion.div \n                  className=\"absolute -inset-8 bg-gradient-to-r from-white/20 to-white/10 rounded-full\"\n                  animate={{ rotate: 360 }}\n                  transition={{ duration: 20, repeat: Infinity, ease: \"linear\" }}\n                />\n                \n                {/* CEO Image */}\n                <motion.div\n                  whileHover={{ scale: 1.05 }}\n                  transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n                  className=\"relative z-10\"\n                >\n                  <img\n                    src=\"https://res.cloudinary.com/dsex1a9tu/image/upload/v1759074618/Screenshot_2025-09-28_at_8.44.45_PM_z6gaop.png\"\n                    alt=\"Jasmel Acosta - CEO and AI Entrepreneur\"\n                    className=\"w-80 h-80 lg:w-96 lg:h-96 object-cover rounded-3xl shadow-2xl border-4 border-white/20 mx-auto\"\n                  />\n                </motion.div>\n                \n                {/* Floating badges */}\n                <motion.div\n                  className=\"absolute -top-4 -right-4 bg-white text-blue-600 px-4 py-2 rounded-full shadow-lg font-semibold\"\n                  initial={{ opacity: 0, scale: 0 }}\n                  whileInView={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 0.5, type: \"spring\" }}\n                >\n                  CEO & Founder\n                </motion.div>\n                \n                <motion.div\n                  className=\"absolute -bottom-4 -left-4 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-2 rounded-full shadow-lg font-semibold\"\n                  initial={{ opacity: 0, scale: 0 }}\n                  whileInView={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: 0.7, type: \"spring\" }}\n                >\n                  AI Pioneer\n                </motion.div>\n              </div>\n            </motion.div>\n\n            {/* Right Column - CEO Content */}\n            <motion.div\n              variants={slideInRight}\n              className=\"text-white space-y-6\"\n            >\n              <motion.div variants={fadeInUp}>\n                <Badge className=\"mb-4 bg-white/20 text-white px-6 py-3 text-base border-white/30\">\n                  <Users className=\"h-5 w-5 mr-2\" />\n                  Leadership & Vision\n                </Badge>\n              </motion.div>\n\n              <motion.h2 \n                className=\"text-4xl md:text-5xl lg:text-6xl font-bold leading-tight\"\n                variants={fadeInUp}\n              >\n                Meet Our \n                <span className=\"block bg-gradient-to-r from-yellow-300 to-orange-400 bg-clip-text text-transparent\">\n                  Visionary Leader\n                </span>\n              </motion.h2>\n\n              <motion.div \n                className=\"space-y-4\"\n                variants={fadeInUp}\n              >\n                <h3 className=\"text-2xl md:text-3xl font-semibold text-yellow-300\">\n                  Jasmel Acosta\n                </h3>\n                <p className=\"text-lg md:text-xl text-blue-100 font-medium\">\n                  AI Expert & Serial Entrepreneur\n                </p>\n              </motion.div>\n\n              <motion.p \n                className=\"text-lg md:text-xl text-blue-100 leading-relaxed\"\n                variants={fadeInUp}\n              >\n                With over a decade of experience in artificial intelligence and legal technology, \n                Jasmel has dedicated his career to revolutionizing how legal professionals work. \n                His vision for LawHelper stems from a deep understanding of both AI capabilities \n                and the real-world challenges facing modern law practices.\n              </motion.p>\n\n              <motion.div \n                className=\"grid grid-cols-1 sm:grid-cols-3 gap-4 pt-4\"\n                variants={fadeInUp}\n              >\n                {[\n                  { number: \"10+\", label: \"Years in AI\", icon: Brain },\n                  { number: \"50K+\", label: \"Lawyers Helped\", icon: Users },\n                  { number: \"15+\", label: \"Awards Won\", icon: Award }\n                ].map((stat, index) => (\n                  <motion.div\n                    key={stat.label}\n                    className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 text-center border border-white/20\"\n                    whileHover={{ scale: 1.05, backgroundColor: \"rgba(255,255,255,0.15)\" }}\n                    transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n                  >\n                    <stat.icon className=\"h-8 w-8 text-yellow-300 mx-auto mb-2\" />\n                    <div className=\"text-2xl font-bold text-white\">{stat.number}</div>\n                    <div className=\"text-sm text-blue-200\">{stat.label}</div>\n                  </motion.div>\n                ))}\n              </motion.div>\n\n              <motion.blockquote \n                className=\"border-l-4 border-yellow-300 pl-6 italic text-lg text-blue-100\"\n                variants={fadeInUp}\n              >\n                \"Our mission is to democratize access to intelligent legal tools, empowering every lawyer \n                to deliver exceptional results while focusing on what truly matters - serving their clients.\"\n              </motion.blockquote>\n            </motion.div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Testimonials Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-800 dark:to-slate-900\">\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div \n            className=\"text-center mb-16\"\n            variants={staggerContainer}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <motion.div variants={fadeInUp}>\n              <Badge className=\"mb-4 bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 dark:from-blue-900 dark:to-purple-900 dark:text-blue-200 px-6 py-2\">\n                <Users className=\"h-4 w-4 mr-2\" />\n                Trusted by Legal Professionals\n              </Badge>\n            </motion.div>\n            <motion.h2 \n              className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4\"\n              variants={fadeInUp}\n            >\n              What Our <span className=\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">Clients Say</span>\n            </motion.h2>\n            <motion.p \n              className=\"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto\"\n              variants={fadeInUp}\n            >\n              Join thousands of legal professionals who have transformed their practice with LawHelper\n            </motion.p>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {[\n              {\n                name: \"Sarah Chen\",\n                role: \"Corporate Lawyer, Tech Innovations\",\n                avatar: \"ðŸ‘©â€ðŸ’¼\",\n                content: \"LawHelper has revolutionized how I conduct legal research. What used to take hours now takes minutes. The AI insights are incredibly accurate and comprehensive.\",\n                rating: 5\n              },\n              {\n                name: \"Michael Rodriguez\",\n                role: \"Criminal Defense Attorney\",\n                avatar: \"ðŸ‘¨â€ðŸ’»\",\n                content: \"The document generation feature is a game-changer. I can create professional contracts and legal documents in seconds with perfect formatting and accuracy.\",\n                rating: 5\n              },\n              {\n                name: \"Dr. Emily Watson\",\n                role: \"IP Law Specialist\",\n                avatar: \"ðŸ‘©â€âš–ï¸\",\n                content: \"The risk analysis capabilities have saved my clients millions in potential legal issues. LawHelper's AI truly understands complex legal scenarios.\",\n                rating: 5\n              }\n            ].map((testimonial, index) => (\n              <FloatingCard key={testimonial.name} delay={index * 0.2}>\n                <Card className=\"h-full bg-white dark:bg-slate-800 shadow-xl border-0 hover:shadow-2xl transition-all duration-300\">\n                  <CardContent className=\"p-8\">\n                    <div className=\"flex items-center mb-6\">\n                      <div className=\"text-4xl mr-4\">{testimonial.avatar}</div>\n                      <div>\n                        <h4 className=\"font-semibold text-slate-900 dark:text-white\">{testimonial.name}</h4>\n                        <p className=\"text-sm text-slate-600 dark:text-slate-400\">{testimonial.role}</p>\n                      </div>\n                    </div>\n                    <div className=\"flex mb-4\">\n                      {Array.from({ length: testimonial.rating }).map((_, i) => (\n                        <Star key={i} className=\"h-5 w-5 text-yellow-400 fill-current\" />\n                      ))}\n                    </div>\n                    <p className=\"text-slate-700 dark:text-slate-300 italic\">\"{testimonial.content}\"</p>\n                  </CardContent>\n                </Card>\n              </FloatingCard>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Pricing Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-white dark:bg-slate-900\">\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div \n            className=\"text-center mb-16\"\n            variants={staggerContainer}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <motion.div variants={fadeInUp}>\n              <Badge className=\"mb-4 bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 dark:from-green-900 dark:to-emerald-900 dark:text-green-200 px-6 py-2\">\n                <Target className=\"h-4 w-4 mr-2\" />\n                Simple Pricing\n              </Badge>\n            </motion.div>\n            <motion.h2 \n              className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4\"\n              variants={fadeInUp}\n            >\n              Choose Your <span className=\"bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent\">Plan</span>\n            </motion.h2>\n            <motion.p \n              className=\"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto\"\n              variants={fadeInUp}\n            >\n              Flexible pricing options designed for legal professionals of all sizes\n            </motion.p>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            {[\n              {\n                name: \"Starter\",\n                price: \"49\",\n                period: \"month\",\n                description: \"Perfect for solo practitioners\",\n                features: [\"100 AI Searches/month\", \"Basic Document Generation\", \"Email Support\", \"2GB Storage\"],\n                popular: false,\n                gradient: \"from-slate-600 to-slate-700\"\n              },\n              {\n                name: \"Professional\",\n                price: \"149\",\n                period: \"month\",\n                description: \"Ideal for small to medium firms\",\n                features: [\"Unlimited AI Searches\", \"Advanced Document Generation\", \"Priority Support\", \"50GB Storage\", \"Risk Analysis\", \"Team Collaboration\"],\n                popular: true,\n                gradient: \"from-blue-600 to-purple-600\"\n              },\n              {\n                name: \"Enterprise\",\n                price: \"299\",\n                period: \"month\",\n                description: \"For large law firms and departments\",\n                features: [\"Everything in Professional\", \"Custom AI Training\", \"24/7 Phone Support\", \"Unlimited Storage\", \"Advanced Analytics\", \"SSO Integration\", \"Custom Integrations\"],\n                popular: false,\n                gradient: \"from-purple-600 to-indigo-600\"\n              }\n            ].map((plan, index) => (\n              <FloatingCard key={plan.name} delay={index * 0.2}>\n                <Card className={`h-full relative overflow-hidden ${plan.popular ? 'ring-2 ring-blue-500 shadow-2xl scale-105' : 'shadow-xl'} bg-white dark:bg-slate-800 border-0 hover:shadow-2xl transition-all duration-300`}>\n                  {plan.popular && (\n                    <div className=\"absolute top-0 left-0 right-0\">\n                      <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white text-center py-2 text-sm font-medium\">\n                        Most Popular\n                      </div>\n                    </div>\n                  )}\n                  <CardContent className={`p-8 ${plan.popular ? 'pt-12' : ''}`}>\n                    <div className=\"text-center mb-8\">\n                      <h3 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2\">{plan.name}</h3>\n                      <p className=\"text-slate-600 dark:text-slate-400 mb-4\">{plan.description}</p>\n                      <div className=\"flex items-baseline justify-center\">\n                        <span className=\"text-5xl font-bold text-slate-900 dark:text-white\">${plan.price}</span>\n                        <span className=\"text-slate-600 dark:text-slate-400 ml-2\">/{plan.period}</span>\n                      </div>\n                    </div>\n                    \n                    <ul className=\"space-y-4 mb-8\">\n                      {plan.features.map((feature, featureIndex) => (\n                        <li key={featureIndex} className=\"flex items-center\">\n                          <CheckCircle className=\"h-5 w-5 text-green-500 mr-3 flex-shrink-0\" />\n                          <span className=\"text-slate-700 dark:text-slate-300\">{feature}</span>\n                        </li>\n                      ))}\n                    </ul>\n                    \n                    <motion.div whileHover={{ scale: 1.02 }} whileTap={{ scale: 0.98 }}>\n                      <Link href=\"/auth\">\n                        <Button \n                          className={`w-full py-3 text-lg rounded-xl ${plan.popular ? \n                            'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg' :\n                            'bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 text-white'\n                          } transition-all duration-300`}\n                          data-testid={`pricing-${plan.name.toLowerCase()}`}\n                        >\n                          Get Started\n                        </Button>\n                      </Link>\n                    </motion.div>\n                  </CardContent>\n                </Card>\n              </FloatingCard>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* FAQ Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-900 dark:to-slate-800\">\n        <div className=\"max-w-4xl mx-auto\">\n          <motion.div \n            className=\"text-center mb-16\"\n            variants={staggerContainer}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <motion.div variants={fadeInUp}>\n              <Badge className=\"mb-4 bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 dark:from-purple-900 dark:to-pink-900 dark:text-purple-200 px-6 py-2\">\n                <BookOpen className=\"h-4 w-4 mr-2\" />\n                Frequently Asked Questions\n              </Badge>\n            </motion.div>\n            <motion.h2 \n              className=\"text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4\"\n              variants={fadeInUp}\n            >\n              Got <span className=\"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent\">Questions?</span>\n            </motion.h2>\n            <motion.p \n              className=\"text-xl text-slate-600 dark:text-slate-300\"\n              variants={fadeInUp}\n            >\n              Here are answers to the most common questions about LawHelper\n            </motion.p>\n          </motion.div>\n\n          <div className=\"space-y-6\">\n            {[\n              {\n                question: \"How accurate is LawHelper's AI legal research?\",\n                answer: \"LawHelper's AI achieves 99.9% accuracy in legal research by leveraging advanced GPT models trained specifically on legal databases, case law, and statutes. Our AI is continuously updated with the latest legal precedents and regulations.\"\n              },\n              {\n                question: \"Is my client data secure and confidential?\",\n                answer: \"Absolutely. We employ enterprise-grade security with end-to-end encryption, SOC 2 compliance, and strict confidentiality protocols. All client data is protected by attorney-client privilege and never shared with third parties.\"\n              },\n              {\n                question: \"Can LawHelper integrate with my existing legal software?\",\n                answer: \"Yes! LawHelper integrates seamlessly with popular legal management software including Clio, LexisNexis, Westlaw, and many others. Our API allows for custom integrations tailored to your firm's workflow.\"\n              },\n              {\n                question: \"What types of legal documents can LawHelper generate?\",\n                answer: \"LawHelper can generate a wide range of documents including contracts, briefs, motions, letters, applications, legal memos, and more. All documents follow professional standards and can be customized to your specific needs.\"\n              },\n              {\n                question: \"Do I need technical expertise to use LawHelper?\",\n                answer: \"Not at all! LawHelper is designed with lawyers in mind, featuring an intuitive interface that requires no technical knowledge. Our onboarding process and support team ensure you're productive from day one.\"\n              },\n              {\n                question: \"What kind of support does LawHelper provide?\",\n                answer: \"We offer comprehensive support including email, chat, and phone support depending on your plan. Enterprise customers receive 24/7 priority support with dedicated account managers and training sessions.\"\n              }\n            ].map((faq, index) => (\n              <FloatingCard key={index} delay={index * 0.1}>\n                <Card className=\"bg-white dark:bg-slate-800 shadow-lg border-0 hover:shadow-xl transition-all duration-300\">\n                  <CardContent className=\"p-6\">\n                    <h3 className=\"text-lg font-semibold text-slate-900 dark:text-white mb-3\">{faq.question}</h3>\n                    <p className=\"text-slate-700 dark:text-slate-300 leading-relaxed\">{faq.answer}</p>\n                  </CardContent>\n                </Card>\n              </FloatingCard>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* CTA Section */}\n      <section className=\"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-r from-blue-600 to-indigo-600\">\n        <div className=\"max-w-4xl mx-auto text-center\">\n          <motion.div\n            variants={fadeInUp}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <h2 className=\"text-4xl md:text-5xl font-bold text-white mb-6\">\n              Ready to Transform Your Legal Practice?\n            </h2>\n            <p className=\"text-xl text-blue-100 mb-8 leading-relaxed\">\n              Join thousands of legal professionals who are already saving time and delivering better results with LawHelper.\n            </p>\n            <motion.div whileHover={{ scale: 1.05 }} whileTap={{ scale: 0.95 }}>\n              <Link href=\"/auth\">\n                <Button \n                  size=\"lg\"\n                  className=\"bg-white text-blue-600 hover:bg-blue-50 px-8 py-4 text-lg rounded-xl shadow-lg hover:shadow-xl transition-all duration-300\"\n                  data-testid=\"cta-get-started\"\n                >\n                  Start Your Free Trial Today\n                  <ArrowRight className=\"ml-2 h-5 w-5\" />\n                </Button>\n              </Link>\n            </motion.div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Footer */}\n      <footer className=\"bg-slate-900 dark:bg-slate-950 text-white py-16 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-7xl mx-auto\">\n          <motion.div \n            className=\"grid grid-cols-1 md:grid-cols-4 gap-8\"\n            variants={staggerContainer}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <motion.div variants={fadeInUp}>\n              <div className=\"flex items-center space-x-2 mb-6\">\n                <Scale className=\"h-8 w-8 text-blue-400\" />\n                <span className=\"text-xl font-bold\">LawHelper</span>\n              </div>\n              <p className=\"text-slate-400 leading-relaxed\">\n                Empowering legal professionals with AI-driven tools for research, document generation, and analysis.\n              </p>\n            </motion.div>\n            \n            <motion.div variants={fadeInUp}>\n              <h3 className=\"text-lg font-bold mb-6\">Product</h3>\n              <ul className=\"space-y-3 text-slate-400\">\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">AI Search</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Document Generation</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Document Analysis</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Pricing</a></li>\n              </ul>\n            </motion.div>\n            \n            <motion.div variants={fadeInUp}>\n              <h3 className=\"text-lg font-bold mb-6\">Resources</h3>\n              <ul className=\"space-y-3 text-slate-400\">\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Documentation</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">API Reference</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Support</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Blog</a></li>\n              </ul>\n            </motion.div>\n            \n            <motion.div variants={fadeInUp}>\n              <h3 className=\"text-lg font-bold mb-6\">Company</h3>\n              <ul className=\"space-y-3 text-slate-400\">\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">About</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Privacy</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Terms</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">Contact</a></li>\n              </ul>\n            </motion.div>\n          </motion.div>\n          \n          <motion.div \n            className=\"border-t border-slate-800 mt-12 pt-8 text-center text-slate-400\"\n            variants={fadeInUp}\n            initial=\"initial\"\n            whileInView=\"animate\"\n            viewport={{ once: true }}\n          >\n            <p>&copy; 2025 LawHelper. All rights reserved.</p>\n          </motion.div>\n        </div>\n      </footer>\n    </div>\n  );\n}","size_bytes":54862},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/pages/dashboard.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\n\nexport default function Dashboard() {\n  const { user } = useAuth();\n  const [, setLocation] = useLocation();\n\n  const { data: searchHistory } = useQuery({\n    queryKey: [\"/api/search-history\"],\n  });\n\n  const navigateToAISearch = (tab?: string) => {\n    if (tab) {\n      setLocation(`/ai-search/${tab}`);\n    } else {\n      setLocation(\"/ai-search\");\n    }\n  };\n\n  const getFirstName = (name: string) => {\n    return name.split(\" \")[0];\n  };\n\n  return (\n    <SidebarLayout>\n      <div className=\"p-6\">\n        {/* Welcome Section */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-foreground mb-2\">\n            Welcome back, {user?.name ? getFirstName(user.name) : \"User\"}!\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Ready to research legal cases and analyze documents with AI-powered tools.\n          </p>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"grid md:grid-cols-3 gap-6 mb-8\">\n          <Card className=\"cursor-pointer hover:shadow-md transition-shadow\" onClick={() => navigateToAISearch('legal-research')} data-testid=\"card-legal-research\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"fas fa-search text-blue-600 text-xl\"></i>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-foreground\">AI Legal Research</h3>\n                  <p className=\"text-sm text-muted-foreground\">Search case law, statutes & regulations</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"cursor-pointer hover:shadow-md transition-shadow\" onClick={() => navigateToAISearch('brief-summarizer')} data-testid=\"card-brief-summarizer\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"fas fa-file-text text-green-600 text-xl\"></i>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-foreground\">Brief Summarizer</h3>\n                  <p className=\"text-sm text-muted-foreground\">Upload & analyze legal documents</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"cursor-pointer hover:shadow-md transition-shadow\" onClick={() => navigateToAISearch('risk-analysis')} data-testid=\"card-risk-analysis\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"fas fa-chart-line text-red-600 text-xl\"></i>\n                </div>\n                <div>\n                  <h3 className=\"font-semibold text-foreground\">Risk Analysis</h3>\n                  <p className=\"text-sm text-muted-foreground\">Predict case success probability</p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Recent Activity */}\n        <Card>\n          <CardContent className=\"p-6\">\n            <h2 className=\"text-xl font-semibold text-foreground mb-4\">Recent Activity</h2>\n            {searchHistory && Array.isArray(searchHistory) && searchHistory.length > 0 ? (\n              <div className=\"space-y-4\">\n                {searchHistory.slice(0, 5).map((item: any, index: number) => (\n                  <div key={index} className=\"flex items-center justify-between p-3 border border-border rounded-lg\" data-testid={`activity-item-${index}`}>\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-8 h-8 bg-muted rounded-lg flex items-center justify-center\">\n                        <i className={`fas ${\n                          item.type === 'legal-research' ? 'fa-search' :\n                          item.type === 'brief-summarizer' ? 'fa-file-text' :\n                          'fa-chart-line'\n                        } text-muted-foreground`}></i>\n                      </div>\n                      <div>\n                        <p className=\"font-medium text-foreground\">{item.query}</p>\n                        <p className=\"text-sm text-muted-foreground capitalize\">\n                          {item.type.replace('-', ' ')} â€¢ {new Date(item.createdAt).toLocaleDateString()}\n                        </p>\n                      </div>\n                    </div>\n                    <Button variant=\"ghost\" size=\"sm\" data-testid={`button-view-${index}`}>\n                      <i className=\"fas fa-eye\"></i>\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <i className=\"fas fa-history text-4xl text-muted-foreground mb-4\"></i>\n                <h3 className=\"text-lg font-medium text-foreground mb-2\">No Recent Activity</h3>\n                <p className=\"text-muted-foreground mb-4\">Start using AI tools to see your recent searches and analyses here.</p>\n                <Button onClick={() => navigateToAISearch()} data-testid=\"button-start-search\">\n                  <i className=\"fas fa-search mr-2\"></i>\n                  Start AI Search\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Stats Cards */}\n        <div className=\"grid md:grid-cols-3 gap-6 mt-8\">\n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-2xl font-bold text-foreground mb-1\" data-testid=\"stat-searches\">\n                {Array.isArray(searchHistory) ? searchHistory.length : 0}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Total Searches</div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-2xl font-bold text-foreground mb-1\" data-testid=\"stat-documents\">\n                {Array.isArray(searchHistory) ? searchHistory.filter((item: any) => item.type === 'brief-summarizer').length : 0}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Documents Analyzed</div>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"text-2xl font-bold text-foreground mb-1\" data-testid=\"stat-risks\">\n                {Array.isArray(searchHistory) ? searchHistory.filter((item: any) => item.type === 'risk-analysis').length : 0}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">Risk Assessments</div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </SidebarLayout>\n  );\n}","size_bytes":7390},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"replit.md":{"content":"# LawHelper - AI-Powered Legal Research Platform\n\n## Overview\n\nLawHelper is a modern legal research platform that leverages artificial intelligence to provide legal professionals with comprehensive research tools. The application features AI-powered legal search, document analysis, risk assessment, and brief summarization capabilities. Built as a full-stack web application, it combines a React frontend with an Express backend, using PostgreSQL for data persistence and OpenAI's GPT models for legal analysis.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React with TypeScript for type safety and better developer experience\n- **UI Library**: Shadcn/ui components built on Radix UI primitives for accessible, customizable interface components\n- **Styling**: Tailwind CSS with custom design tokens and CSS variables for consistent theming\n- **State Management**: TanStack Query (React Query) for server state management and caching\n- **Routing**: Wouter for lightweight client-side routing\n- **Form Handling**: React Hook Form with Zod validation for type-safe form management\n- **Build Tool**: Vite for fast development and optimized production builds\n\n### Backend Architecture\n- **Framework**: Express.js with TypeScript for the REST API server\n- **Authentication**: Passport.js with local strategy using session-based authentication\n- **Session Management**: Express sessions with configurable storage (memory store for development)\n- **File Handling**: Multer middleware for document upload processing\n- **API Design**: RESTful endpoints with consistent error handling and logging middleware\n\n### Database and ORM\n- **Database**: PostgreSQL for reliable data persistence\n- **ORM**: Drizzle ORM for type-safe database operations and schema management\n- **Connection**: Neon serverless PostgreSQL adapter for scalable cloud database connectivity\n- **Schema**: User management and search history tracking with proper foreign key relationships\n- **Migrations**: Drizzle Kit for database schema migrations and version control\n\n### AI Integration\n- **Service**: OpenAI GPT-5 for legal research, document analysis, and risk assessment\n- **Functions**: Dedicated modules for legal database search, document summarization, and risk analysis\n- **Response Format**: Structured JSON responses for consistent data handling\n- **Search History**: Persistent storage of AI-generated results for user reference\n\n### Authentication and Security\n- **Strategy**: Session-based authentication with secure password hashing using Node.js crypto scrypt\n- **Password Security**: Salt-based hashing with timing-safe comparison to prevent timing attacks\n- **Session Security**: Configurable session settings with secure cookie handling\n- **Route Protection**: Middleware-based authentication guards for protected endpoints\n\n### Development and Build Process\n- **Development**: Hot module replacement with Vite for fast development iteration\n- **TypeScript**: Strict type checking across client, server, and shared code\n- **Code Organization**: Monorepo structure with shared schema definitions\n- **Path Aliases**: Configured import aliases for clean, maintainable code structure\n- **Error Handling**: Comprehensive error boundaries and API error handling\n\n## External Dependencies\n\n### Core Technologies\n- **Database**: Neon PostgreSQL serverless database for cloud-native data storage\n- **AI Service**: OpenAI API for GPT-5 language model integration\n- **Authentication**: Passport.js ecosystem for flexible authentication strategies\n\n### UI and Styling\n- **Component Library**: Radix UI primitives for accessible, unstyled components\n- **Styling Framework**: Tailwind CSS for utility-first styling approach\n- **Icons**: Lucide React for consistent iconography\n- **Fonts**: Google Fonts integration for typography\n\n### Development Tools\n- **Build System**: Vite with React plugin for optimized development and production builds\n- **Replit Integration**: Specialized Replit plugins for development environment enhancement\n- **Type Validation**: Zod for runtime type validation and schema definition\n- **Date Handling**: date-fns for robust date manipulation and formatting\n\n### Backend Services\n- **File Upload**: Multer for handling multipart form data and file uploads\n- **Session Storage**: Connect-pg-simple for PostgreSQL-backed session storage in production\n- **WebSocket**: ws library for Neon database WebSocket connections\n- **Security**: Built-in Node.js crypto module for secure password handling","size_bytes":4589},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/hooks/use-auth.tsx":{"content":"import { createContext, ReactNode, useContext } from \"react\";\nimport {\n  useQuery,\n  useMutation,\n  UseMutationResult,\n} from \"@tanstack/react-query\";\nimport { insertUserSchema, User as SelectUser, InsertUser } from \"@shared/schema\";\nimport { getQueryFn, apiRequest, queryClient } from \"../lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ntype AuthContextType = {\n  user: SelectUser | null;\n  isLoading: boolean;\n  error: Error | null;\n  loginMutation: UseMutationResult<SelectUser, Error, LoginData>;\n  logoutMutation: UseMutationResult<void, Error, void>;\n  registerMutation: UseMutationResult<SelectUser, Error, InsertUser>;\n};\n\ntype LoginData = { email: string; password: string };\n\nexport const AuthContext = createContext<AuthContextType | null>(null);\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const { toast } = useToast();\n  const {\n    data: user,\n    error,\n    isLoading,\n  } = useQuery<SelectUser | undefined, Error>({\n    queryKey: [\"/api/user\"],\n    queryFn: getQueryFn({ on401: \"returnNull\" }),\n  });\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: LoginData) => {\n      const res = await apiRequest(\"POST\", \"/api/login\", credentials);\n      return await res.json();\n    },\n    onSuccess: (user: SelectUser) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Login failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (credentials: InsertUser) => {\n      const res = await apiRequest(\"POST\", \"/api/register\", credentials);\n      return await res.json();\n    },\n    onSuccess: (user: SelectUser) => {\n      queryClient.setQueryData([\"/api/user\"], user);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Registration failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", \"/api/logout\");\n    },\n    onSuccess: () => {\n      queryClient.setQueryData([\"/api/user\"], null);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Logout failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user: user ?? null,\n        isLoading,\n        error,\n        loginMutation,\n        logoutMutation,\n        registerMutation,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":2826},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2066},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/pages/ai-search.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation, useParams } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useForm } from \"react-hook-form\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { FileUpload } from \"@/components/ui/file-upload\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\nimport { Search, FileText, TrendingUp, Scale, Globe, Info, MessageCircle } from \"lucide-react\";\n\ninterface LegalSearchForm {\n  query: string;\n}\n\ninterface RiskAnalysisForm {\n  caseType: string;\n  description: string;\n  jurisdiction: string;\n  caseValue: string;\n}\n\ninterface LawAgentForm {\n  question: string;\n}\n\ninterface WebSearchForm {\n  query: string;\n}\n\ninterface QuickQuestionForm {\n  question: string;\n}\n\ninterface ChatMessage {\n  id: string;\n  type: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\n// Tab metadata for comprehensive tool information\nconst tabsMetadata = {\n  'legal-research': {\n    id: 'legal-research',\n    title: 'AI Legal Research',\n    icon: Search,\n    shortDescription: 'Search legal databases',\n    description: 'Search through comprehensive U.S. legal databases including case law, statutes, regulations, and Supreme Court decisions.',\n    features: [\n      'Access to federal and state case law',\n      'Comprehensive statute and regulation search',\n      'Supreme Court decision database',\n      'Relevance scoring and citations',\n      'Advanced filtering options'\n    ],\n    useCases: [\n      'Finding relevant case precedents',\n      'Researching specific legal topics',\n      'Analyzing statutory requirements',\n      'Preparing legal briefs'\n    ]\n  },\n  'brief-summarizer': {\n    id: 'brief-summarizer',\n    title: 'Brief Summarizer',\n    icon: FileText,\n    shortDescription: 'AI document analysis',\n    description: 'Upload legal documents and get AI-powered summaries, key point extraction, and risk analysis.',\n    features: [\n      'PDF, DOC, and TXT file support',\n      'Key point extraction',\n      'Party identification',\n      'Financial terms analysis',\n      'Risk assessment'\n    ],\n    useCases: [\n      'Contract review and analysis',\n      'Legal brief summarization',\n      'Due diligence document review',\n      'Quick document understanding'\n    ]\n  },\n  'risk-analysis': {\n    id: 'risk-analysis',\n    title: 'Risk Analysis',\n    icon: TrendingUp,\n    shortDescription: 'Predict case outcomes',\n    description: 'Analyze your legal case and get AI-powered predictions on success probability, risk factors, and strategic recommendations.',\n    features: [\n      'Success probability calculation',\n      'Risk factor identification',\n      'Settlement range estimation',\n      'Strategic recommendations',\n      'Precedent analysis'\n    ],\n    useCases: [\n      'Case evaluation and strategy',\n      'Settlement negotiations',\n      'Litigation risk assessment',\n      'Client consultation preparation'\n    ]\n  },\n  'law-agent': {\n    id: 'law-agent',\n    title: 'Law Agent',\n    icon: Scale,\n    shortDescription: 'Legal Q&A assistant',\n    description: 'Ask any legal question and receive comprehensive answers with proper citations, references, and practical advice.',\n    features: [\n      'Comprehensive legal knowledge',\n      'Proper citations and references',\n      'Jurisdiction-specific guidance',\n      'Practical legal advice',\n      'Related concept suggestions'\n    ],\n    useCases: [\n      'Quick legal research',\n      'Understanding legal concepts',\n      'Getting jurisdictional guidance',\n      'Legal consultation support'\n    ]\n  },\n  'web-search': {\n    id: 'web-search',\n    title: 'Legal Web Search',\n    icon: Globe,\n    shortDescription: 'Current legal information',\n    description: 'Search the web for current legal information, news, updates, and trends with AI-powered summarization.',\n    features: [\n      'Real-time legal news search',\n      'Current legal developments',\n      'AI-generated summaries',\n      'Related query suggestions',\n      'Source credibility indicators'\n    ],\n    useCases: [\n      'Staying updated on legal changes',\n      'Finding recent court decisions',\n      'Researching legal trends',\n      'Current event legal analysis'\n    ]\n  },\n  'quick-question': {\n    id: 'quick-question',\n    title: 'Quick Question',\n    icon: MessageCircle,\n    shortDescription: 'Fast AI chat assistance',\n    description: 'Ask any legal question and get instant AI-powered answers in a conversational format, perfect for quick clarifications and general legal guidance.',\n    features: [\n      'Instant AI responses',\n      'Conversational chat interface',\n      'Message history tracking',\n      'Real-time typing indicators',\n      'Follow-up question support'\n    ],\n    useCases: [\n      'Quick legal clarifications',\n      'General legal guidance',\n      'Follow-up questions',\n      'Casual legal consultations'\n    ]\n  }\n};\n\nexport default function AISearch() {\n  const { tab } = useParams<{ tab?: string }>();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  // Redirect to default tab if no tab specified\n  useEffect(() => {\n    if (!tab) {\n      setLocation('/ai-search/legal-research');\n    }\n  }, [tab, setLocation]);\n  \n  const activeTab = tab || 'legal-research';\n\n  const [searchResults, setSearchResults] = useState<any>(null);\n  const [summaryResults, setSummaryResults] = useState<any>(null);\n  const [riskResults, setRiskResults] = useState<any>(null);\n  const [lawAgentResults, setLawAgentResults] = useState<any>(null);\n  const [webSearchResults, setWebSearchResults] = useState<any>(null);\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\n\n  const legalSearchForm = useForm<LegalSearchForm>({\n    defaultValues: { query: \"\" }\n  });\n\n  const riskAnalysisForm = useForm<RiskAnalysisForm>({\n    defaultValues: {\n      caseType: \"\",\n      description: \"\",\n      jurisdiction: \"\",\n      caseValue: \"\"\n    }\n  });\n\n  const lawAgentForm = useForm<LawAgentForm>({\n    defaultValues: { question: \"\" }\n  });\n\n  const webSearchForm = useForm<WebSearchForm>({\n    defaultValues: { query: \"\" }\n  });\n\n  const quickQuestionForm = useForm<QuickQuestionForm>({\n    defaultValues: { question: \"\" }\n  });\n\n  const legalSearchMutation = useMutation({\n    mutationFn: async (data: LegalSearchForm) => {\n      const res = await apiRequest(\"POST\", \"/api/legal-search\", data);\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setSearchResults(data);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Search failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const documentSummaryMutation = useMutation({\n    mutationFn: async (formData: FormData) => {\n      const res = await fetch(\"/api/summarize-document\", {\n        method: \"POST\",\n        body: formData,\n        credentials: \"include\",\n      });\n      if (!res.ok) {\n        throw new Error(\"Failed to summarize document\");\n      }\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setSummaryResults(data);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Summarization failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const riskAnalysisMutation = useMutation({\n    mutationFn: async (data: RiskAnalysisForm) => {\n      const res = await apiRequest(\"POST\", \"/api/analyze-risk\", data);\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setRiskResults(data);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Risk analysis failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const switchTab = (newTab: string) => {\n    setLocation(`/ai-search/${newTab}`);\n  };\n\n  const handleLegalSearch = (data: LegalSearchForm) => {\n    legalSearchMutation.mutate(data);\n  };\n\n  const handleFileUpload = (files: FileList | null) => {\n    if (!files || files.length === 0) return;\n    \n    const formData = new FormData();\n    formData.append('document', files[0]);\n    formData.append('summaryType', 'detailed');\n    \n    documentSummaryMutation.mutate(formData);\n  };\n\n  const handleRiskAnalysis = (data: RiskAnalysisForm) => {\n    riskAnalysisMutation.mutate(data);\n  };\n\n  const lawAgentMutation = useMutation({\n    mutationFn: async (data: LawAgentForm) => {\n      const res = await apiRequest(\"POST\", \"/api/law-agent\", data);\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setLawAgentResults(data);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Law agent query failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const webSearchMutation = useMutation({\n    mutationFn: async (data: WebSearchForm) => {\n      const res = await apiRequest(\"POST\", \"/api/web-search\", data);\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setWebSearchResults(data);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Web search failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const quickQuestionMutation = useMutation({\n    mutationFn: async (data: QuickQuestionForm) => {\n      const res = await apiRequest(\"POST\", \"/api/quick-question\", data);\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      // Add assistant response to chat\n      const assistantMessage: ChatMessage = {\n        id: Date.now().toString() + '_assistant',\n        type: 'assistant',\n        content: data.answer?.answer || data.answer || \"Sorry, I couldn't generate a response.\",\n        timestamp: new Date()\n      };\n      setChatMessages(prev => [...prev, assistantMessage]);\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Quick question failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleLawAgentQuestion = (data: LawAgentForm) => {\n    lawAgentMutation.mutate(data);\n  };\n\n  const handleWebSearch = (data: WebSearchForm) => {\n    webSearchMutation.mutate(data);\n  };\n\n  const handleQuickQuestion = (data: QuickQuestionForm) => {\n    // Add user message to chat\n    const userMessage: ChatMessage = {\n      id: Date.now().toString() + '_user',\n      type: 'user',\n      content: data.question,\n      timestamp: new Date()\n    };\n    setChatMessages(prev => [...prev, userMessage]);\n    \n    // Clear the form\n    quickQuestionForm.reset();\n    \n    // Send to API\n    quickQuestionMutation.mutate(data);\n  };\n\n  return (\n    <SidebarLayout>\n      <div className=\"p-3 md:p-6\">\n        {/* Enhanced Tab Navigation with Info Icons */}\n        <div className=\"mb-6\">\n          <div className=\"mb-4\">\n            <h1 className=\"text-2xl md:text-3xl font-bold text-foreground mb-2\" id=\"main-heading\">AI Legal Research Platform</h1>\n            <p className=\"text-muted-foreground text-sm md:text-base\" id=\"platform-description\">Choose your AI-powered legal tool</p>\n          </div>\n          \n          <TooltipProvider>\n            <div className=\"border border-border rounded-lg bg-background p-2\">\n              {/* Mobile: Dropdown-style navigation */}\n              <div className=\"block lg:hidden\">\n                <Label htmlFor=\"mobile-tab-select\" className=\"sr-only\">Select a legal research tool</Label>\n                <Select value={activeTab} onValueChange={(value) => switchTab(value)}>\n                  <SelectTrigger className=\"w-full\" id=\"mobile-tab-select\" aria-label=\"Legal research tool selection\">\n                    <SelectValue>\n                      <div className=\"flex items-center space-x-2\">\n                        {(() => {\n                          const tab = tabsMetadata[activeTab as keyof typeof tabsMetadata];\n                          const IconComponent = tab?.icon;\n                          return (\n                            <>\n                              {IconComponent && <IconComponent className=\"h-4 w-4\" />}\n                              <span>{tab?.title}</span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </SelectValue>\n                  </SelectTrigger>\n                  <SelectContent>\n                    {Object.values(tabsMetadata).map((tab) => {\n                      const IconComponent = tab.icon;\n                      return (\n                        <SelectItem key={tab.id} value={tab.id}>\n                          <div className=\"flex items-center space-x-2\">\n                            <IconComponent className=\"h-4 w-4\" />\n                            <div>\n                              <div className=\"font-medium\">{tab.title}</div>\n                              <div className=\"text-xs text-muted-foreground\">{tab.shortDescription}</div>\n                            </div>\n                          </div>\n                        </SelectItem>\n                      );\n                    })}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Desktop: Tab-style navigation */}\n              <div className=\"hidden lg:block\">\n                <nav className=\"flex flex-wrap gap-1\" role=\"tablist\" aria-label=\"Legal research tools\">\n                  {Object.values(tabsMetadata).map((tab) => {\n                    const IconComponent = tab.icon;\n                    const isActive = activeTab === tab.id;\n                    \n                    return (\n                      <div key={tab.id} className=\"flex items-center\">\n                        <button\n                          onClick={() => switchTab(tab.id)}\n                          className={`flex items-center space-x-2 px-4 py-3 rounded-md font-medium text-sm transition-all ${\n                            isActive\n                              ? 'bg-primary text-primary-foreground shadow-sm'\n                              : 'hover:bg-muted text-muted-foreground hover:text-foreground'\n                          }`}\n                          role=\"tab\"\n                          aria-selected={isActive}\n                          aria-controls={`tabpanel-${tab.id}`}\n                          id={`tab-${tab.id}`}\n                          data-testid={`tab-${tab.id}`}\n                        >\n                          <IconComponent className=\"h-4 w-4\" />\n                          <span className=\"hidden xl:inline\">{tab.title}</span>\n                          <span className=\"xl:hidden\">{tab.title.split(' ')[0]}</span>\n                        </button>\n                        \n                        <Dialog>\n                          <DialogTrigger asChild>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"sm\"\n                              className=\"h-8 w-8 p-0 ml-1 hover:bg-muted\"\n                              data-testid={`info-${tab.id}`}\n                            >\n                              <Info className=\"h-3 w-3\" />\n                              <span className=\"sr-only\">Info about {tab.title}</span>\n                            </Button>\n                          </DialogTrigger>\n                          <DialogContent className=\"max-w-md\">\n                            <DialogHeader>\n                              <DialogTitle className=\"flex items-center space-x-2\">\n                                <IconComponent className=\"h-5 w-5\" />\n                                <span>{tab.title}</span>\n                              </DialogTitle>\n                              <DialogDescription className=\"text-left\">\n                                {tab.description}\n                              </DialogDescription>\n                            </DialogHeader>\n                            <div className=\"space-y-4\">\n                              <div>\n                                <h4 className=\"font-medium text-sm mb-2\">Key Features:</h4>\n                                <ul className=\"space-y-1\">\n                                  {tab.features.map((feature, index) => (\n                                    <li key={index} className=\"text-sm text-muted-foreground flex items-start\">\n                                      <span className=\"mr-2 text-primary\">â€¢</span>\n                                      {feature}\n                                    </li>\n                                  ))}\n                                </ul>\n                              </div>\n                              <div>\n                                <h4 className=\"font-medium text-sm mb-2\">Common Use Cases:</h4>\n                                <ul className=\"space-y-1\">\n                                  {tab.useCases.map((useCase, index) => (\n                                    <li key={index} className=\"text-sm text-muted-foreground flex items-start\">\n                                      <span className=\"mr-2 text-primary\">â€¢</span>\n                                      {useCase}\n                                    </li>\n                                  ))}\n                                </ul>\n                              </div>\n                            </div>\n                          </DialogContent>\n                        </Dialog>\n                      </div>\n                    );\n                  })}\n                </nav>\n              </div>\n\n              {/* Mobile: Info button for selected tab */}\n              <div className=\"block lg:hidden mt-2\">\n                <Dialog>\n                  <DialogTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"w-full\"\n                      data-testid={`info-mobile-${activeTab}`}\n                    >\n                      <Info className=\"h-4 w-4 mr-2\" />\n                      Learn about {tabsMetadata[activeTab as keyof typeof tabsMetadata]?.title}\n                    </Button>\n                  </DialogTrigger>\n                  <DialogContent className=\"max-w-sm\">\n                    {(() => {\n                      const tab = tabsMetadata[activeTab as keyof typeof tabsMetadata];\n                      const IconComponent = tab?.icon;\n                      return tab ? (\n                        <>\n                          <DialogHeader>\n                            <DialogTitle className=\"flex items-center space-x-2\">\n                              {IconComponent && <IconComponent className=\"h-5 w-5\" />}\n                              <span>{tab.title}</span>\n                            </DialogTitle>\n                            <DialogDescription className=\"text-left\">\n                              {tab.description}\n                            </DialogDescription>\n                          </DialogHeader>\n                          <div className=\"space-y-4\">\n                            <div>\n                              <h4 className=\"font-medium text-sm mb-2\">Key Features:</h4>\n                              <ul className=\"space-y-1\">\n                                {tab.features.map((feature, index) => (\n                                  <li key={index} className=\"text-sm text-muted-foreground flex items-start\">\n                                    <span className=\"mr-2 text-primary\">â€¢</span>\n                                    {feature}\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                            <div>\n                              <h4 className=\"font-medium text-sm mb-2\">Common Use Cases:</h4>\n                              <ul className=\"space-y-1\">\n                                {tab.useCases.map((useCase, index) => (\n                                  <li key={index} className=\"text-sm text-muted-foreground flex items-start\">\n                                    <span className=\"mr-2 text-primary\">â€¢</span>\n                                    {useCase}\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          </div>\n                        </>\n                      ) : null;\n                    })()}\n                  </DialogContent>\n                </Dialog>\n              </div>\n            </div>\n          </TooltipProvider>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"space-y-4 md:space-y-6\">\n          {activeTab === 'legal-research' && (\n            <div \n              className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6\"\n              role=\"tabpanel\"\n              id=\"tabpanel-legal-research\"\n              aria-labelledby=\"tab-legal-research\"\n              tabIndex={0}\n            >\n              {/* Search Form */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle \n                    className=\"text-lg md:text-xl flex items-center space-x-2\"\n                    id=\"legal-research-form-heading\"\n                  >\n                    <Search className=\"h-5 w-5\" aria-hidden=\"true\" />\n                    <span>AI Legal Research</span>\n                  </CardTitle>\n                  <p className=\"text-muted-foreground text-sm md:text-base\">\n                    Search U.S. statutes, case law, and regulations using AI-powered analysis.\n                  </p>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  \n                  <Form {...legalSearchForm}>\n                    <form \n                      onSubmit={legalSearchForm.handleSubmit(handleLegalSearch)} \n                      className=\"space-y-4\"\n                      aria-labelledby=\"legal-research-form-heading\"\n                      role=\"search\"\n                    >\n                      <FormField\n                        control={legalSearchForm.control}\n                        name=\"query\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel htmlFor=\"legal-query-input\">Legal Query</FormLabel>\n                            <FormControl>\n                              <Textarea\n                                id=\"legal-query-input\"\n                                placeholder=\"Enter your legal research question (e.g., 'contract breach remedies in California')\"\n                                className=\"min-h-[100px]\"\n                                aria-describedby=\"legal-query-description\"\n                                data-testid=\"input-legal-query\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <p id=\"legal-query-description\" className=\"sr-only\">\n                              Enter your legal research question to search U.S. statutes, case law, and regulations\n                            </p>\n                            <FormMessage role=\"alert\" />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <Button \n                        type=\"submit\" \n                        className=\"w-full\"\n                        disabled={legalSearchMutation.isPending}\n                        data-testid=\"button-search\"\n                      >\n                        {legalSearchMutation.isPending ? (\n                          <>\n                            <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                            Searching...\n                          </>\n                        ) : (\n                          <>\n                            <i className=\"fas fa-search mr-2\"></i>\n                            Search Legal Database\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n\n              {/* Search Results */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle \n                    className=\"text-lg md:text-xl\"\n                    id=\"legal-search-results-heading\"\n                  >\n                    Search Results\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  {searchResults ? (\n                    <div \n                      className=\"space-y-4\" \n                      data-testid=\"search-results\"\n                      role=\"region\"\n                      aria-labelledby=\"legal-search-results-heading\"\n                      aria-live=\"polite\"\n                    >\n                      <div className=\"text-sm text-muted-foreground mb-4\">\n                        Found {searchResults.totalResults || 0} results in {searchResults.searchTime || \"0\"} seconds\n                      </div>\n                      {searchResults.results?.map((result: any, index: number) => (\n                        <div key={index} className=\"border border-border rounded-lg p-4\" data-testid={`result-${index}`}>\n                          <div className=\"flex justify-between items-start mb-2\">\n                            <h4 className=\"font-medium text-foreground\">{result.title}</h4>\n                            <span className=\"text-xs bg-primary/10 text-primary px-2 py-1 rounded\">\n                              {result.relevance}% match\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-primary mb-2\">{result.type} â€¢ {result.citation}</p>\n                          <p className=\"text-sm text-muted-foreground mb-3\">{result.summary}</p>\n                          {result.keyPoints && (\n                            <div className=\"mb-3\">\n                              <p className=\"text-xs font-medium text-foreground mb-1\">Key Points:</p>\n                              <ul className=\"text-xs text-muted-foreground space-y-1\">\n                                {result.keyPoints.map((point: string, i: number) => (\n                                  <li key={i} className=\"flex items-start\">\n                                    <span className=\"mr-2\">â€¢</span>\n                                    <span>{point}</span>\n                                  </li>\n                                ))}\n                              </ul>\n                            </div>\n                          )}\n                          {result.url && (\n                            <Button variant=\"link\" size=\"sm\" className=\"p-0 h-auto text-xs\">\n                              <i className=\"fas fa-external-link-alt mr-1\"></i>\n                              View Full Document\n                            </Button>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <i className=\"fas fa-search text-4xl text-muted-foreground mb-4\"></i>\n                      <p className=\"text-muted-foreground\">Enter a legal query to start searching</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === 'brief-summarizer' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6\">\n              {/* Upload Form */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl flex items-center space-x-2\">\n                    <FileText className=\"h-5 w-5\" />\n                    <span>Brief Summarizer</span>\n                  </CardTitle>\n                  <p className=\"text-muted-foreground text-sm md:text-base\">\n                    Upload legal documents for AI-powered analysis and summarization.\n                  </p>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  \n                  <div className=\"space-y-4\">\n                    <div>\n                      <Label>Upload Document</Label>\n                      <FileUpload\n                        onFileChange={handleFileUpload}\n                        accept=\".pdf,.doc,.docx,.txt\"\n                        data-testid=\"file-upload\"\n                      />\n                      <p className=\"text-xs text-muted-foreground mt-2\">\n                        Supported formats: PDF, DOC, DOCX, TXT (Max 50MB)\n                      </p>\n                    </div>\n\n                    <div className=\"text-center\">\n                      {documentSummaryMutation.isPending && (\n                        <div className=\"flex items-center justify-center space-x-2 text-muted-foreground\">\n                          <i className=\"fas fa-spinner fa-spin\"></i>\n                          <span>Analyzing document...</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Summary Results */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl\">Document Analysis</CardTitle>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  {summaryResults ? (\n                    <div className=\"space-y-4\" data-testid=\"summary-results\">\n                      <div className=\"border border-border rounded-lg p-4\">\n                        <h4 className=\"font-medium text-foreground mb-2\">Document Type</h4>\n                        <p className=\"text-sm text-muted-foreground\">{summaryResults.documentType}</p>\n                      </div>\n                      \n                      <div className=\"border border-border rounded-lg p-4\">\n                        <h4 className=\"font-medium text-foreground mb-2\">Summary</h4>\n                        <p className=\"text-sm text-muted-foreground\">{summaryResults.summary}</p>\n                      </div>\n                      \n                      {summaryResults.keyPoints && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">Key Points</h4>\n                          <ul className=\"text-sm text-muted-foreground space-y-1\">\n                            {summaryResults.keyPoints.map((point: string, index: number) => (\n                              <li key={index} className=\"flex items-start\">\n                                <span className=\"mr-2 text-primary\">â€¢</span>\n                                <span>{point}</span>\n                              </li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n                      \n                      {summaryResults.legalImplications && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">Legal Implications</h4>\n                          <div className=\"space-y-2\">\n                            {summaryResults.legalImplications.map((implication: any, index: number) => (\n                              <div key={index} className=\"flex items-start space-x-2\">\n                                <span className={`inline-block w-2 h-2 rounded-full mt-2 ${\n                                  implication.severity === 'high' ? 'bg-red-500' :\n                                  implication.severity === 'medium' ? 'bg-yellow-500' : 'bg-green-500'\n                                }`}></span>\n                                <div>\n                                  <p className=\"text-sm font-medium text-foreground capitalize\">{implication.type}</p>\n                                  <p className=\"text-sm text-muted-foreground\">{implication.message}</p>\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <i className=\"fas fa-file-text text-4xl text-muted-foreground mb-4\"></i>\n                      <p className=\"text-muted-foreground\">Upload a document to get started</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === 'risk-analysis' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6\">\n              {/* Analysis Form */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl flex items-center space-x-2\">\n                    <TrendingUp className=\"h-5 w-5\" />\n                    <span>Risk Analysis</span>\n                  </CardTitle>\n                  <p className=\"text-muted-foreground text-sm md:text-base\">\n                    Predict legal success chances based on case details and precedent data.\n                  </p>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  \n                  <Form {...riskAnalysisForm}>\n                    <form onSubmit={riskAnalysisForm.handleSubmit(handleRiskAnalysis)} className=\"space-y-4\">\n                      <FormField\n                        control={riskAnalysisForm.control}\n                        name=\"caseType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Case Type</FormLabel>\n                            <Select onValueChange={field.onChange} defaultValue={field.value}>\n                              <FormControl>\n                                <SelectTrigger data-testid=\"select-case-type\">\n                                  <SelectValue placeholder=\"Select case type\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"contract\">Contract Dispute</SelectItem>\n                                <SelectItem value=\"personal-injury\">Personal Injury</SelectItem>\n                                <SelectItem value=\"employment\">Employment Law</SelectItem>\n                                <SelectItem value=\"intellectual-property\">Intellectual Property</SelectItem>\n                                <SelectItem value=\"real-estate\">Real Estate</SelectItem>\n                                <SelectItem value=\"family\">Family Law</SelectItem>\n                                <SelectItem value=\"criminal\">Criminal Defense</SelectItem>\n                                <SelectItem value=\"other\">Other</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={riskAnalysisForm.control}\n                        name=\"description\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Case Description</FormLabel>\n                            <FormControl>\n                              <Textarea\n                                placeholder=\"Describe the key facts and legal issues of your case\"\n                                className=\"min-h-[120px]\"\n                                data-testid=\"input-case-description\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={riskAnalysisForm.control}\n                        name=\"jurisdiction\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Jurisdiction</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder=\"e.g., California, Federal, New York\"\n                                data-testid=\"input-jurisdiction\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <FormField\n                        control={riskAnalysisForm.control}\n                        name=\"caseValue\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Case Value (Optional)</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder=\"e.g., $50,000, $1M+\"\n                                data-testid=\"input-case-value\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <Button \n                        type=\"submit\" \n                        className=\"w-full\"\n                        disabled={riskAnalysisMutation.isPending}\n                        data-testid=\"button-analyze\"\n                      >\n                        {riskAnalysisMutation.isPending ? (\n                          <>\n                            <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                            Analyzing...\n                          </>\n                        ) : (\n                          <>\n                            <i className=\"fas fa-chart-line mr-2\"></i>\n                            Analyze Risk\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n\n              {/* Analysis Results */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl\">Risk Assessment</CardTitle>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  {riskResults ? (\n                    <div className=\"space-y-4\" data-testid=\"risk-results\">\n                      {/* Success Probability */}\n                      <div className=\"border border-border rounded-lg p-4\">\n                        <div className=\"flex justify-between items-center mb-2\">\n                          <h4 className=\"font-medium text-foreground\">Success Probability</h4>\n                          <span className=\"text-2xl font-bold text-primary\">{riskResults.successProbability}%</span>\n                        </div>\n                        <div className=\"w-full bg-muted rounded-full h-2\">\n                          <div \n                            className=\"bg-primary h-2 rounded-full\" \n                            style={{ width: `${riskResults.successProbability}%` }}\n                          ></div>\n                        </div>\n                        <p className=\"text-xs text-muted-foreground mt-1\">\n                          Confidence: {riskResults.confidenceLevel}%\n                        </p>\n                      </div>\n\n                      {/* Risk Factors */}\n                      {riskResults.riskFactors && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">Risk Factors</h4>\n                          <div className=\"space-y-2\">\n                            {riskResults.riskFactors.map((factor: any, index: number) => (\n                              <div key={index} className=\"flex items-start space-x-2\">\n                                <span className={`inline-block w-2 h-2 rounded-full mt-2 ${\n                                  factor.severity === 'high' ? 'bg-red-500' :\n                                  factor.severity === 'medium' ? 'bg-yellow-500' : 'bg-green-500'\n                                }`}></span>\n                                <div>\n                                  <p className=\"text-sm font-medium text-foreground\">{factor.factor}</p>\n                                  <p className=\"text-sm text-muted-foreground\">{factor.impact}</p>\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Recommendations */}\n                      {riskResults.recommendations && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">Recommendations</h4>\n                          <div className=\"space-y-3\">\n                            {riskResults.recommendations.immediate && (\n                              <div>\n                                <p className=\"text-sm font-medium text-foreground mb-1\">Immediate Actions:</p>\n                                <ul className=\"text-sm text-muted-foreground space-y-1\">\n                                  {riskResults.recommendations.immediate.map((action: string, index: number) => (\n                                    <li key={index} className=\"flex items-start\">\n                                      <span className=\"mr-2 text-primary\">â€¢</span>\n                                      <span>{action}</span>\n                                    </li>\n                                  ))}\n                                </ul>\n                              </div>\n                            )}\n                            {riskResults.recommendations.longterm && (\n                              <div>\n                                <p className=\"text-sm font-medium text-foreground mb-1\">Long-term Strategy:</p>\n                                <ul className=\"text-sm text-muted-foreground space-y-1\">\n                                  {riskResults.recommendations.longterm.map((strategy: string, index: number) => (\n                                    <li key={index} className=\"flex items-start\">\n                                      <span className=\"mr-2 text-primary\">â€¢</span>\n                                      <span>{strategy}</span>\n                                    </li>\n                                  ))}\n                                </ul>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      )}\n\n                      {/* Settlement Range */}\n                      {riskResults.settlementRange && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">Settlement Estimate</h4>\n                          <div className=\"grid grid-cols-3 gap-2 text-center\">\n                            <div>\n                              <p className=\"text-xs text-muted-foreground\">Low</p>\n                              <p className=\"font-medium\">{riskResults.settlementRange.low}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-muted-foreground\">Recommended</p>\n                              <p className=\"font-medium text-primary\">{riskResults.settlementRange.recommended}</p>\n                            </div>\n                            <div>\n                              <p className=\"text-xs text-muted-foreground\">High</p>\n                              <p className=\"font-medium\">{riskResults.settlementRange.high}</p>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <i className=\"fas fa-chart-line text-4xl text-muted-foreground mb-4\"></i>\n                      <p className=\"text-muted-foreground\">Enter case details to get risk analysis</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === 'law-agent' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6\">\n              {/* Law Agent Form */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl flex items-center space-x-2\">\n                    <Scale className=\"h-5 w-5\" />\n                    <span>Law Agent</span>\n                  </CardTitle>\n                  <p className=\"text-muted-foreground text-sm md:text-base\">\n                    Ask any legal question and get comprehensive answers with references and citations.\n                  </p>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  \n                  <Form {...lawAgentForm}>\n                    <form onSubmit={lawAgentForm.handleSubmit(handleLawAgentQuestion)} className=\"space-y-4\">\n                      <FormField\n                        control={lawAgentForm.control}\n                        name=\"question\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Legal Question</FormLabel>\n                            <FormControl>\n                              <Textarea\n                                placeholder=\"Ask any legal question (e.g., 'What are the requirements for a valid contract in New York?')\"\n                                className=\"min-h-[120px]\"\n                                data-testid=\"input-law-question\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <Button \n                        type=\"submit\" \n                        className=\"w-full\"\n                        disabled={lawAgentMutation.isPending}\n                        data-testid=\"button-ask-law-agent\"\n                      >\n                        {lawAgentMutation.isPending ? (\n                          <>\n                            <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                            Analyzing...\n                          </>\n                        ) : (\n                          <>\n                            <i className=\"fas fa-gavel mr-2\"></i>\n                            Ask Law Agent\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n\n              {/* Law Agent Results */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl\">Legal Answer</CardTitle>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  {lawAgentResults ? (\n                    <div className=\"space-y-4\" data-testid=\"law-agent-results\">\n                      <div className=\"border border-border rounded-lg p-4\">\n                        <h4 className=\"font-medium text-foreground mb-2\">Answer</h4>\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">{lawAgentResults.answer}</p>\n                      </div>\n                      \n                      {lawAgentResults.references && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">References & Citations</h4>\n                          <div className=\"space-y-2\">\n                            {lawAgentResults.references.map((ref: any, index: number) => (\n                              <div key={index} className=\"border-l-2 border-primary pl-3\">\n                                <p className=\"text-sm font-medium text-foreground\">{ref.title}</p>\n                                <p className=\"text-xs text-primary\">{ref.citation}</p>\n                                <p className=\"text-xs text-muted-foreground mt-1\">{ref.summary}</p>\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      )}\n                      \n                      {lawAgentResults.keyPoints && (\n                        <div className=\"border border-border rounded-lg p-4\">\n                          <h4 className=\"font-medium text-foreground mb-2\">Key Legal Points</h4>\n                          <ul className=\"text-sm text-muted-foreground space-y-1\">\n                            {lawAgentResults.keyPoints.map((point: string, index: number) => (\n                              <li key={index} className=\"flex items-start\">\n                                <span className=\"mr-2 text-primary\">â€¢</span>\n                                <span>{point}</span>\n                              </li>\n                            ))}\n                          </ul>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <i className=\"fas fa-gavel text-4xl text-muted-foreground mb-4\"></i>\n                      <p className=\"text-muted-foreground\">Ask a legal question to get started</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === 'web-search' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6\">\n              {/* Web Search Form */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl flex items-center space-x-2\">\n                    <Globe className=\"h-5 w-5\" />\n                    <span>Legal Web Search</span>\n                  </CardTitle>\n                  <p className=\"text-muted-foreground text-sm md:text-base\">\n                    Search the web for legal information, cases, and current legal news.\n                  </p>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  \n                  <Form {...webSearchForm}>\n                    <form onSubmit={webSearchForm.handleSubmit(handleWebSearch)} className=\"space-y-4\">\n                      <FormField\n                        control={webSearchForm.control}\n                        name=\"query\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Search Query</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder=\"Enter your legal search query (e.g., 'latest employment law changes 2024')\"\n                                data-testid=\"input-web-search\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <Button \n                        type=\"submit\" \n                        className=\"w-full\"\n                        disabled={webSearchMutation.isPending}\n                        data-testid=\"button-web-search\"\n                      >\n                        {webSearchMutation.isPending ? (\n                          <>\n                            <i className=\"fas fa-spinner fa-spin mr-2\"></i>\n                            Searching...\n                          </>\n                        ) : (\n                          <>\n                            <i className=\"fas fa-globe mr-2\"></i>\n                            Search Web\n                          </>\n                        )}\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n\n              {/* Web Search Results */}\n              <Card>\n                <CardHeader className=\"pb-4\">\n                  <CardTitle className=\"text-lg md:text-xl\">Search Results</CardTitle>\n                </CardHeader>\n                <CardContent className=\"pt-0\">\n                  {webSearchResults ? (\n                    <div className=\"space-y-4\" data-testid=\"web-search-results\">\n                      <div className=\"text-sm text-muted-foreground mb-4\">\n                        Found {webSearchResults.totalResults || 0} results\n                      </div>\n                      {webSearchResults.results?.map((result: any, index: number) => (\n                        <div key={index} className=\"border border-border rounded-lg p-4\" data-testid={`web-result-${index}`}>\n                          <div className=\"flex justify-between items-start mb-2\">\n                            <h4 className=\"font-medium text-foreground hover:text-primary\">\n                              <a href={result.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                                {result.title}\n                              </a>\n                            </h4>\n                            <span className=\"text-xs bg-muted text-muted-foreground px-2 py-1 rounded\">\n                              {result.domain}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-muted-foreground mb-3\">{result.snippet}</p>\n                          {result.date && (\n                            <p className=\"text-xs text-muted-foreground\">Published: {result.date}</p>\n                          )}\n                        </div>\n                      ))}\n                      \n                      {webSearchResults.summary && (\n                        <div className=\"border border-primary rounded-lg p-4 bg-primary/5\">\n                          <h4 className=\"font-medium text-foreground mb-2\">AI Summary</h4>\n                          <p className=\"text-sm text-muted-foreground leading-relaxed\">{webSearchResults.summary}</p>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-8\">\n                      <i className=\"fas fa-globe text-4xl text-muted-foreground mb-4\"></i>\n                      <p className=\"text-muted-foreground\">Enter a search query to find legal information</p>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === 'quick-question' && (\n            <div \n              className=\"h-[600px] flex flex-col\"\n              role=\"tabpanel\"\n              id=\"tabpanel-quick-question\"\n              aria-labelledby=\"tab-quick-question\"\n              tabIndex={0}\n            >\n              {/* Chat Interface */}\n              <Card className=\"flex-1 flex flex-col\">\n                <CardHeader className=\"pb-4\">\n                  <CardTitle \n                    className=\"text-lg md:text-xl flex items-center space-x-2\"\n                    id=\"quick-question-heading\"\n                  >\n                    <MessageCircle className=\"h-5 w-5\" aria-hidden=\"true\" />\n                    <span>Quick Question</span>\n                  </CardTitle>\n                  <p className=\"text-muted-foreground text-sm md:text-base\">\n                    Ask any legal question and get instant AI answers in a conversational format.\n                  </p>\n                </CardHeader>\n                \n                <CardContent className=\"flex-1 flex flex-col pt-0\">\n                  {/* Chat Messages */}\n                  <div \n                    className=\"flex-1 overflow-y-auto space-y-4 mb-4 p-4 border border-border rounded-lg bg-muted/20 min-h-[300px]\"\n                    role=\"log\"\n                    aria-labelledby=\"quick-question-heading\"\n                    aria-live=\"polite\"\n                    data-testid=\"chat-messages\"\n                  >\n                    {chatMessages.length === 0 ? (\n                      <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                        <MessageCircle className=\"h-12 w-12 text-muted-foreground mb-4\" />\n                        <h3 className=\"text-lg font-medium text-foreground mb-2\">Start a conversation</h3>\n                        <p className=\"text-muted-foreground max-w-md\">\n                          Ask any legal question to get started. I'm here to provide quick answers and guidance.\n                        </p>\n                      </div>\n                    ) : (\n                      <>\n                        {chatMessages.map((message) => (\n                          <div\n                            key={message.id}\n                            className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n                            data-testid={`message-${message.type}-${message.id}`}\n                          >\n                            <div\n                              className={`max-w-[80%] p-3 rounded-lg ${\n                                message.type === 'user'\n                                  ? 'bg-primary text-primary-foreground ml-4'\n                                  : 'bg-background border border-border mr-4'\n                              }`}\n                            >\n                              <p className=\"text-sm leading-relaxed\">{message.content}</p>\n                              <p className=\"text-xs opacity-70 mt-2\">\n                                {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n                              </p>\n                            </div>\n                          </div>\n                        ))}\n                        \n                        {/* Loading indicator */}\n                        {quickQuestionMutation.isPending && (\n                          <div className=\"flex justify-start\">\n                            <div className=\"bg-background border border-border mr-4 p-3 rounded-lg\">\n                              <div className=\"flex items-center space-x-2\">\n                                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-primary\"></div>\n                                <span className=\"text-sm text-muted-foreground\">Thinking...</span>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                  \n                  {/* Chat Input */}\n                  <Form {...quickQuestionForm}>\n                    <form \n                      onSubmit={quickQuestionForm.handleSubmit(handleQuickQuestion)}\n                      className=\"flex gap-2\"\n                      aria-labelledby=\"quick-question-heading\"\n                    >\n                      <FormField\n                        control={quickQuestionForm.control}\n                        name=\"question\"\n                        render={({ field }) => (\n                          <FormItem className=\"flex-1\">\n                            <FormControl>\n                              <Input\n                                placeholder=\"Ask a legal question...\"\n                                className=\"w-full\"\n                                disabled={quickQuestionMutation.isPending}\n                                data-testid=\"input-quick-question\"\n                                {...field}\n                                onKeyDown={(e) => {\n                                  if (e.key === 'Enter' && !e.shiftKey) {\n                                    e.preventDefault();\n                                    quickQuestionForm.handleSubmit(handleQuickQuestion)();\n                                  }\n                                }}\n                              />\n                            </FormControl>\n                            <FormMessage role=\"alert\" />\n                          </FormItem>\n                        )}\n                      />\n                      \n                      <Button \n                        type=\"submit\"\n                        disabled={quickQuestionMutation.isPending || !quickQuestionForm.watch('question').trim()}\n                        data-testid=\"button-send-question\"\n                        className=\"px-4\"\n                      >\n                        {quickQuestionMutation.isPending ? (\n                          <i className=\"fas fa-spinner fa-spin\"></i>\n                        ) : (\n                          <i className=\"fas fa-paper-plane\"></i>\n                        )}\n                        <span className=\"sr-only\">Send question</span>\n                      </Button>\n                    </form>\n                  </Form>\n                </CardContent>\n              </Card>\n            </div>\n          )}\n        </div>\n      </div>\n    </SidebarLayout>\n  );\n}","size_bytes":62915},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, timestamp, jsonb, integer, decimal, index } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const CaseStatus = z.enum([\"active\", \"pending\", \"closed\"]);\nexport const CaseType = z.enum([\n  \"personal-injury\",\n  \"contract-dispute\", \n  \"employment\",\n  \"intellectual-property\",\n  \"real-estate\",\n  \"family\",\n  \"criminal\",\n  \"medical-malpractice\",\n  \"product-liability\",\n  \"other\"\n]);\nexport const DocumentType = z.enum([\n  \"demand-letter\",\n  \"medical-summary\",\n  \"medical-chronology\", \n  \"medical-bill-analysis\",\n  \"discovery-response\",\n  \"interrogatories\",\n  \"request-for-production\",\n  \"legal-brief\",\n  \"contract\",\n  \"other\"\n]);\nexport const FileFormat = z.enum([\"pdf\", \"docx\", \"txt\"]);\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const searchHistory = pgTable(\"search_history\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  type: text(\"type\").notNull(), // 'legal-research', 'brief-summarizer', 'risk-analysis'\n  query: text(\"query\").notNull(),\n  results: jsonb(\"results\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const cases = pgTable(\"cases\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  caseName: text(\"case_name\").notNull(),\n  caseNumber: text(\"case_number\"),\n  clientName: text(\"client_name\").notNull(),\n  caseType: text(\"case_type\").notNull(),\n  status: text(\"status\").notNull().default(\"active\"),\n  description: text(\"description\"),\n  jurisdiction: text(\"jurisdiction\"),\n  practiceArea: text(\"practice_area\"),\n  leadAttorney: text(\"lead_attorney\"),\n  opposingParty: text(\"opposing_party\"),\n  opposingCounsel: text(\"opposing_counsel\"),\n  valueLow: decimal(\"value_low\", { precision: 12, scale: 2 }),\n  valueHigh: decimal(\"value_high\", { precision: 12, scale: 2 }),\n  keyDeadlines: jsonb(\"key_deadlines\"),\n  dateOpened: timestamp(\"date_opened\").defaultNow().notNull(),\n  dateClosed: timestamp(\"date_closed\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  userCaseIdx: index(\"user_case_idx\").on(table.userId, table.caseName),\n  statusIdx: index(\"status_idx\").on(table.status),\n}));\n\nexport const savedDocuments = pgTable(\"saved_documents\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  caseId: varchar(\"case_id\").references(() => cases.id, { onDelete: \"cascade\" }),\n  title: text(\"title\").notNull(),\n  documentType: text(\"document_type\").notNull(),\n  content: text(\"content\").notNull(),\n  fileFormat: text(\"file_format\"),\n  generatorTool: text(\"generator_tool\"),\n  aiModel: text(\"ai_model\"),\n  version: integer(\"version\").default(1),\n  metadata: jsonb(\"metadata\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  userDocIdx: index(\"user_doc_idx\").on(table.userId, table.caseId, table.documentType),\n}));\n\nexport const medicalRecords = pgTable(\"medical_records\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  caseId: varchar(\"case_id\").notNull().references(() => cases.id, { onDelete: \"cascade\" }),\n  recordType: text(\"record_type\").notNull(), // 'treatment', 'bill', 'imaging', 'lab', etc.\n  providerName: text(\"provider_name\"),\n  serviceDate: timestamp(\"service_date\"),\n  diagnosisCodes: text(\"diagnosis_codes\").array(),\n  procedureCodes: text(\"procedure_codes\").array(),\n  treatment: text(\"treatment\"),\n  medications: text(\"medications\").array(),\n  chargeAmount: decimal(\"charge_amount\", { precision: 10, scale: 2 }),\n  paidAmount: decimal(\"paid_amount\", { precision: 10, scale: 2 }),\n  notes: text(\"notes\"),\n  rawContent: text(\"raw_content\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n}, (table) => ({\n  caseRecordIdx: index(\"case_record_idx\").on(table.caseId, table.serviceDate),\n}));\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  name: true,\n  email: true,\n  password: true,\n});\n\nexport const insertSearchHistorySchema = createInsertSchema(searchHistory).pick({\n  userId: true,\n  type: true,\n  query: true,\n  results: true,\n});\n\nexport const insertCaseSchema = createInsertSchema(cases).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  caseType: CaseType,\n  status: CaseStatus.optional(),\n});\n\nexport const insertDocumentSchema = createInsertSchema(savedDocuments).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  documentType: DocumentType,\n  fileFormat: FileFormat.optional(),\n});\n\nexport const insertMedicalRecordSchema = createInsertSchema(medicalRecords).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertSearchHistory = z.infer<typeof insertSearchHistorySchema>;\nexport type SearchHistory = typeof searchHistory.$inferSelect;\nexport type InsertCase = z.infer<typeof insertCaseSchema>;\nexport type Case = typeof cases.$inferSelect;\nexport type InsertDocument = z.infer<typeof insertDocumentSchema>;\nexport type SavedDocument = typeof savedDocuments.$inferSelect;\nexport type InsertMedicalRecord = z.infer<typeof insertMedicalRecordSchema>;\nexport type MedicalRecord = typeof medicalRecords.$inferSelect;\n","size_bytes":6062},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"server/auth.ts":{"content":"import passport from \"passport\";\nimport { Strategy as LocalStrategy } from \"passport-local\";\nimport { Express } from \"express\";\nimport session from \"express-session\";\nimport { scrypt, randomBytes, timingSafeEqual } from \"crypto\";\nimport { promisify } from \"util\";\nimport { storage } from \"./storage\";\nimport { User as SelectUser } from \"@shared/schema\";\n\ndeclare global {\n  namespace Express {\n    interface User extends SelectUser {}\n  }\n}\n\nconst scryptAsync = promisify(scrypt);\n\nasync function hashPassword(password: string) {\n  const salt = randomBytes(16).toString(\"hex\");\n  const buf = (await scryptAsync(password, salt, 64)) as Buffer;\n  return `${buf.toString(\"hex\")}.${salt}`;\n}\n\nasync function comparePasswords(supplied: string, stored: string) {\n  const [hashed, salt] = stored.split(\".\");\n  const hashedBuf = Buffer.from(hashed, \"hex\");\n  const suppliedBuf = (await scryptAsync(supplied, salt, 64)) as Buffer;\n  return timingSafeEqual(hashedBuf, suppliedBuf);\n}\n\nexport function setupAuth(app: Express) {\n  const sessionSettings: session.SessionOptions = {\n    secret: process.env.SESSION_SECRET!,\n    resave: false,\n    saveUninitialized: false,\n    store: storage.sessionStore,\n  };\n\n  app.set(\"trust proxy\", 1);\n  app.use(session(sessionSettings));\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  passport.use(\n    new LocalStrategy({ usernameField: 'email' }, async (email, password, done) => {\n      console.log(`[AUTH] Login attempt for email: ${email}`);\n      try {\n        const user = await storage.getUserByEmail(email);\n        console.log(`[AUTH] User found: ${user ? 'YES' : 'NO'}`);\n        \n        if (!user) {\n          console.log(`[AUTH] User not found for email: ${email}`);\n          return done(null, false);\n        }\n        \n        console.log(`[AUTH] Checking password for user: ${user.id}`);\n        const passwordMatch = await comparePasswords(password, user.password);\n        console.log(`[AUTH] Password match: ${passwordMatch}`);\n        \n        if (!passwordMatch) {\n          console.log(`[AUTH] Password mismatch for user: ${email}`);\n          return done(null, false);\n        } else {\n          console.log(`[AUTH] Login successful for user: ${email}`);\n          return done(null, user);\n        }\n      } catch (error) {\n        console.error(`[AUTH] Login error:`, error);\n        return done(error);\n      }\n    }),\n  );\n\n  passport.serializeUser((user, done) => done(null, user.id));\n  passport.deserializeUser(async (id: string, done) => {\n    const user = await storage.getUser(id);\n    done(null, user);\n  });\n\n  app.post(\"/api/register\", async (req, res, next) => {\n    console.log(`[AUTH] Registration attempt for email: ${req.body.email}`);\n    console.log(`[AUTH] Registration body:`, { name: req.body.name, email: req.body.email, password: req.body.password ? '[PROVIDED]' : '[MISSING]' });\n    \n    try {\n      const existingUser = await storage.getUserByEmail(req.body.email);\n      console.log(`[AUTH] Existing user check: ${existingUser ? 'EXISTS' : 'NEW'}`);\n      \n      if (existingUser) {\n        console.log(`[AUTH] Email already exists: ${req.body.email}`);\n        return res.status(400).send(\"Email already exists\");\n      }\n\n      console.log(`[AUTH] Creating new user...`);\n      const hashedPassword = await hashPassword(req.body.password);\n      console.log(`[AUTH] Password hashed successfully`);\n      \n      const user = await storage.createUser({\n        name: req.body.name,\n        email: req.body.email,\n        password: hashedPassword,\n      });\n      console.log(`[AUTH] User created successfully:`, { id: user.id, email: user.email });\n\n      req.login(user, (err) => {\n        if (err) {\n          console.error(`[AUTH] Login after registration failed:`, err);\n          return next(err);\n        }\n        console.log(`[AUTH] User logged in successfully after registration`);\n        res.status(201).json(user);\n      });\n    } catch (error) {\n      console.error(`[AUTH] Registration error:`, error);\n      res.status(500).json({ error: 'Registration failed' });\n    }\n  });\n\n  app.post(\"/api/login\", passport.authenticate(\"local\"), (req, res) => {\n    res.status(200).json(req.user);\n  });\n\n  app.post(\"/api/logout\", (req, res, next) => {\n    req.logout((err) => {\n      if (err) return next(err);\n      res.sendStatus(200);\n    });\n  });\n\n  app.get(\"/api/user\", (req, res) => {\n    if (!req.isAuthenticated()) return res.sendStatus(401);\n    res.json(req.user);\n  });\n}\n","size_bytes":4488},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2755},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/pages/document-generation.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation, useParams } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Sheet, SheetContent, SheetDescription, SheetHeader, SheetTitle, SheetTrigger } from \"@/components/ui/sheet\";\nimport { useForm } from \"react-hook-form\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\nimport { FileText, Mail, FileCheck, Mic, MicOff, Copy, Edit3, Download, Save, Info, Eye, Scale } from \"lucide-react\";\n\ninterface DocumentGenerationForm {\n  documentType: string;\n  inputMethod: 'voice' | 'paste' | 'manual';\n  textContent?: string;\n  formData?: Record<string, string>;\n}\n\ninterface GeneratedDocument {\n  id: string;\n  type: string;\n  title: string;\n  content: string;\n  formattedContent: string;\n  createdAt: Date;\n}\n\n// Document-specific form configurations\nconst documentFormConfigs: Record<string, {\n  name: string;\n  category: string;\n  fields: Array<{\n    name: string;\n    label: string;\n    type: 'text' | 'textarea' | 'date' | 'select' | 'email' | 'tel';\n    placeholder?: string;\n    required?: boolean;\n    options?: string[];\n    section: string;\n  }>;\n}> = {\n  'business-letter': {\n    name: 'Business Letter',\n    category: 'letters',\n    fields: [\n      { name: 'senderName', label: 'Your Full Name', type: 'text', placeholder: 'John Smith', required: true, section: 'sender' },\n      { name: 'senderTitle', label: 'Your Title/Position', type: 'text', placeholder: 'Manager', section: 'sender' },\n      { name: 'senderCompany', label: 'Your Company', type: 'text', placeholder: 'ABC Corporation', required: true, section: 'sender' },\n      { name: 'senderAddress', label: 'Your Address', type: 'textarea', placeholder: '123 Main Street\\nSuite 100\\nNew York, NY 10001', required: true, section: 'sender' },\n      { name: 'senderPhone', label: 'Your Phone', type: 'tel', placeholder: '(555) 123-4567', section: 'sender' },\n      { name: 'senderEmail', label: 'Your Email', type: 'email', placeholder: 'john@company.com', section: 'sender' },\n      { name: 'recipientName', label: 'Recipient Name', type: 'text', placeholder: 'Jane Doe', required: true, section: 'recipient' },\n      { name: 'recipientTitle', label: 'Recipient Title', type: 'text', placeholder: 'Director', section: 'recipient' },\n      { name: 'recipientCompany', label: 'Recipient Company', type: 'text', placeholder: 'XYZ Corp', required: true, section: 'recipient' },\n      { name: 'recipientAddress', label: 'Recipient Address', type: 'textarea', placeholder: '456 Business Ave\\nFloor 5\\nLos Angeles, CA 90210', required: true, section: 'recipient' },\n      { name: 'subject', label: 'Subject', type: 'text', placeholder: 'Re: Business Proposal', required: true, section: 'content' },\n      { name: 'purpose', label: 'Purpose of Letter', type: 'textarea', placeholder: 'State the main purpose and key points...', required: true, section: 'content' },\n      { name: 'callToAction', label: 'Call to Action', type: 'textarea', placeholder: 'What do you want the recipient to do?', section: 'content' }\n    ]\n  },\n  'cover-letter': {\n    name: 'Cover Letter',\n    category: 'letters',\n    fields: [\n      { name: 'applicantName', label: 'Your Full Name', type: 'text', placeholder: 'John Smith', required: true, section: 'sender' },\n      { name: 'applicantAddress', label: 'Your Address', type: 'textarea', placeholder: '123 Main Street\\nNew York, NY 10001', required: true, section: 'sender' },\n      { name: 'applicantPhone', label: 'Your Phone', type: 'tel', placeholder: '(555) 123-4567', required: true, section: 'sender' },\n      { name: 'applicantEmail', label: 'Your Email', type: 'email', placeholder: 'john@email.com', required: true, section: 'sender' },\n      { name: 'hiringManager', label: 'Hiring Manager Name', type: 'text', placeholder: 'Jane Doe', section: 'recipient' },\n      { name: 'companyName', label: 'Company Name', type: 'text', placeholder: 'ABC Corporation', required: true, section: 'recipient' },\n      { name: 'companyAddress', label: 'Company Address', type: 'textarea', placeholder: '456 Business Ave\\nLos Angeles, CA 90210', section: 'recipient' },\n      { name: 'jobTitle', label: 'Job Title', type: 'text', placeholder: 'Senior Software Engineer', required: true, section: 'content' },\n      { name: 'jobReference', label: 'Job Reference/ID', type: 'text', placeholder: 'Job #12345', section: 'content' },\n      { name: 'experience', label: 'Relevant Experience', type: 'textarea', placeholder: 'Describe your relevant experience and achievements...', required: true, section: 'content' },\n      { name: 'skills', label: 'Key Skills', type: 'textarea', placeholder: 'List your most relevant skills...', section: 'content' },\n      { name: 'motivation', label: 'Why This Company', type: 'textarea', placeholder: 'Why do you want to work for this company?', section: 'content' }\n    ]\n  },\n  'recommendation-letter': {\n    name: 'Recommendation Letter',\n    category: 'letters',\n    fields: [\n      { name: 'recommenderName', label: 'Your Full Name', type: 'text', placeholder: 'Dr. John Smith', required: true, section: 'sender' },\n      { name: 'recommenderTitle', label: 'Your Title/Position', type: 'text', placeholder: 'Professor of Computer Science', required: true, section: 'sender' },\n      { name: 'recommenderInstitution', label: 'Your Institution/Company', type: 'text', placeholder: 'University of Technology', required: true, section: 'sender' },\n      { name: 'recommenderAddress', label: 'Your Address', type: 'textarea', placeholder: '123 University Ave\\nTech City, TX 75001', section: 'sender' },\n      { name: 'recommenderPhone', label: 'Your Phone', type: 'tel', placeholder: '(555) 123-4567', section: 'sender' },\n      { name: 'recommenderEmail', label: 'Your Email', type: 'email', placeholder: 'john.smith@university.edu', required: true, section: 'sender' },\n      { name: 'candidateName', label: 'Person Being Recommended', type: 'text', placeholder: 'Jane Doe', required: true, section: 'content' },\n      { name: 'relationshipLength', label: 'How Long Have You Known Them', type: 'text', placeholder: '3 years', required: true, section: 'content' },\n      { name: 'relationshipContext', label: 'In What Capacity', type: 'text', placeholder: 'Student in my advanced algorithms course', required: true, section: 'content' },\n      { name: 'strengths', label: 'Key Strengths', type: 'textarea', placeholder: 'Describe their main strengths and abilities...', required: true, section: 'content' },\n      { name: 'specificExamples', label: 'Specific Examples', type: 'textarea', placeholder: 'Provide specific examples of their achievements...', section: 'content' },\n      { name: 'recommendation', label: 'Recommendation Level', type: 'select', options: ['Highly Recommend', 'Recommend', 'Recommend with Reservations'], required: true, section: 'content' }\n    ]\n  },\n  'service-agreement': {\n    name: 'Service Agreement',\n    category: 'contracts',\n    fields: [\n      { name: 'providerName', label: 'Service Provider Name', type: 'text', placeholder: 'John Smith Consulting LLC', required: true, section: 'provider' },\n      { name: 'providerAddress', label: 'Provider Address', type: 'textarea', placeholder: '123 Business St\\nNew York, NY 10001', required: true, section: 'provider' },\n      { name: 'clientName', label: 'Client Name', type: 'text', placeholder: 'ABC Corporation', required: true, section: 'client' },\n      { name: 'clientAddress', label: 'Client Address', type: 'textarea', placeholder: '456 Corporate Blvd\\nLos Angeles, CA 90210', required: true, section: 'client' },\n      { name: 'serviceDescription', label: 'Service Description', type: 'textarea', placeholder: 'Detailed description of services to be provided...', required: true, section: 'terms' },\n      { name: 'contractValue', label: 'Contract Value', type: 'text', placeholder: '$50,000', required: true, section: 'terms' },\n      { name: 'paymentTerms', label: 'Payment Terms', type: 'text', placeholder: 'Net 30 days', required: true, section: 'terms' },\n      { name: 'startDate', label: 'Start Date', type: 'date', required: true, section: 'terms' },\n      { name: 'endDate', label: 'End Date', type: 'date', section: 'terms' },\n      { name: 'deliverables', label: 'Key Deliverables', type: 'textarea', placeholder: 'List main deliverables and milestones...', section: 'terms' },\n      { name: 'governingLaw', label: 'Governing Law (State)', type: 'select', options: ['Alabama', 'California', 'Florida', 'New York', 'Texas', 'Other'], required: true, section: 'legal' }\n    ]\n  },\n  'employment-contract': {\n    name: 'Employment Contract',\n    category: 'contracts',\n    fields: [\n      { name: 'employerName', label: 'Employer/Company Name', type: 'text', placeholder: 'ABC Corporation', required: true, section: 'employer' },\n      { name: 'employerAddress', label: 'Employer Address', type: 'textarea', placeholder: '123 Corporate Ave\\nNew York, NY 10001', required: true, section: 'employer' },\n      { name: 'employeeName', label: 'Employee Name', type: 'text', placeholder: 'John Smith', required: true, section: 'employee' },\n      { name: 'employeeAddress', label: 'Employee Address', type: 'textarea', placeholder: '456 Main St\\nBrooklyn, NY 11201', required: true, section: 'employee' },\n      { name: 'jobTitle', label: 'Job Title', type: 'text', placeholder: 'Senior Software Engineer', required: true, section: 'position' },\n      { name: 'department', label: 'Department', type: 'text', placeholder: 'Engineering', section: 'position' },\n      { name: 'startDate', label: 'Start Date', type: 'date', required: true, section: 'position' },\n      { name: 'salary', label: 'Annual Salary', type: 'text', placeholder: '$120,000', required: true, section: 'compensation' },\n      { name: 'payFrequency', label: 'Pay Frequency', type: 'select', options: ['Weekly', 'Bi-weekly', 'Monthly'], required: true, section: 'compensation' },\n      { name: 'benefits', label: 'Benefits Package', type: 'textarea', placeholder: 'Health insurance, dental, vision, 401k...', section: 'compensation' },\n      { name: 'vacation', label: 'Vacation/PTO Days', type: 'text', placeholder: '20 days per year', section: 'compensation' },\n      { name: 'workSchedule', label: 'Work Schedule', type: 'text', placeholder: 'Monday-Friday, 9 AM - 5 PM', section: 'position' },\n      { name: 'probationPeriod', label: 'Probation Period', type: 'text', placeholder: '90 days', section: 'position' }\n    ]\n  },\n  'job-application': {\n    name: 'Job Application',\n    category: 'applications',\n    fields: [\n      { name: 'applicantName', label: 'Full Name', type: 'text', placeholder: 'John Smith', required: true, section: 'personal' },\n      { name: 'applicantAddress', label: 'Complete Address', type: 'textarea', placeholder: '123 Main Street\\nNew York, NY 10001', required: true, section: 'personal' },\n      { name: 'applicantPhone', label: 'Phone Number', type: 'tel', placeholder: '(555) 123-4567', required: true, section: 'personal' },\n      { name: 'applicantEmail', label: 'Email Address', type: 'email', placeholder: 'john@email.com', required: true, section: 'personal' },\n      { name: 'ssn', label: 'Social Security Number', type: 'text', placeholder: 'XXX-XX-XXXX', section: 'personal' },\n      { name: 'positionApplied', label: 'Position Applied For', type: 'text', placeholder: 'Senior Software Engineer', required: true, section: 'position' },\n      { name: 'salaryExpected', label: 'Expected Salary', type: 'text', placeholder: '$120,000', section: 'position' },\n      { name: 'availableStartDate', label: 'Available Start Date', type: 'date', required: true, section: 'position' },\n      { name: 'education', label: 'Highest Education', type: 'textarea', placeholder: 'Bachelor of Science in Computer Science\\nUniversity of Technology, 2020', required: true, section: 'background' },\n      { name: 'workExperience', label: 'Work Experience', type: 'textarea', placeholder: 'List your relevant work experience...', required: true, section: 'background' },\n      { name: 'skills', label: 'Relevant Skills', type: 'textarea', placeholder: 'JavaScript, React, Node.js, Python...', section: 'background' },\n      { name: 'references', label: 'Professional References', type: 'textarea', placeholder: 'Name, Title, Company, Phone, Email for each reference...', section: 'background' }\n    ]\n  },\n  'visa-application': {\n    name: 'Visa Application',\n    category: 'applications',\n    fields: [\n      { name: 'applicantName', label: 'Full Legal Name', type: 'text', placeholder: 'John Smith', required: true, section: 'personal' },\n      { name: 'dateOfBirth', label: 'Date of Birth', type: 'date', required: true, section: 'personal' },\n      { name: 'placeOfBirth', label: 'Place of Birth', type: 'text', placeholder: 'New York, NY, USA', required: true, section: 'personal' },\n      { name: 'nationality', label: 'Nationality', type: 'text', placeholder: 'American', required: true, section: 'personal' },\n      { name: 'passportNumber', label: 'Passport Number', type: 'text', placeholder: '123456789', required: true, section: 'personal' },\n      { name: 'passportExpiry', label: 'Passport Expiry Date', type: 'date', required: true, section: 'personal' },\n      { name: 'currentAddress', label: 'Current Address', type: 'textarea', placeholder: '123 Main Street\\nNew York, NY 10001', required: true, section: 'personal' },\n      { name: 'visaType', label: 'Visa Type', type: 'select', options: ['Tourist', 'Business', 'Student', 'Work', 'Transit'], required: true, section: 'visa' },\n      { name: 'purposeOfTravel', label: 'Purpose of Travel', type: 'textarea', placeholder: 'Business meetings and conferences...', required: true, section: 'visa' },\n      { name: 'durationOfStay', label: 'Intended Duration of Stay', type: 'text', placeholder: '2 weeks', required: true, section: 'visa' },\n      { name: 'accommodationDetails', label: 'Accommodation Details', type: 'textarea', placeholder: 'Hotel name and address...', section: 'visa' },\n      { name: 'financialSupport', label: 'Financial Support', type: 'textarea', placeholder: 'Self-funded, monthly income $8,000...', required: true, section: 'visa' }\n    ]\n  },\n  'pi-car-accident': {\n    name: 'Personal Injury - Car Accident',\n    category: 'personal-injury',\n    fields: [\n      { name: 'clientName', label: 'Client Full Name', type: 'text', placeholder: 'John Smith', required: true, section: 'client' },\n      { name: 'clientContact', label: 'Client Contact Number', type: 'tel', placeholder: '(555) 123-4567', required: true, section: 'client' },\n      { name: 'clientEmail', label: 'Client Email', type: 'email', placeholder: 'client@email.com', section: 'client' },\n      { name: 'caseId', label: 'Case ID Number', type: 'text', placeholder: 'PI-2025-001', required: true, section: 'client' },\n      { name: 'accidentDate', label: 'Accident Date', type: 'date', required: true, section: 'accident' },\n      { name: 'accidentLocation', label: 'Accident Location', type: 'textarea', placeholder: 'Intersection of Main St and 5th Ave, Los Angeles, CA', required: true, section: 'accident' },\n      { name: 'vehicleYear', label: 'Client Vehicle Year', type: 'text', placeholder: '2020', section: 'accident' },\n      { name: 'vehicleMake', label: 'Client Vehicle Make', type: 'text', placeholder: 'Toyota', section: 'accident' },\n      { name: 'vehicleModel', label: 'Client Vehicle Model', type: 'text', placeholder: 'Camry', section: 'accident' },\n      { name: 'policeReportNumber', label: 'Police Report Number', type: 'text', placeholder: 'RPT-12345678', section: 'accident' },\n      { name: 'accidentDescription', label: 'Accident Description', type: 'textarea', placeholder: 'Detailed description of how the accident occurred...', required: true, section: 'accident' },\n      { name: 'injuryType', label: 'Type of Injuries', type: 'textarea', placeholder: 'Whiplash, back pain, contusions...', required: true, section: 'injury' },\n      { name: 'injurySeverity', label: 'Injury Severity', type: 'select', options: ['Minor', 'Moderate', 'Severe', 'Critical'], required: true, section: 'injury' },\n      { name: 'medicalReports', label: 'Medical Reports/Treatments', type: 'textarea', placeholder: 'List of treating physicians, hospitals, diagnosis, treatment received...', required: true, section: 'injury' },\n      { name: 'medicalExpenses', label: 'Total Medical Expenses', type: 'text', placeholder: '$25,000', section: 'injury' },\n      { name: 'responsibleParty', label: 'Responsible Party Name', type: 'text', placeholder: 'Jane Doe', required: true, section: 'liability' },\n      { name: 'responsiblePartyInsurance', label: 'At-Fault Party Insurance Company', type: 'text', placeholder: 'ABC Insurance Co.', section: 'liability' },\n      { name: 'responsiblePartyPolicy', label: 'At-Fault Party Policy Number', type: 'text', placeholder: 'POL-987654', section: 'liability' },\n      { name: 'evidenceCollected', label: 'Evidence Collected', type: 'textarea', placeholder: 'Photos, witness statements, traffic camera footage...', required: true, section: 'liability' },\n      { name: 'attorneyName', label: 'Attorney Name', type: 'text', placeholder: 'Robert Johnson, Esq.', required: true, section: 'legal' },\n      { name: 'firmName', label: 'Law Firm Name', type: 'text', placeholder: 'Johnson & Associates', required: true, section: 'legal' },\n      { name: 'attorneyContact', label: 'Attorney Contact', type: 'tel', placeholder: '(555) 999-8888', required: true, section: 'legal' },\n      { name: 'attorneyEmail', label: 'Attorney Email', type: 'email', placeholder: 'rjohnson@lawfirm.com', section: 'legal' },\n      { name: 'barNumber', label: 'Bar Number', type: 'text', placeholder: 'CA-123456', section: 'legal' },\n      { name: 'demandAmount', label: 'Settlement Demand Amount', type: 'text', placeholder: '$150,000', section: 'settlement' },\n      { name: 'lostWages', label: 'Lost Wages', type: 'text', placeholder: '$10,000', section: 'settlement' },\n      { name: 'painSuffering', label: 'Pain & Suffering Claim', type: 'text', placeholder: '$75,000', section: 'settlement' },\n      { name: 'claimSummary', label: 'Claim Summary', type: 'textarea', placeholder: 'Summary of all damages, liability findings, and settlement justification...', required: true, section: 'settlement' }\n    ]\n  }\n};\n\n// Tab metadata for document categories\nconst tabsMetadata = {\n  'letters': {\n    id: 'letters',\n    title: 'Letters',\n    icon: Mail,\n    shortDescription: 'Generate professional letters',\n    description: 'Create various types of professional letters following international USA standards including business correspondence, cover letters, and formal communications.',\n    documentTypes: [\n      { id: 'business-letter', name: 'Business Letter', description: 'Formal business correspondence' },\n      { id: 'cover-letter', name: 'Cover Letter', description: 'Job application cover letter' },\n      { id: 'recommendation-letter', name: 'Recommendation Letter', description: 'Letter of recommendation' },\n      { id: 'complaint-letter', name: 'Complaint Letter', description: 'Formal complaint letter' },\n      { id: 'inquiry-letter', name: 'Inquiry Letter', description: 'Information request letter' },\n      { id: 'thank-you-letter', name: 'Thank You Letter', description: 'Professional thank you letter' }\n    ],\n    features: [\n      'USA business letter format standards',\n      'Professional tone and language',\n      'Proper formatting and structure',\n      'Customizable templates',\n      'Voice-to-text input support'\n    ]\n  },\n  'contracts': {\n    id: 'contracts',\n    title: 'Contracts',\n    icon: Scale,\n    shortDescription: 'Generate legal contracts',\n    description: 'Create legally compliant contracts and agreements following USA legal standards with proper clauses and terminology.',\n    documentTypes: [\n      { id: 'service-agreement', name: 'Service Agreement', description: 'Professional service contract' },\n      { id: 'employment-contract', name: 'Employment Contract', description: 'Employment agreement' },\n      { id: 'non-disclosure-agreement', name: 'Non-Disclosure Agreement', description: 'Confidentiality agreement' },\n      { id: 'rental-agreement', name: 'Rental Agreement', description: 'Property rental contract' },\n      { id: 'sales-contract', name: 'Sales Contract', description: 'Purchase and sale agreement' },\n      { id: 'consulting-agreement', name: 'Consulting Agreement', description: 'Independent contractor agreement' }\n    ],\n    features: [\n      'USA legal compliance standards',\n      'Industry-standard clauses',\n      'Jurisdiction-specific terms',\n      'Risk mitigation provisions',\n      'Customizable legal language'\n    ]\n  },\n  'applications': {\n    id: 'applications',\n    title: 'Applications',\n    icon: FileCheck,\n    shortDescription: 'Generate application forms',\n    description: 'Create various application forms and documents for jobs, permits, licenses, and official processes following USA standards.',\n    documentTypes: [\n      { id: 'job-application', name: 'Job Application', description: 'Employment application form' },\n      { id: 'visa-application', name: 'Visa Application', description: 'Immigration visa application' },\n      { id: 'permit-application', name: 'Permit Application', description: 'Business or personal permit' },\n      { id: 'loan-application', name: 'Loan Application', description: 'Financial loan application' },\n      { id: 'grant-application', name: 'Grant Application', description: 'Funding grant application' },\n      { id: 'license-application', name: 'License Application', description: 'Professional license application' }\n    ],\n    features: [\n      'Government-compliant formats',\n      'Required field validation',\n      'Official document standards',\n      'Multi-step form support',\n      'Document verification features'\n    ]\n  },\n  'personal-injury': {\n    id: 'personal-injury',\n    title: 'Personal Injury',\n    icon: FileText,\n    shortDescription: 'Generate PI case documents',\n    description: 'Create comprehensive personal injury case documentation including car accidents, medical malpractice, and other tort claims following USA legal standards.',\n    documentTypes: [\n      { id: 'pi-car-accident', name: 'Car Accident Case', description: 'Personal injury car accident documentation' }\n    ],\n    features: [\n      'USA legal compliance standards',\n      'Medical documentation integration',\n      'Insurance claim formatting',\n      'Settlement calculation support',\n      'Attorney representation details'\n    ]\n  }\n};\n\nexport default function DocumentGeneration() {\n  const { user } = useAuth();\n  const [location, setLocation] = useLocation();\n  const { tab } = useParams();\n  const { toast } = useToast();\n\n  // State management\n  const [activeTab, setActiveTab] = useState(tab || 'letters');\n  const [selectedDocumentType, setSelectedDocumentType] = useState<string>('');\n  const [inputMethod, setInputMethod] = useState<'voice' | 'paste' | 'manual' | null>(null);\n  const [isListening, setIsListening] = useState(false);\n  const [voiceText, setVoiceText] = useState('');\n  const [generatedDocument, setGeneratedDocument] = useState<GeneratedDocument | null>(null);\n  const [isPreviewMode, setIsPreviewMode] = useState(false);\n  const [editableContent, setEditableContent] = useState('');\n\n  // Voice recognition\n  const [recognition, setRecognition] = useState<any>(null);\n\n  // Form handling\n  const voiceForm = useForm<{ text: string }>({\n    defaultValues: { text: '' }\n  });\n\n  const pasteForm = useForm<{ text: string }>({\n    defaultValues: { text: '' }\n  });\n\n  const manualForm = useForm<Record<string, string>>({\n    defaultValues: {}\n  });\n\n  // Initialize speech recognition\n  useEffect(() => {\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\n      const recog = new SpeechRecognition();\n      \n      recog.continuous = true;\n      recog.interimResults = true;\n      recog.lang = 'en-US';\n\n      recog.onresult = (event: any) => {\n        let finalTranscript = '';\n        let interimTranscript = '';\n\n        for (let i = event.resultIndex; i < event.results.length; i++) {\n          const transcript = event.results[i][0].transcript;\n          if (event.results[i].isFinal) {\n            finalTranscript += transcript;\n          } else {\n            interimTranscript += transcript;\n          }\n        }\n\n        setVoiceText(finalTranscript + interimTranscript);\n        voiceForm.setValue('text', finalTranscript + interimTranscript);\n      };\n\n      recog.onend = () => {\n        setIsListening(false);\n      };\n\n      setRecognition(recog);\n    }\n  }, [voiceForm]);\n\n  // Handle tab changes and URL updates\n  useEffect(() => {\n    if (tab && tab !== activeTab) {\n      setActiveTab(tab);\n    }\n  }, [tab, activeTab]);\n\n  const handleTabChange = (newTab: string) => {\n    setActiveTab(newTab);\n    setLocation(`/document-generation/${newTab}`);\n    setSelectedDocumentType('');\n    setInputMethod(null);\n    resetForms();\n  };\n\n  const resetForms = () => {\n    voiceForm.reset();\n    pasteForm.reset();\n    manualForm.reset();\n    setVoiceText('');\n    setGeneratedDocument(null);\n    setIsPreviewMode(false);\n    setEditableContent('');\n  };\n\n  // Voice controls\n  const startListening = () => {\n    if (recognition) {\n      setIsListening(true);\n      recognition.start();\n    }\n  };\n\n  const stopListening = () => {\n    if (recognition) {\n      recognition.stop();\n      setIsListening(false);\n    }\n  };\n\n  // Document generation mutations\n  const generateDocumentMutation = useMutation({\n    mutationFn: async (data: DocumentGenerationForm) => {\n      const res = await apiRequest(\"POST\", \"/api/generate-document\", data);\n      return await res.json();\n    },\n    onSuccess: (data) => {\n      setGeneratedDocument(data);\n      setEditableContent(data.formattedContent);\n      setIsPreviewMode(true);\n      toast({\n        title: \"Document generated successfully\",\n        description: \"Your document is ready for preview and editing.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Document generation failed\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Form submission handlers\n  const handleVoiceSubmit = (data: { text: string }) => {\n    if (!selectedDocumentType || !data.text.trim()) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please select a document type and provide voice input.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    generateDocumentMutation.mutate({\n      documentType: selectedDocumentType,\n      inputMethod: 'voice',\n      textContent: data.text,\n    });\n  };\n\n  const handlePasteSubmit = (data: { text: string }) => {\n    if (!selectedDocumentType || !data.text.trim()) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please select a document type and paste your text.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    generateDocumentMutation.mutate({\n      documentType: selectedDocumentType,\n      inputMethod: 'paste',\n      textContent: data.text,\n    });\n  };\n\n  const handleManualSubmit = (data: Record<string, string>) => {\n    if (!selectedDocumentType) {\n      toast({\n        title: \"Missing information\",\n        description: \"Please select a document type.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    generateDocumentMutation.mutate({\n      documentType: selectedDocumentType,\n      inputMethod: 'manual',\n      formData: data,\n    });\n  };\n\n  // Document actions\n  const handleSaveDocument = () => {\n    // Save document logic\n    toast({\n      title: \"Document saved\",\n      description: \"Your document has been saved successfully.\",\n    });\n  };\n\n  const handleDownloadDocument = () => {\n    if (!generatedDocument) return;\n\n    const element = document.createElement('a');\n    const file = new Blob([editableContent], { type: 'text/plain' });\n    element.href = URL.createObjectURL(file);\n    element.download = `${generatedDocument.title}.txt`;\n    document.body.appendChild(element);\n    element.click();\n    document.body.removeChild(element);\n\n    toast({\n      title: \"Document downloaded\",\n      description: \"Your document has been downloaded successfully.\",\n    });\n  };\n\n  const currentTabData = tabsMetadata[activeTab as keyof typeof tabsMetadata];\n\n  return (\n    <SidebarLayout>\n      <div className=\"flex flex-col h-full\">\n        {/* Header */}\n        <div className=\"bg-card border-b border-border p-4 md:p-6\">\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-xl md:text-2xl font-bold text-foreground\">Document Generation</h1>\n              <p className=\"text-sm md:text-base text-muted-foreground\">\n                Create professional documents with AI assistance\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 p-4 md:p-6 overflow-hidden\">\n          <Tabs value={activeTab} onValueChange={handleTabChange} className=\"h-full flex flex-col\">\n            {/* Tab Navigation - Mobile Horizontal Scroll, Desktop Normal */}\n            <div className=\"flex-shrink-0 mb-6\">\n              <div className=\"flex md:hidden overflow-x-auto pb-2 scrollbar-hide\">\n                <TabsList className=\"flex-shrink-0 grid grid-cols-4 min-w-full\">\n                  {Object.values(tabsMetadata).map((tab) => {\n                    const IconComponent = tab.icon;\n                    return (\n                      <TabsTrigger\n                        key={tab.id}\n                        value={tab.id}\n                        className=\"flex items-center gap-2 text-xs px-3 py-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\"\n                        data-testid={`tab-${tab.id}`}\n                      >\n                        <IconComponent className=\"h-4 w-4 flex-shrink-0\" />\n                        <span className=\"truncate\">{tab.title}</span>\n                      </TabsTrigger>\n                    );\n                  })}\n                </TabsList>\n              </div>\n\n              {/* Desktop Tab List */}\n              <div className=\"hidden md:block\">\n                <TabsList className=\"grid w-full grid-cols-4\">\n                  {Object.values(tabsMetadata).map((tab) => {\n                    const IconComponent = tab.icon;\n                    return (\n                      <TabsTrigger\n                        key={tab.id}\n                        value={tab.id}\n                        className=\"flex items-center gap-2 px-6 py-3 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground\"\n                        data-testid={`tab-${tab.id}`}\n                      >\n                        <IconComponent className=\"h-5 w-5\" />\n                        <span>{tab.title}</span>\n                      </TabsTrigger>\n                    );\n                  })}\n                </TabsList>\n              </div>\n            </div>\n\n            {/* Tab Content */}\n            <div className=\"flex-1 overflow-auto\">\n              {Object.values(tabsMetadata).map((tab) => (\n                <TabsContent key={tab.id} value={tab.id} className=\"h-full mt-0\">\n                  <div className=\"h-full space-y-6\">\n                    {/* Tab Info Header */}\n                    <Card>\n                      <CardHeader className=\"pb-4\">\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex items-center gap-3\">\n                            <tab.icon className=\"h-6 w-6 text-primary\" />\n                            <div>\n                              <CardTitle className=\"text-lg\">{tab.title}</CardTitle>\n                              <p className=\"text-sm text-muted-foreground mt-1\">\n                                {tab.shortDescription}\n                              </p>\n                            </div>\n                          </div>\n                          \n                          {/* Info Dialog - Mobile uses Sheet, Desktop uses Dialog */}\n                          <div className=\"md:hidden\">\n                            <Sheet>\n                              <SheetTrigger asChild>\n                                <Button variant=\"ghost\" size=\"sm\" data-testid={`info-${tab.id}`}>\n                                  <Info className=\"h-4 w-4\" />\n                                </Button>\n                              </SheetTrigger>\n                              <SheetContent side=\"right\" className=\"w-full max-w-md\">\n                                <SheetHeader>\n                                  <SheetTitle className=\"flex items-center gap-2\">\n                                    <tab.icon className=\"h-5 w-5\" />\n                                    {tab.title}\n                                  </SheetTitle>\n                                  <SheetDescription>\n                                    {tab.description}\n                                  </SheetDescription>\n                                </SheetHeader>\n                                <div className=\"mt-6 space-y-4\">\n                                  <div>\n                                    <h4 className=\"font-medium mb-2\">Features</h4>\n                                    <ul className=\"text-sm text-muted-foreground space-y-1\">\n                                      {tab.features.map((feature, index) => (\n                                        <li key={index}>â€¢ {feature}</li>\n                                      ))}\n                                    </ul>\n                                  </div>\n                                </div>\n                              </SheetContent>\n                            </Sheet>\n                          </div>\n\n                          <div className=\"hidden md:block\">\n                            <Dialog>\n                              <DialogTrigger asChild>\n                                <Button variant=\"ghost\" size=\"sm\" data-testid={`info-${tab.id}`}>\n                                  <Info className=\"h-4 w-4\" />\n                                </Button>\n                              </DialogTrigger>\n                              <DialogContent className=\"max-w-md\">\n                                <DialogHeader>\n                                  <DialogTitle className=\"flex items-center gap-2\">\n                                    <tab.icon className=\"h-5 w-5\" />\n                                    {tab.title}\n                                  </DialogTitle>\n                                  <DialogDescription>\n                                    {tab.description}\n                                  </DialogDescription>\n                                </DialogHeader>\n                                <div className=\"space-y-4\">\n                                  <div>\n                                    <h4 className=\"font-medium mb-2\">Features</h4>\n                                    <ul className=\"text-sm text-muted-foreground space-y-1\">\n                                      {tab.features.map((feature, index) => (\n                                        <li key={index}>â€¢ {feature}</li>\n                                      ))}\n                                    </ul>\n                                  </div>\n                                </div>\n                              </DialogContent>\n                            </Dialog>\n                          </div>\n                        </div>\n                      </CardHeader>\n                    </Card>\n\n                    {/* Document Type Selection */}\n                    {!isPreviewMode && (\n                      <Card>\n                        <CardHeader>\n                          <CardTitle>Select Document Type</CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                            {tab.documentTypes.map((docType) => (\n                              <Card\n                                key={docType.id}\n                                className={`cursor-pointer transition-all hover:shadow-md ${\n                                  selectedDocumentType === docType.id \n                                    ? 'ring-2 ring-primary bg-primary/5' \n                                    : 'border-border'\n                                }`}\n                                onClick={() => setSelectedDocumentType(docType.id)}\n                                data-testid={`doc-type-${docType.id}`}\n                              >\n                                <CardContent className=\"p-4\">\n                                  <h4 className=\"font-medium text-sm\">{docType.name}</h4>\n                                  <p className=\"text-xs text-muted-foreground mt-1\">\n                                    {docType.description}\n                                  </p>\n                                </CardContent>\n                              </Card>\n                            ))}\n                          </div>\n                        </CardContent>\n                      </Card>\n                    )}\n\n                    {/* Input Method Selection */}\n                    {!isPreviewMode && selectedDocumentType && (\n                      <Card>\n                        <CardHeader>\n                          <CardTitle>Choose Input Method</CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n                            <Button\n                              variant={inputMethod === 'voice' ? 'default' : 'outline'}\n                              className=\"h-auto p-4 flex flex-col items-center gap-2\"\n                              onClick={() => setInputMethod('voice')}\n                              data-testid=\"input-method-voice\"\n                            >\n                              <Mic className=\"h-6 w-6\" />\n                              <span className=\"font-medium\">Voice to Text</span>\n                              <span className=\"text-xs text-center text-muted-foreground\">\n                                Speak to generate content\n                              </span>\n                            </Button>\n\n                            <Button\n                              variant={inputMethod === 'paste' ? 'default' : 'outline'}\n                              className=\"h-auto p-4 flex flex-col items-center gap-2\"\n                              onClick={() => setInputMethod('paste')}\n                              data-testid=\"input-method-paste\"\n                            >\n                              <Copy className=\"h-6 w-6\" />\n                              <span className=\"font-medium\">Paste Text</span>\n                              <span className=\"text-xs text-center text-muted-foreground\">\n                                Paste existing content\n                              </span>\n                            </Button>\n\n                            <Button\n                              variant={inputMethod === 'manual' ? 'default' : 'outline'}\n                              className=\"h-auto p-4 flex flex-col items-center gap-2\"\n                              onClick={() => setInputMethod('manual')}\n                              data-testid=\"input-method-manual\"\n                            >\n                              <Edit3 className=\"h-6 w-6\" />\n                              <span className=\"font-medium\">Manual Filling</span>\n                              <span className=\"text-xs text-center text-muted-foreground\">\n                                Fill form fields manually\n                              </span>\n                            </Button>\n                          </div>\n\n                          {/* Input Forms */}\n                          {inputMethod === 'voice' && (\n                            <Card>\n                              <CardHeader>\n                                <CardTitle className=\"text-base\">Voice Input</CardTitle>\n                              </CardHeader>\n                              <CardContent>\n                                <Form {...voiceForm}>\n                                  <form onSubmit={voiceForm.handleSubmit(handleVoiceSubmit)} className=\"space-y-4\">\n                                    <div className=\"space-y-4\">\n                                      <div className=\"flex items-center gap-4\">\n                                        <Button\n                                          type=\"button\"\n                                          variant={isListening ? \"destructive\" : \"default\"}\n                                          onClick={isListening ? stopListening : startListening}\n                                          data-testid=\"button-voice-toggle\"\n                                        >\n                                          {isListening ? (\n                                            <>\n                                              <MicOff className=\"h-4 w-4 mr-2\" />\n                                              Stop Recording\n                                            </>\n                                          ) : (\n                                            <>\n                                              <Mic className=\"h-4 w-4 mr-2\" />\n                                              Start Recording\n                                            </>\n                                          )}\n                                        </Button>\n                                        {isListening && (\n                                          <span className=\"text-sm text-muted-foreground\">\n                                            Listening...\n                                          </span>\n                                        )}\n                                      </div>\n\n                                      <FormField\n                                        control={voiceForm.control}\n                                        name=\"text\"\n                                        render={({ field }) => (\n                                          <FormItem>\n                                            <FormLabel>Captured Text</FormLabel>\n                                            <FormControl>\n                                              <Textarea\n                                                {...field}\n                                                placeholder=\"Your spoken text will appear here...\"\n                                                className=\"min-h-32\"\n                                                data-testid=\"textarea-voice-text\"\n                                              />\n                                            </FormControl>\n                                            <FormMessage />\n                                          </FormItem>\n                                        )}\n                                      />\n                                    </div>\n\n                                    <Button \n                                      type=\"submit\" \n                                      disabled={generateDocumentMutation.isPending}\n                                      data-testid=\"button-generate-voice\"\n                                    >\n                                      {generateDocumentMutation.isPending ? \"Generating...\" : \"Generate Document\"}\n                                    </Button>\n                                  </form>\n                                </Form>\n                              </CardContent>\n                            </Card>\n                          )}\n\n                          {inputMethod === 'paste' && (\n                            <Card>\n                              <CardHeader>\n                                <CardTitle className=\"text-base\">Paste Text</CardTitle>\n                              </CardHeader>\n                              <CardContent>\n                                <Form {...pasteForm}>\n                                  <form onSubmit={pasteForm.handleSubmit(handlePasteSubmit)} className=\"space-y-4\">\n                                    <FormField\n                                      control={pasteForm.control}\n                                      name=\"text\"\n                                      render={({ field }) => (\n                                        <FormItem>\n                                          <FormLabel>Paste Your Content</FormLabel>\n                                          <FormControl>\n                                            <Textarea\n                                              {...field}\n                                              placeholder=\"Paste your text content here...\"\n                                              className=\"min-h-32\"\n                                              data-testid=\"textarea-paste-text\"\n                                            />\n                                          </FormControl>\n                                          <FormMessage />\n                                        </FormItem>\n                                      )}\n                                    />\n\n                                    <Button \n                                      type=\"submit\" \n                                      disabled={generateDocumentMutation.isPending}\n                                      data-testid=\"button-generate-paste\"\n                                    >\n                                      {generateDocumentMutation.isPending ? \"Generating...\" : \"Generate Document\"}\n                                    </Button>\n                                  </form>\n                                </Form>\n                              </CardContent>\n                            </Card>\n                          )}\n\n                          {inputMethod === 'manual' && selectedDocumentType && (\n                            <Card>\n                              <CardHeader>\n                                <CardTitle className=\"text-base\">\n                                  {documentFormConfigs[selectedDocumentType]?.name || selectedDocumentType} - Personalized Form\n                                </CardTitle>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  Fill out the specific fields below to generate a professionally formatted {documentFormConfigs[selectedDocumentType]?.name || selectedDocumentType} following USA standards\n                                </p>\n                              </CardHeader>\n                              <CardContent>\n                                {documentFormConfigs[selectedDocumentType] ? (\n                                  <Form {...manualForm}>\n                                    <form onSubmit={manualForm.handleSubmit(handleManualSubmit)} className=\"space-y-6\">\n                                      {/* Group fields by section */}\n                                      {Object.entries(\n                                        documentFormConfigs[selectedDocumentType].fields.reduce((sections, field) => {\n                                          if (!sections[field.section]) {\n                                            sections[field.section] = [];\n                                          }\n                                          sections[field.section].push(field);\n                                          return sections;\n                                        }, {} as Record<string, typeof documentFormConfigs[string]['fields']>)\n                                      ).map(([sectionName, fields]) => (\n                                        <div key={sectionName} className=\"space-y-4\">\n                                          <h4 className=\"font-medium text-sm text-primary capitalize\">\n                                            {sectionName.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())} Information\n                                          </h4>\n                                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                            {fields.map((field) => (\n                                              <div key={field.name} className={field.type === 'textarea' ? 'md:col-span-2' : ''}>\n                                                <FormField\n                                                  control={manualForm.control}\n                                                  name={field.name}\n                                                  render={({ field: formField }) => (\n                                                    <FormItem>\n                                                      <FormLabel>\n                                                        {field.label}\n                                                        {field.required && ' *'}\n                                                      </FormLabel>\n                                                      <FormControl>\n                                                        {field.type === 'textarea' ? (\n                                                          <Textarea \n                                                            {...formField} \n                                                            placeholder={field.placeholder}\n                                                            className=\"min-h-20\"\n                                                            data-testid={`textarea-${field.name}`}\n                                                          />\n                                                        ) : field.type === 'select' ? (\n                                                          <Select onValueChange={formField.onChange} defaultValue={formField.value}>\n                                                            <SelectTrigger data-testid={`select-${field.name}`}>\n                                                              <SelectValue placeholder={`Select ${field.label}`} />\n                                                            </SelectTrigger>\n                                                            <SelectContent>\n                                                              {field.options?.map((option) => (\n                                                                <SelectItem key={option} value={option.toLowerCase().replace(/\\s+/g, '-')}>\n                                                                  {option}\n                                                                </SelectItem>\n                                                              ))}\n                                                            </SelectContent>\n                                                          </Select>\n                                                        ) : (\n                                                          <Input \n                                                            {...formField} \n                                                            type={field.type}\n                                                            placeholder={field.placeholder}\n                                                            data-testid={`input-${field.name}`}\n                                                          />\n                                                        )}\n                                                      </FormControl>\n                                                      <FormMessage />\n                                                    </FormItem>\n                                                  )}\n                                                />\n                                              </div>\n                                            ))}\n                                          </div>\n                                        </div>\n                                      ))}\n\n                                      <div className=\"border-t pt-4\">\n                                        <Button \n                                          type=\"submit\" \n                                          disabled={generateDocumentMutation.isPending}\n                                          className=\"w-full md:w-auto\"\n                                          data-testid=\"button-generate-manual\"\n                                        >\n                                          {generateDocumentMutation.isPending ? \n                                            `Generating ${documentFormConfigs[selectedDocumentType]?.name}...` : \n                                            `Generate Professional ${documentFormConfigs[selectedDocumentType]?.name}`\n                                          }\n                                        </Button>\n                                        <p className=\"text-xs text-muted-foreground mt-2\">\n                                          * Required fields. Document will be generated following professional USA business standards for {documentFormConfigs[selectedDocumentType]?.name}.\n                                        </p>\n                                      </div>\n                                    </form>\n                                  </Form>\n                                ) : (\n                                  <div className=\"text-center py-8\">\n                                    <p className=\"text-muted-foreground\">\n                                      Personalized form configuration not available for this document type yet.\n                                    </p>\n                                  </div>\n                                )}\n                              </CardContent>\n                            </Card>\n                          )}\n                        </CardContent>\n                      </Card>\n                    )}\n\n                    {/* Document Preview and Editor */}\n                    {isPreviewMode && generatedDocument && (\n                      <Card>\n                        <CardHeader>\n                          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n                            <div>\n                              <CardTitle className=\"flex items-center gap-2\">\n                                <Eye className=\"h-5 w-5\" />\n                                Document Preview\n                              </CardTitle>\n                              <p className=\"text-sm text-muted-foreground\">\n                                {generatedDocument.title}\n                              </p>\n                            </div>\n                            <div className=\"flex gap-2\">\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => setIsPreviewMode(false)}\n                                data-testid=\"button-back-to-edit\"\n                              >\n                                Back to Edit\n                              </Button>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={handleSaveDocument}\n                                data-testid=\"button-save-document\"\n                              >\n                                <Save className=\"h-4 w-4 mr-2\" />\n                                Save\n                              </Button>\n                              <Button\n                                size=\"sm\"\n                                onClick={handleDownloadDocument}\n                                data-testid=\"button-download-document\"\n                              >\n                                <Download className=\"h-4 w-4 mr-2\" />\n                                Download\n                              </Button>\n                            </div>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <div className=\"space-y-4\">\n                            <Label htmlFor=\"document-editor\">Edit Document Content</Label>\n                            <Textarea\n                              id=\"document-editor\"\n                              value={editableContent}\n                              onChange={(e) => setEditableContent(e.target.value)}\n                              className=\"min-h-96 font-mono text-sm\"\n                              data-testid=\"textarea-document-editor\"\n                            />\n                            <p className=\"text-xs text-muted-foreground\">\n                              You can edit the document content above. The document follows international USA standards for formatting and structure.\n                            </p>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    )}\n                  </div>\n                </TabsContent>\n              ))}\n            </div>\n          </Tabs>\n        </div>\n      </div>\n    </SidebarLayout>\n  );\n}","size_bytes":58527},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/file-upload.tsx":{"content":"import { useRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface FileUploadProps {\n  onFileChange: (files: FileList | null) => void;\n  accept?: string;\n  multiple?: boolean;\n  disabled?: boolean;\n  className?: string;\n}\n\nexport function FileUpload({\n  onFileChange,\n  accept = \"*\",\n  multiple = false,\n  disabled = false,\n  className,\n  ...props\n}: FileUploadProps) {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleClick = () => {\n    fileInputRef.current?.click();\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    onFileChange(e.target.files);\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    onFileChange(e.dataTransfer.files);\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n  };\n\n  return (\n    <div\n      className={cn(\n        \"border-2 border-dashed border-border rounded-lg p-12 text-center hover:border-primary transition-colors cursor-pointer\",\n        disabled && \"opacity-50 cursor-not-allowed\",\n        className\n      )}\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n      onClick={!disabled ? handleClick : undefined}\n      {...props}\n    >\n      <div className=\"flex flex-col items-center\">\n        <i className=\"fas fa-cloud-upload-alt text-4xl text-muted-foreground mb-4\"></i>\n        <h4 className=\"text-lg font-medium text-foreground mb-2\">Upload Legal Document</h4>\n        <p className=\"text-muted-foreground mb-4\">Drag and drop your file here, or click to browse</p>\n        <p className=\"text-sm text-muted-foreground mb-4\">Supports PDF, DOC, DOCX files up to 50MB</p>\n        <Button \n          type=\"button\"\n          disabled={disabled}\n          data-testid=\"button-choose-file\"\n        >\n          {disabled ? \"Processing...\" : \"Choose File\"}\n        </Button>\n      </div>\n      \n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept={accept}\n        multiple={multiple}\n        onChange={handleFileChange}\n        disabled={disabled}\n        className=\"hidden\"\n      />\n    </div>\n  );\n}\n","size_bytes":2137},"client/src/pages/auth-page.tsx":{"content":"import { useState, useEffect, type FormEvent } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function AuthPage() {\n  const [isLogin, setIsLogin] = useState(true);\n  const { user, loginMutation, registerMutation } = useAuth();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n\n  // Login form state\n  const [loginEmail, setLoginEmail] = useState(\"\");\n  const [loginPassword, setLoginPassword] = useState(\"\");\n\n  // Registration form state\n  const [registerName, setRegisterName] = useState(\"\");\n  const [registerEmail, setRegisterEmail] = useState(\"\");\n  const [registerPassword, setRegisterPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [acceptTerms, setAcceptTerms] = useState(false);\n\n  // Form validation and submission states\n  const [errors, setErrors] = useState<Record<string, string>>({});\n\n  // Redirect if already logged in\n  useEffect(() => {\n    if (user) {\n      setLocation(\"/dashboard\");\n    }\n  }, [user, setLocation]);\n\n  // Handle authentication errors\n  useEffect(() => {\n    if (loginMutation.error) {\n      toast({\n        title: \"Login Failed\",\n        description: loginMutation.error.message || \"Invalid email or password\",\n        variant: \"destructive\",\n      });\n    }\n  }, [loginMutation.error, toast]);\n\n  useEffect(() => {\n    if (registerMutation.error) {\n      toast({\n        title: \"Registration Failed\", \n        description: registerMutation.error.message || \"Unable to create account\",\n        variant: \"destructive\",\n      });\n    }\n  }, [registerMutation.error, toast]);\n\n  const validateEmail = (email: string) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  };\n\n  const validateLoginForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!loginEmail) {\n      newErrors.loginEmail = \"Email is required\";\n    } else if (!validateEmail(loginEmail)) {\n      newErrors.loginEmail = \"Please enter a valid email\";\n    }\n\n    if (!loginPassword) {\n      newErrors.loginPassword = \"Password is required\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const validateRegisterForm = () => {\n    const newErrors: Record<string, string> = {};\n\n    if (!registerName.trim()) {\n      newErrors.registerName = \"Full name is required\";\n    }\n\n    if (!registerEmail) {\n      newErrors.registerEmail = \"Email is required\";\n    } else if (!validateEmail(registerEmail)) {\n      newErrors.registerEmail = \"Please enter a valid email\";\n    }\n\n    if (!registerPassword) {\n      newErrors.registerPassword = \"Password is required\";\n    }\n\n    if (!confirmPassword) {\n      newErrors.confirmPassword = \"Please confirm your password\";\n    } else if (registerPassword !== confirmPassword) {\n      newErrors.confirmPassword = \"Passwords don't match\";\n    }\n\n    if (!acceptTerms) {\n      newErrors.acceptTerms = \"You must accept the terms and conditions\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleLogin = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    \n    if (!validateLoginForm()) {\n      return;\n    }\n\n    loginMutation.mutate({\n      email: loginEmail,\n      password: loginPassword,\n    });\n  };\n\n  const handleRegister = (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    \n    if (!validateRegisterForm()) {\n      return;\n    }\n\n    registerMutation.mutate({\n      name: registerName.trim(),\n      email: registerEmail,\n      password: registerPassword,\n    });\n  };\n\n  const clearErrors = () => setErrors({});\n\n  const switchToLogin = () => {\n    setIsLogin(true);\n    clearErrors();\n  };\n\n  const switchToRegister = () => {\n    setIsLogin(false);\n    clearErrors();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100\">\n      <div className=\"flex min-h-screen\">\n        {/* Left Side - Branding */}\n        <div className=\"hidden lg:flex lg:w-1/2 bg-primary flex-col justify-center px-12\">\n          <div className=\"max-w-md\">\n            <div className=\"mb-8\">\n              <i className=\"fas fa-balance-scale text-4xl text-primary-foreground mb-4\"></i>\n              <h1 className=\"text-4xl font-bold text-primary-foreground mb-4\">LawHelper</h1>\n              <p className=\"text-lg text-blue-100\">AI-powered legal research platform designed for modern legal professionals</p>\n            </div>\n            \n            <div className=\"space-y-6\">\n              <div className=\"flex items-center space-x-3\">\n                <i className=\"fas fa-search text-blue-200\"></i>\n                <span className=\"text-blue-100\">AI Legal Research & Case Law Analysis</span>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <i className=\"fas fa-file-text text-blue-200\"></i>\n                <span className=\"text-blue-100\">Intelligent Document Summarization</span>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <i className=\"fas fa-chart-line text-blue-200\"></i>\n                <span className=\"text-blue-100\">Predictive Risk Analysis</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        {/* Right Side - Auth Forms */}\n        <div className=\"w-full lg:w-1/2 flex items-center justify-center px-8\">\n          <div className=\"w-full max-w-md\">\n            {isLogin ? (\n              /* LOGIN FORM */\n              <Card className=\"bg-card rounded-lg shadow-lg\">\n                <CardHeader className=\"text-center\">\n                  <CardTitle className=\"text-2xl font-semibold\">Welcome Back</CardTitle>\n                  <CardDescription>Sign in to your LawHelper account</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleLogin} className=\"space-y-6\">\n                    <div className=\"space-y-2\">\n                      <label htmlFor=\"login-email\" className=\"text-sm font-medium\">\n                        Email\n                      </label>\n                      <Input\n                        id=\"login-email\"\n                        type=\"email\"\n                        placeholder=\"Enter your email\"\n                        value={loginEmail}\n                        onChange={(e) => setLoginEmail(e.target.value)}\n                        data-testid=\"input-email\"\n                        className={errors.loginEmail ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.loginEmail && (\n                        <p className=\"text-sm text-red-500\">{errors.loginEmail}</p>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <label htmlFor=\"login-password\" className=\"text-sm font-medium\">\n                        Password\n                      </label>\n                      <Input\n                        id=\"login-password\"\n                        type=\"password\"\n                        placeholder=\"Enter your password\"\n                        value={loginPassword}\n                        onChange={(e) => setLoginPassword(e.target.value)}\n                        data-testid=\"input-password\"\n                        className={errors.loginPassword ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.loginPassword && (\n                        <p className=\"text-sm text-red-500\">{errors.loginPassword}</p>\n                      )}\n                    </div>\n                    \n                    <Button \n                      type=\"submit\" \n                      className=\"w-full\" \n                      disabled={loginMutation.isPending}\n                      data-testid=\"button-signin\"\n                    >\n                      {loginMutation.isPending ? \"Signing In...\" : \"Sign In\"}\n                    </Button>\n                  </form>\n                  \n                  <div className=\"mt-6 text-center\">\n                    <p className=\"text-muted-foreground\">\n                      Don't have an account?{\" \"}\n                      <button \n                        onClick={switchToRegister}\n                        className=\"text-primary hover:underline font-medium\"\n                        data-testid=\"link-signup\"\n                      >\n                        Sign up\n                      </button>\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              /* REGISTRATION FORM */\n              <Card className=\"bg-card rounded-lg shadow-lg\">\n                <CardHeader className=\"text-center\">\n                  <CardTitle className=\"text-2xl font-semibold\">Create Account</CardTitle>\n                  <CardDescription>Join LawHelper today</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={handleRegister} className=\"space-y-6\">\n                    <div className=\"space-y-2\">\n                      <label htmlFor=\"register-name\" className=\"text-sm font-medium\">\n                        Full Name\n                      </label>\n                      <Input\n                        id=\"register-name\"\n                        type=\"text\"\n                        placeholder=\"Enter your full name\"\n                        value={registerName}\n                        onChange={(e) => setRegisterName(e.target.value)}\n                        data-testid=\"input-name\"\n                        className={errors.registerName ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.registerName && (\n                        <p className=\"text-sm text-red-500\">{errors.registerName}</p>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <label htmlFor=\"register-email\" className=\"text-sm font-medium\">\n                        Email\n                      </label>\n                      <Input\n                        id=\"register-email\"\n                        type=\"email\"\n                        placeholder=\"Enter your email\"\n                        value={registerEmail}\n                        onChange={(e) => setRegisterEmail(e.target.value)}\n                        data-testid=\"input-email\"\n                        className={errors.registerEmail ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.registerEmail && (\n                        <p className=\"text-sm text-red-500\">{errors.registerEmail}</p>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <label htmlFor=\"register-password\" className=\"text-sm font-medium\">\n                        Password\n                      </label>\n                      <Input\n                        id=\"register-password\"\n                        type=\"password\"\n                        placeholder=\"Create a password\"\n                        value={registerPassword}\n                        onChange={(e) => setRegisterPassword(e.target.value)}\n                        data-testid=\"input-password\"\n                        className={errors.registerPassword ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.registerPassword && (\n                        <p className=\"text-sm text-red-500\">{errors.registerPassword}</p>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <label htmlFor=\"confirm-password\" className=\"text-sm font-medium\">\n                        Confirm Password\n                      </label>\n                      <Input\n                        id=\"confirm-password\"\n                        type=\"password\"\n                        placeholder=\"Confirm your password\"\n                        value={confirmPassword}\n                        onChange={(e) => setConfirmPassword(e.target.value)}\n                        data-testid=\"input-confirm-password\"\n                        className={errors.confirmPassword ? \"border-red-500\" : \"\"}\n                      />\n                      {errors.confirmPassword && (\n                        <p className=\"text-sm text-red-500\">{errors.confirmPassword}</p>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2\">\n                      <Checkbox \n                        id=\"terms\" \n                        checked={acceptTerms}\n                        onCheckedChange={(checked) => setAcceptTerms(checked === true)}\n                        className={errors.acceptTerms ? \"border-red-500\" : \"\"}\n                      />\n                      <label htmlFor=\"terms\" className=\"text-sm text-muted-foreground\">\n                        I agree to the{\" \"}\n                        <button type=\"button\" className=\"text-primary hover:underline\">\n                          Terms of Service\n                        </button>{\" \"}\n                        and{\" \"}\n                        <button type=\"button\" className=\"text-primary hover:underline\">\n                          Privacy Policy\n                        </button>\n                      </label>\n                    </div>\n                    {errors.acceptTerms && (\n                      <p className=\"text-sm text-red-500\">{errors.acceptTerms}</p>\n                    )}\n                    \n                    <Button \n                      type=\"submit\" \n                      className=\"w-full\" \n                      disabled={registerMutation.isPending}\n                      data-testid=\"button-create-account\"\n                    >\n                      {registerMutation.isPending ? \"Creating Account...\" : \"Create Account\"}\n                    </Button>\n                  </form>\n                  \n                  <div className=\"mt-6 text-center\">\n                    <p className=\"text-muted-foreground\">\n                      Already have an account?{\" \"}\n                      <button \n                        onClick={switchToLogin}\n                        className=\"text-primary hover:underline font-medium\"\n                        data-testid=\"link-signin\"\n                      >\n                        Sign in\n                      </button>\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":14977},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/lib/protected-route.tsx":{"content":"import { useAuth } from \"@/hooks/use-auth\";\nimport { Loader2 } from \"lucide-react\";\nimport { Redirect, Route } from \"wouter\";\n\nexport function ProtectedRoute({\n  path,\n  component: Component,\n}: {\n  path: string;\n  component: () => React.JSX.Element;\n}) {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <Route path={path}>\n        <div className=\"flex items-center justify-center min-h-screen\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-border\" />\n        </div>\n      </Route>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Route path={path}>\n        <Redirect to=\"/auth\" />\n      </Route>\n    );\n  }\n\n  return (\n    <Route path={path}>\n      <Component />\n    </Route>\n  );\n}\n","size_bytes":725},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { AuthProvider } from \"@/hooks/use-auth\";\nimport { ProtectedRoute } from \"./lib/protected-route\";\nimport NotFound from \"@/pages/not-found\";\nimport AuthPage from \"@/pages/auth-page\";\nimport Dashboard from \"@/pages/dashboard\";\nimport AISearch from \"@/pages/ai-search\";\nimport DocumentGeneration from \"@/pages/document-generation\";\nimport DocumentAnalyzer from \"@/pages/document-analyzer\";\nimport MyCases from \"@/pages/my-cases\";\nimport LandingPage from \"@/pages/landing-page\";\nimport MedicalIntelligence from \"@/pages/medical-intelligence\";\nimport DemandLetter from \"@/pages/demand-letter\";\nimport DiscoveryTools from \"@/pages/discovery-tools\";\nimport CaseDetails from \"@/pages/case-details\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={LandingPage} />\n      <ProtectedRoute path=\"/dashboard\" component={Dashboard} />\n      <ProtectedRoute path=\"/my-cases\" component={MyCases} />\n      <ProtectedRoute path=\"/cases/:id\" component={CaseDetails} />\n      <ProtectedRoute path=\"/ai-search/:tab?\" component={AISearch} />\n      <ProtectedRoute path=\"/document-generation/:tab?\" component={DocumentGeneration} />\n      <ProtectedRoute path=\"/document-analyzer\" component={DocumentAnalyzer} />\n      <ProtectedRoute path=\"/medical-intelligence\" component={MedicalIntelligence} />\n      <ProtectedRoute path=\"/demand-letter\" component={DemandLetter} />\n      <ProtectedRoute path=\"/discovery-tools\" component={DiscoveryTools} />\n      <Route path=\"/auth\" component={AuthPage} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <AuthProvider>\n        <TooltipProvider>\n          <Toaster />\n          <Router />\n        </TooltipProvider>\n      </AuthProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":2098},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/pages/demand-letter.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Download, Loader2, Calculator } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\n\nexport default function DemandLetter() {\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    caseType: \"Personal Injury\",\n    claimantName: \"\",\n    defendantName: \"\",\n    incidentDate: \"\",\n    incidentDescription: \"\",\n    injuries: \"\",\n    medicalTreatment: \"\",\n    medicalExpenses: \"\",\n    lostWages: \"\",\n    painMultiplier: \"3\",\n    demandAmount: \"\",\n  });\n  const [result, setResult] = useState<any>(null);\n\n  const demandLetterMutation = useMutation({\n    mutationFn: async (data: typeof formData) =>\n      apiRequest(\"/api/demand-letter\", \"POST\", data),\n    onSuccess: (data) => {\n      setResult(data);\n      toast({\n        title: \"Demand Letter Generated\",\n        description: \"Your demand letter has been created successfully.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Generation Failed\",\n        description: \"Failed to generate demand letter. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const calculateSettlement = () => {\n    const medical = parseFloat(formData.medicalExpenses) || 0;\n    const wages = parseFloat(formData.lostWages) || 0;\n    const multiplier = parseFloat(formData.painMultiplier) || 3;\n    const economic = medical + wages;\n    const painSuffering = economic * multiplier;\n    const total = economic + painSuffering;\n    setFormData({ ...formData, demandAmount: total.toFixed(2) });\n  };\n\n  const handleGenerate = () => {\n    if (!formData.claimantName || !formData.defendantName || !formData.incidentDate) {\n      toast({\n        title: \"Required Fields Missing\",\n        description: \"Please fill in claimant, defendant, and incident date.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    demandLetterMutation.mutate(formData);\n  };\n\n  const handleExport = (format: string) => {\n    if (!result) return;\n    \n    const content = {\n      title: \"Demand Letter\",\n      sections: [{ heading: \"Demand Letter\", content: result.letterContent }],\n      subject: \"Personal Injury Demand Letter\",\n      keywords: [\"demand\", \"letter\", \"settlement\"],\n    };\n\n    fetch(\"/api/export-document\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ format, content }),\n    })\n      .then((res) => res.blob())\n      .then((blob) => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `demand_letter_${Date.now()}.${format}`;\n        a.click();\n      });\n  };\n\n  return (\n    <SidebarLayout>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900\">\n        <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-4xl mx-auto space-y-6\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold text-slate-900 dark:text-white mb-2\" data-testid=\"heading-demand-letter\">\n              Demand Letter Automation\n            </h1>\n            <p className=\"text-slate-600 dark:text-slate-300\" data-testid=\"text-description\">\n              Generate professional demand letters for personal injury cases\n            </p>\n          </div>\n\n          <Card>\n            <CardHeader>\n              <CardTitle data-testid=\"heading-party-info\">Party Information</CardTitle>\n              <CardDescription>Enter the parties involved in the case</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"claimant\">Claimant Name *</Label>\n                  <Input\n                    id=\"claimant\"\n                    value={formData.claimantName}\n                    onChange={(e) => setFormData({ ...formData, claimantName: e.target.value })}\n                    data-testid=\"input-claimant\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"defendant\">Defendant Name *</Label>\n                  <Input\n                    id=\"defendant\"\n                    value={formData.defendantName}\n                    onChange={(e) => setFormData({ ...formData, defendantName: e.target.value })}\n                    data-testid=\"input-defendant\"\n                  />\n                </div>\n              </div>\n              <div>\n                <Label htmlFor=\"incidentDate\">Incident Date *</Label>\n                <Input\n                  id=\"incidentDate\"\n                  type=\"date\"\n                  value={formData.incidentDate}\n                  onChange={(e) => setFormData({ ...formData, incidentDate: e.target.value })}\n                  data-testid=\"input-incident-date\"\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle data-testid=\"heading-incident-details\">Incident Details</CardTitle>\n              <CardDescription>Describe the incident and injuries</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"incidentDescription\">Incident Description</Label>\n                <Textarea\n                  id=\"incidentDescription\"\n                  value={formData.incidentDescription}\n                  onChange={(e) => setFormData({ ...formData, incidentDescription: e.target.value })}\n                  placeholder=\"Describe how the incident occurred...\"\n                  className=\"min-h-[100px]\"\n                  data-testid=\"input-incident-description\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"injuries\">Injuries Sustained</Label>\n                <Textarea\n                  id=\"injuries\"\n                  value={formData.injuries}\n                  onChange={(e) => setFormData({ ...formData, injuries: e.target.value })}\n                  placeholder=\"List all injuries...\"\n                  data-testid=\"input-injuries\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"medicalTreatment\">Medical Treatment</Label>\n                <Textarea\n                  id=\"medicalTreatment\"\n                  value={formData.medicalTreatment}\n                  onChange={(e) => setFormData({ ...formData, medicalTreatment: e.target.value })}\n                  placeholder=\"Describe medical treatment received...\"\n                  data-testid=\"input-medical-treatment\"\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle data-testid=\"heading-damages\">\n                <Calculator className=\"w-5 h-5 inline mr-2\" />\n                Damages & Settlement Calculator\n              </CardTitle>\n              <CardDescription>Calculate settlement demand based on damages</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <Label htmlFor=\"medicalExpenses\">Medical Expenses ($)</Label>\n                  <Input\n                    id=\"medicalExpenses\"\n                    type=\"number\"\n                    value={formData.medicalExpenses}\n                    onChange={(e) => setFormData({ ...formData, medicalExpenses: e.target.value })}\n                    data-testid=\"input-medical-expenses\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"lostWages\">Lost Wages ($)</Label>\n                  <Input\n                    id=\"lostWages\"\n                    type=\"number\"\n                    value={formData.lostWages}\n                    onChange={(e) => setFormData({ ...formData, lostWages: e.target.value })}\n                    data-testid=\"input-lost-wages\"\n                  />\n                </div>\n              </div>\n              <div>\n                <Label htmlFor=\"painMultiplier\">Pain & Suffering Multiplier</Label>\n                <Input\n                  id=\"painMultiplier\"\n                  type=\"number\"\n                  step=\"0.5\"\n                  min=\"1\"\n                  max=\"5\"\n                  value={formData.painMultiplier}\n                  onChange={(e) => setFormData({ ...formData, painMultiplier: e.target.value })}\n                  data-testid=\"input-pain-multiplier\"\n                />\n                <p className=\"text-sm text-slate-500 mt-1\">Typical range: 1.5-5x economic damages</p>\n              </div>\n              <Button onClick={calculateSettlement} variant=\"outline\" className=\"w-full\" data-testid=\"button-calculate\">\n                <Calculator className=\"w-4 h-4 mr-2\" />\n                Calculate Settlement Demand\n              </Button>\n              <div>\n                <Label htmlFor=\"demandAmount\">Settlement Demand ($)</Label>\n                <Input\n                  id=\"demandAmount\"\n                  type=\"number\"\n                  value={formData.demandAmount}\n                  onChange={(e) => setFormData({ ...formData, demandAmount: e.target.value })}\n                  data-testid=\"input-demand-amount\"\n                  className=\"text-2xl font-bold\"\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          <div className=\"flex gap-4\">\n            <Button\n              onClick={handleGenerate}\n              disabled={demandLetterMutation.isPending}\n              className=\"flex-1\"\n              data-testid=\"button-generate\"\n            >\n              {demandLetterMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n              Generate Demand Letter\n            </Button>\n          </div>\n\n          {result && result.letterContent && (\n            <Card>\n              <CardHeader>\n                <div className=\"flex justify-between items-center\">\n                  <CardTitle data-testid=\"heading-result\">Generated Demand Letter</CardTitle>\n                  <div className=\"flex gap-2\">\n                    <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-pdf\">\n                      <Download className=\"w-4 h-4 mr-2\" />\n                      PDF\n                    </Button>\n                    <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-docx\">\n                      <Download className=\"w-4 h-4 mr-2\" />\n                      Word\n                    </Button>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"bg-white dark:bg-slate-800 p-6 rounded-lg whitespace-pre-wrap font-mono text-sm\" data-testid=\"result-letter\">\n                  {result.letterContent}\n                </div>\n                {result.damagesBreakdown && (\n                  <div className=\"mt-4 grid grid-cols-3 gap-4\">\n                    <div className=\"text-center p-4 bg-slate-100 dark:bg-slate-700 rounded\" data-testid=\"breakdown-medical\">\n                      <div className=\"text-sm text-slate-600 dark:text-slate-400\">Medical Expenses</div>\n                      <div className=\"text-xl font-bold\">${result.damagesBreakdown.medicalExpenses?.toFixed(2)}</div>\n                    </div>\n                    <div className=\"text-center p-4 bg-slate-100 dark:bg-slate-700 rounded\" data-testid=\"breakdown-wages\">\n                      <div className=\"text-sm text-slate-600 dark:text-slate-400\">Lost Wages</div>\n                      <div className=\"text-xl font-bold\">${result.damagesBreakdown.lostWages?.toFixed(2)}</div>\n                    </div>\n                    <div className=\"text-center p-4 bg-blue-100 dark:bg-blue-900 rounded\" data-testid=\"breakdown-total\">\n                      <div className=\"text-sm text-slate-600 dark:text-slate-400\">Total Demand</div>\n                      <div className=\"text-xl font-bold text-blue-600 dark:text-blue-400\">\n                        ${result.damagesBreakdown.total?.toFixed(2)}\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n      </div>\n    </SidebarLayout>\n  );\n}\n","size_bytes":12962},"design_guidelines.md":{"content":"# LawHelper Design Guidelines\n\n## Design Approach\n**System**: Custom professional platform drawing from Material Design's structural clarity + Fluent Design's depth principles, tailored for legal professionals prioritizing efficiency and trust.\n\n**Design Principles**:\n- Professional authority through structured hierarchy\n- Information density without clutter\n- Trustworthy, stable interface patterns\n- Scannable content with clear visual separation\n\n---\n\n## Typography System\n\n**Font Families** (Google Fonts):\n- **Primary**: Inter (body, UI elements) - weights: 400, 500, 600, 700\n- **Display**: Instrument Serif (headings, hero) - weights: 400, 600\n\n**Type Scale**:\n- Hero Display: 4xl-6xl, Instrument Serif 600\n- Page Headings: 3xl-4xl, Instrument Serif 600\n- Section Titles: xl-2xl, Inter 600\n- Body Large: lg, Inter 400\n- Body: base, Inter 400\n- UI Labels: sm, Inter 500\n- Meta/Captions: xs, Inter 400\n\n---\n\n## Layout System\n\n**Spacing Primitives**: Tailwind units of **2, 4, 6, 8, 12, 16, 24**\n- Micro spacing (button padding, card gaps): 2, 4\n- Component spacing (between elements): 6, 8, 12\n- Section spacing (between major areas): 16, 24\n\n**Container Strategy**:\n- Max widths: 7xl for full layouts, 6xl for content-heavy sections, 4xl for forms/documents\n- Consistent section padding: py-16 md:py-24\n\n---\n\n## Component Library\n\n**Navigation**:\n- Horizontal top nav with logo left, primary links center, auth/profile right\n- Secondary nav tabs for feature sections\n- Sidebar navigation for application dashboard (collapsible on mobile)\n\n**Cards**:\n- Elevated cards with subtle borders for data sections\n- Flat cards with dividers for list items\n- Feature cards: Icon top-left, title, description, action link\n\n**Forms**:\n- Full-width labels above inputs\n- Input fields with consistent height (h-12), subtle borders\n- Form sections grouped with clear headings\n- Action buttons aligned right (primary) with secondary left\n\n**Tables/Data Display**:\n- Striped rows for readability\n- Fixed header on scroll for long tables\n- Sortable columns with indicator icons\n- Row actions appear on hover (edit, delete, view)\n\n**Buttons**:\n- Primary: Solid with backdrop blur when over images\n- Secondary: Outlined\n- Text/Link: Underline on hover\n- Sizes: sm (h-9 px-4), md (h-11 px-6), lg (h-13 px-8)\n\n**Status Indicators**:\n- Badges for case status (pills with text)\n- Progress bars for document completion\n- Timeline component for case history\n\n**Icons**: Heroicons (outline for navigation, solid for emphasis)\n\n---\n\n## Page Structures\n\n**Landing Page** (maintaining existing particle/gradient animations):\n- Hero: Full-bleed gradient background with particles, large hero image (right-aligned, 50% width showing professional using platform), headline left, CTA buttons with backdrop blur\n- Trust Bar: Client logos strip\n- Feature Grid: 3-column layout showcasing 5 tools (case management, document gen, medical analysis, demand letters, discovery)\n- How It Works: 3-step process with numbered cards\n- Testimonials: 2-column attorney testimonials with photos, firm names\n- Pricing: 3-tier comparison table\n- CTA Section: Centered with trial offer\n- Footer: 4-column (Product, Company, Resources, Legal) with newsletter\n\n**Dashboard**:\n- Left sidebar: Primary navigation\n- Top bar: Search, notifications, user profile\n- Main area: Metric cards (4 across), recent cases table, quick actions panel\n- Multi-column for cards, single column for tables\n\n**Feature Pages** (Case Management, Document Generation, etc.):\n- Hero: 2-column (60/40) with feature image right showing tool in action\n- Overview: Text content max-w-4xl\n- Capabilities: 2-column grid of detailed features\n- Integration: Visual workflow diagram\n- CTA section\n\n**Document Editor**:\n- Full-screen layout with toolbar top\n- 2-panel: Editor left (65%), reference panel right (35%)\n- Floating action buttons for save/export\n\n---\n\n## Images\n\n**Hero Images Required**:\n1. **Landing Hero**: Professional attorney using laptop in modern office, right-aligned, shows screen with platform interface, natural lighting, confident posture\n2. **Case Management Page**: Dashboard view showing organized case files, clean desk setup, multiple monitors\n3. **Document Generation**: Close-up of document being reviewed with AI highlights visible on screen\n4. **Medical Records Analysis**: Split-screen showing medical records on left, AI analysis highlights on right\n5. **About/Team Page**: Professional team photo in modern office setting\n\n**Supporting Images**:\n- Attorney testimonial headshots (professional, consistent style)\n- Client logo marks for trust bar (grayscale)\n- Feature illustrations showing each tool's interface in context\n\nAll hero images positioned right-aligned (50-60% width), allowing headline/CTA space on left. Images should convey professionalism, modern technology, and legal expertise.\n\n---\n\n## Animations\n**Minimal, Professional**:\n- Subtle fade-in on scroll for cards (150ms delay between items)\n- Smooth transitions on hover states (200ms)\n- Page transitions: Simple fade (300ms)\n- No distracting motion - maintain existing landing page particles only","size_bytes":5122},"server/document-export.ts":{"content":"import PDFDocument from \"pdfkit\";\nimport { Document, Packer, Paragraph, TextRun, HeadingLevel } from \"docx\";\n\nexport interface ExportContent {\n  title: string;\n  sections: Array<{\n    heading?: string;\n    content: string;\n    items?: string[];\n  }>;\n  metadata?: {\n    author?: string;\n    subject?: string;\n    keywords?: string[];\n  };\n}\n\nexport async function generatePDF(content: ExportContent): Promise<Buffer> {\n  return new Promise((resolve, reject) => {\n    const doc = new PDFDocument({\n      margin: 50,\n      size: \"LETTER\",\n    });\n\n    const chunks: Buffer[] = [];\n    doc.on(\"data\", (chunk) => chunks.push(chunk));\n    doc.on(\"end\", () => resolve(Buffer.concat(chunks)));\n    doc.on(\"error\", reject);\n\n    // Add title\n    doc.fontSize(20).font(\"Helvetica-Bold\").text(content.title, { align: \"center\" });\n    doc.moveDown();\n\n    // Add metadata if available\n    if (content.metadata) {\n      doc.fontSize(10).font(\"Helvetica\");\n      if (content.metadata.author) {\n        doc.text(`Author: ${content.metadata.author}`);\n      }\n      if (content.metadata.subject) {\n        doc.text(`Subject: ${content.metadata.subject}`);\n      }\n      doc.moveDown();\n    }\n\n    // Add sections\n    content.sections.forEach((section, index) => {\n      if (section.heading) {\n        doc.fontSize(14).font(\"Helvetica-Bold\").text(section.heading);\n        doc.moveDown(0.5);\n      }\n\n      if (section.content) {\n        doc.fontSize(11).font(\"Helvetica\").text(section.content, {\n          align: \"justify\",\n        });\n        doc.moveDown();\n      }\n\n      if (section.items && section.items.length > 0) {\n        section.items.forEach((item) => {\n          doc.fontSize(11).font(\"Helvetica\").text(`â€¢ ${item}`, {\n            indent: 20,\n          });\n        });\n        doc.moveDown();\n      }\n\n      if (index < content.sections.length - 1) {\n        doc.moveDown();\n      }\n    });\n\n    doc.end();\n  });\n}\n\nexport async function generateDOCX(content: ExportContent): Promise<Buffer> {\n  const children: Paragraph[] = [];\n\n  // Add title\n  children.push(\n    new Paragraph({\n      text: content.title,\n      heading: HeadingLevel.TITLE,\n      spacing: { after: 200 },\n    })\n  );\n\n  // Add metadata\n  if (content.metadata) {\n    if (content.metadata.author) {\n      children.push(\n        new Paragraph({\n          children: [new TextRun({ text: `Author: ${content.metadata.author}`, size: 20 })],\n        })\n      );\n    }\n    if (content.metadata.subject) {\n      children.push(\n        new Paragraph({\n          children: [new TextRun({ text: `Subject: ${content.metadata.subject}`, size: 20 })],\n        })\n      );\n    }\n    children.push(new Paragraph({ text: \"\" }));\n  }\n\n  // Add sections\n  content.sections.forEach((section) => {\n    if (section.heading) {\n      children.push(\n        new Paragraph({\n          text: section.heading,\n          heading: HeadingLevel.HEADING_1,\n          spacing: { before: 200, after: 100 },\n        })\n      );\n    }\n\n    if (section.content) {\n      children.push(\n        new Paragraph({\n          children: [new TextRun({ text: section.content, size: 22 })],\n          spacing: { after: 100 },\n        })\n      );\n    }\n\n    if (section.items && section.items.length > 0) {\n      section.items.forEach((item) => {\n        children.push(\n          new Paragraph({\n            text: `â€¢ ${item}`,\n            spacing: { after: 50 },\n            indent: { left: 360 },\n          })\n        );\n      });\n      children.push(new Paragraph({ text: \"\" }));\n    }\n  });\n\n  const doc = new Document({\n    sections: [\n      {\n        children,\n      },\n    ],\n  });\n\n  return await Packer.toBuffer(doc);\n}\n\nexport function generateTXT(content: ExportContent): string {\n  let text = \"\";\n\n  // Add title\n  text += content.title.toUpperCase() + \"\\n\";\n  text += \"=\".repeat(content.title.length) + \"\\n\\n\";\n\n  // Add metadata\n  if (content.metadata) {\n    if (content.metadata.author) {\n      text += `Author: ${content.metadata.author}\\n`;\n    }\n    if (content.metadata.subject) {\n      text += `Subject: ${content.metadata.subject}\\n`;\n    }\n    text += \"\\n\";\n  }\n\n  // Add sections\n  content.sections.forEach((section, index) => {\n    if (section.heading) {\n      text += section.heading + \"\\n\";\n      text += \"-\".repeat(section.heading.length) + \"\\n\\n\";\n    }\n\n    if (section.content) {\n      text += section.content + \"\\n\\n\";\n    }\n\n    if (section.items && section.items.length > 0) {\n      section.items.forEach((item) => {\n        text += `  â€¢ ${item}\\n`;\n      });\n      text += \"\\n\";\n    }\n\n    if (index < content.sections.length - 1) {\n      text += \"\\n\";\n    }\n  });\n\n  return text;\n}\n","size_bytes":4641},"client/src/pages/discovery-tools.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { FileQuestion, FileText, CheckSquare, Download, Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\n\ntype DiscoveryType = \"interrogatories\" | \"requests\" | \"admissions\";\ntype DiscoveryResults = {\n  interrogatories: any | null;\n  requests: any | null;\n  admissions: any | null;\n};\n\nexport default function DiscoveryTools() {\n  const [activeTab, setActiveTab] = useState<DiscoveryType>(\"interrogatories\");\n  const [formData, setFormData] = useState<Record<string, any>>({\n    interrogatories: { questions: \"\", caseFacts: \"\", jurisdiction: \"Federal\", caseType: \"General\" },\n    requests: { requests: \"\", documents: \"\", jurisdiction: \"Federal\", caseType: \"General\" },\n    admissions: { admissions: \"\", casePosition: \"\", jurisdiction: \"Federal\", caseType: \"General\" },\n  });\n  const [results, setResults] = useState<DiscoveryResults>({\n    interrogatories: null,\n    requests: null,\n    admissions: null,\n  });\n  const { toast } = useToast();\n\n  const discoveryMutation = useMutation({\n    mutationFn: async (data: { type: string; payload: any }) =>\n      apiRequest(\"/api/discovery-tools\", \"POST\", data),\n    onSuccess: (data, variables) => {\n      const type = variables.type as DiscoveryType;\n      setResults((prev) => ({ ...prev, [type]: data }));\n      toast({\n        title: \"Response Generated\",\n        description: \"Discovery responses have been generated successfully.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Generation Failed\",\n        description: \"Failed to generate discovery responses. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleGenerate = () => {\n    const data = formData[activeTab];\n    const requiredField = activeTab === \"interrogatories\" ? \"questions\" : \n                         activeTab === \"requests\" ? \"requests\" : \"admissions\";\n    \n    if (!data[requiredField]?.trim()) {\n      toast({\n        title: \"Input Required\",\n        description: `Please enter ${activeTab} to generate responses.`,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    discoveryMutation.mutate({\n      type: activeTab,\n      payload: data,\n    });\n  };\n\n  const handleExport = (format: string) => {\n    const result = results[activeTab];\n    if (!result) return;\n    \n    const content = {\n      title: `Discovery Responses - ${activeTab.charAt(0).toUpperCase() + activeTab.slice(1)}`,\n      sections: [{ heading: \"Discovery Responses\", content: JSON.stringify(result, null, 2) }],\n      subject: `Discovery - ${activeTab}`,\n      keywords: [\"discovery\", activeTab, \"responses\"],\n    };\n\n    fetch(\"/api/export-document\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ format, content }),\n    })\n      .then((res) => res.blob())\n      .then((blob) => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `discovery_${activeTab}_${Date.now()}.${format}`;\n        a.click();\n      });\n  };\n\n  const updateFormData = (field: string, value: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      [activeTab]: { ...prev[activeTab], [field]: value },\n    }));\n  };\n\n  return (\n    <SidebarLayout>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900\">\n        <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold text-slate-900 dark:text-white mb-2\" data-testid=\"heading-discovery-tools\">\n              Discovery Response Tools\n            </h1>\n            <p className=\"text-slate-600 dark:text-slate-300\" data-testid=\"text-description\">\n              Generate professional discovery responses with AI assistance\n            </p>\n          </div>\n\n          <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as DiscoveryType)} className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-3\" data-testid=\"tabs-type\">\n              <TabsTrigger value=\"interrogatories\" data-testid=\"tab-interrogatories\">\n                <FileQuestion className=\"w-4 h-4 mr-2\" />\n                Interrogatories\n              </TabsTrigger>\n              <TabsTrigger value=\"requests\" data-testid=\"tab-requests\">\n                <FileText className=\"w-4 h-4 mr-2\" />\n                Requests for Production\n              </TabsTrigger>\n              <TabsTrigger value=\"admissions\" data-testid=\"tab-admissions\">\n                <CheckSquare className=\"w-4 h-4 mr-2\" />\n                Requests for Admission\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"interrogatories\">\n              <Card>\n                <CardHeader>\n                  <CardTitle data-testid=\"heading-interrogatories\">Interrogatory Responses</CardTitle>\n                  <CardDescription>\n                    Generate responses to written interrogatories with objections and substantive answers\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"jurisdiction\">Jurisdiction</Label>\n                      <Input\n                        id=\"jurisdiction\"\n                        value={formData.interrogatories.jurisdiction}\n                        onChange={(e) => updateFormData(\"jurisdiction\", e.target.value)}\n                        data-testid=\"input-jurisdiction\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"caseType\">Case Type</Label>\n                      <Input\n                        id=\"caseType\"\n                        value={formData.interrogatories.caseType}\n                        onChange={(e) => updateFormData(\"caseType\", e.target.value)}\n                        data-testid=\"input-case-type\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"questions\">Interrogatories</Label>\n                    <Textarea\n                      id=\"questions\"\n                      placeholder=\"Paste interrogatories here (one per line or numbered)...\"\n                      value={formData.interrogatories.questions}\n                      onChange={(e) => updateFormData(\"questions\", e.target.value)}\n                      className=\"min-h-[150px]\"\n                      data-testid=\"input-questions\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"caseFacts\">Case Facts & Information</Label>\n                    <Textarea\n                      id=\"caseFacts\"\n                      placeholder=\"Provide case facts to generate substantive responses...\"\n                      value={formData.interrogatories.caseFacts}\n                      onChange={(e) => updateFormData(\"caseFacts\", e.target.value)}\n                      className=\"min-h-[100px]\"\n                      data-testid=\"input-case-facts\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleGenerate}\n                    disabled={discoveryMutation.isPending}\n                    data-testid=\"button-generate-interrogatories\"\n                  >\n                    {discoveryMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Generate Responses\n                  </Button>\n\n                  {results.interrogatories && results.interrogatories.responses && (\n                    <div className=\"mt-6 space-y-4\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-pdf\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export PDF\n                        </Button>\n                        <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-docx\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export Word\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg space-y-4\" data-testid=\"result-interrogatories\">\n                        {results.interrogatories.responses.slice(0, 3).map((resp: any, idx: number) => (\n                          <div key={idx} className=\"border-b pb-3\" data-testid={`response-${idx}`}>\n                            <div className=\"font-semibold mb-1\">Interrogatory #{resp.number}</div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">{resp.question}</div>\n                            {resp.objections && resp.objections.length > 0 && (\n                              <div className=\"text-sm mb-1\">\n                                <span className=\"font-medium\">Objections:</span> {resp.objections.join(\", \")}\n                              </div>\n                            )}\n                            <div className=\"text-sm\">{resp.response}</div>\n                          </div>\n                        ))}\n                        {results.interrogatories.responses.length > 3 && (\n                          <p className=\"text-sm text-slate-500\">\n                            ...and {results.interrogatories.responses.length - 3} more responses\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"requests\">\n              <Card>\n                <CardHeader>\n                  <CardTitle data-testid=\"heading-requests\">Requests for Production Responses</CardTitle>\n                  <CardDescription>\n                    Generate responses to document production requests with privilege log\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"jurisdiction-req\">Jurisdiction</Label>\n                      <Input\n                        id=\"jurisdiction-req\"\n                        value={formData.requests.jurisdiction}\n                        onChange={(e) => updateFormData(\"jurisdiction\", e.target.value)}\n                        data-testid=\"input-jurisdiction-req\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"caseType-req\">Case Type</Label>\n                      <Input\n                        id=\"caseType-req\"\n                        value={formData.requests.caseType}\n                        onChange={(e) => updateFormData(\"caseType\", e.target.value)}\n                        data-testid=\"input-case-type-req\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"requests\">Requests for Production</Label>\n                    <Textarea\n                      id=\"requests\"\n                      placeholder=\"Paste document requests here...\"\n                      value={formData.requests.requests}\n                      onChange={(e) => updateFormData(\"requests\", e.target.value)}\n                      className=\"min-h-[150px]\"\n                      data-testid=\"input-requests\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"documents\">Available Documents</Label>\n                    <Textarea\n                      id=\"documents\"\n                      placeholder=\"List available documents...\"\n                      value={formData.requests.documents}\n                      onChange={(e) => updateFormData(\"documents\", e.target.value)}\n                      className=\"min-h-[100px]\"\n                      data-testid=\"input-documents\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleGenerate}\n                    disabled={discoveryMutation.isPending}\n                    data-testid=\"button-generate-requests\"\n                  >\n                    {discoveryMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Generate Responses\n                  </Button>\n\n                  {results.requests && results.requests.responses && (\n                    <div className=\"mt-6 space-y-4\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-requests-pdf\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export PDF\n                        </Button>\n                        <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-requests-docx\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export Word\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg space-y-4\" data-testid=\"result-requests\">\n                        {results.requests.responses.slice(0, 3).map((resp: any, idx: number) => (\n                          <div key={idx} className=\"border-b pb-3\" data-testid={`request-response-${idx}`}>\n                            <div className=\"font-semibold mb-1\">Request #{resp.number}</div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">{resp.request}</div>\n                            <div className=\"text-sm\">{resp.response}</div>\n                          </div>\n                        ))}\n                        {results.requests.responses.length > 3 && (\n                          <p className=\"text-sm text-slate-500\">\n                            ...and {results.requests.responses.length - 3} more responses\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"admissions\">\n              <Card>\n                <CardHeader>\n                  <CardTitle data-testid=\"heading-admissions\">Requests for Admission Responses</CardTitle>\n                  <CardDescription>\n                    Generate responses to requests for admission (Admit/Deny/Qualified)\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <Label htmlFor=\"jurisdiction-adm\">Jurisdiction</Label>\n                      <Input\n                        id=\"jurisdiction-adm\"\n                        value={formData.admissions.jurisdiction}\n                        onChange={(e) => updateFormData(\"jurisdiction\", e.target.value)}\n                        data-testid=\"input-jurisdiction-adm\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"caseType-adm\">Case Type</Label>\n                      <Input\n                        id=\"caseType-adm\"\n                        value={formData.admissions.caseType}\n                        onChange={(e) => updateFormData(\"caseType\", e.target.value)}\n                        data-testid=\"input-case-type-adm\"\n                      />\n                    </div>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"admissions\">Requests for Admission</Label>\n                    <Textarea\n                      id=\"admissions\"\n                      placeholder=\"Paste requests for admission here...\"\n                      value={formData.admissions.admissions}\n                      onChange={(e) => updateFormData(\"admissions\", e.target.value)}\n                      className=\"min-h-[150px]\"\n                      data-testid=\"input-admissions\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"casePosition\">Case Position</Label>\n                    <Textarea\n                      id=\"casePosition\"\n                      placeholder=\"Describe your case position to guide responses...\"\n                      value={formData.admissions.casePosition}\n                      onChange={(e) => updateFormData(\"casePosition\", e.target.value)}\n                      className=\"min-h-[100px]\"\n                      data-testid=\"input-case-position\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleGenerate}\n                    disabled={discoveryMutation.isPending}\n                    data-testid=\"button-generate-admissions\"\n                  >\n                    {discoveryMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Generate Responses\n                  </Button>\n\n                  {results.admissions && results.admissions.responses && (\n                    <div className=\"mt-6 space-y-4\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-admissions-pdf\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export PDF\n                        </Button>\n                        <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-admissions-docx\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export Word\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg space-y-4\" data-testid=\"result-admissions\">\n                        {results.admissions.responses.slice(0, 3).map((resp: any, idx: number) => (\n                          <div key={idx} className=\"border-b pb-3\" data-testid={`admission-response-${idx}`}>\n                            <div className=\"font-semibold mb-1\">Request #{resp.number}</div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">{resp.request}</div>\n                            <div className=\"text-sm font-medium text-blue-600 dark:text-blue-400\">{resp.response}</div>\n                            {resp.explanation && (\n                              <div className=\"text-sm mt-1\">{resp.explanation}</div>\n                            )}\n                          </div>\n                        ))}\n                        {results.admissions.responses.length > 3 && (\n                          <p className=\"text-sm text-slate-500\">\n                            ...and {results.admissions.responses.length - 3} more responses\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n      </div>\n    </SidebarLayout>\n  );\n}\n","size_bytes":20190},"client/src/pages/medical-intelligence.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { FileText, DollarSign, FileCheck, Download, Save, Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\n\ntype MedicalResults = {\n  chronology: any | null;\n  bills: any | null;\n  summary: any | null;\n};\n\nexport default function MedicalIntelligence() {\n  const [activeTab, setActiveTab] = useState<keyof MedicalResults>(\"chronology\");\n  const [documentText, setDocumentText] = useState<Record<string, string>>({\n    chronology: \"\",\n    bills: \"\",\n    summary: \"\",\n  });\n  const [results, setResults] = useState<MedicalResults>({\n    chronology: null,\n    bills: null,\n    summary: null,\n  });\n  const { toast } = useToast();\n\n  const medicalIntelligenceMutation = useMutation({\n    mutationFn: async (data: { mode: string; payload: any }) =>\n      apiRequest(\"/api/medical-intelligence\", \"POST\", data),\n    onSuccess: (data, variables) => {\n      const mode = variables.mode as keyof MedicalResults;\n      setResults((prev) => ({ ...prev, [mode]: data }));\n      toast({\n        title: \"Analysis Complete\",\n        description: \"Medical intelligence analysis has been generated successfully.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Analysis Failed\",\n        description: \"Failed to generate medical intelligence analysis. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAnalyze = () => {\n    const currentText = documentText[activeTab];\n    if (!currentText.trim()) {\n      toast({\n        title: \"Input Required\",\n        description: \"Please enter medical record text to analyze.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    medicalIntelligenceMutation.mutate({\n      mode: activeTab,\n      payload: { documentText: currentText },\n    });\n  };\n\n  const handleExport = (format: string) => {\n    const result = results[activeTab];\n    if (!result) return;\n    \n    const content = {\n      title: `Medical ${activeTab.charAt(0).toUpperCase() + activeTab.slice(1)} Report`,\n      sections: [{ heading: \"Analysis Results\", content: JSON.stringify(result, null, 2) }],\n      subject: `Medical Intelligence - ${activeTab}`,\n      keywords: [\"medical\", activeTab, \"analysis\"],\n    };\n\n    fetch(\"/api/export-document\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ format, content }),\n    })\n      .then((res) => res.blob())\n      .then((blob) => {\n        const url = window.URL.createObjectURL(blob);\n        const a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `medical_${activeTab}_${Date.now()}.${format}`;\n        a.click();\n      });\n  };\n\n  return (\n    <SidebarLayout>\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900\">\n        <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold text-slate-900 dark:text-white mb-2\" data-testid=\"heading-medical-intelligence\">\n              Medical Intelligence Suite\n            </h1>\n            <p className=\"text-slate-600 dark:text-slate-300\" data-testid=\"text-description\">\n              AI-powered medical record analysis for personal injury cases\n            </p>\n          </div>\n\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n            <TabsList className=\"grid w-full grid-cols-3\" data-testid=\"tabs-mode\">\n              <TabsTrigger value=\"chronology\" data-testid=\"tab-chronology\">\n                <FileText className=\"w-4 h-4 mr-2\" />\n                Medical Chronology\n              </TabsTrigger>\n              <TabsTrigger value=\"bills\" data-testid=\"tab-bills\">\n                <DollarSign className=\"w-4 h-4 mr-2\" />\n                Bill Analyzer\n              </TabsTrigger>\n              <TabsTrigger value=\"summary\" data-testid=\"tab-summary\">\n                <FileCheck className=\"w-4 h-4 mr-2\" />\n                Medical Summary\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"chronology\">\n              <Card>\n                <CardHeader>\n                  <CardTitle data-testid=\"heading-chronology\">Medical Chronology Generator</CardTitle>\n                  <CardDescription>\n                    Create detailed timeline of medical treatments with ICD and CPT codes\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <Textarea\n                    placeholder=\"Paste medical records text here...\"\n                    value={documentText.chronology}\n                    onChange={(e) => setDocumentText((prev) => ({ ...prev, chronology: e.target.value }))}\n                    className=\"min-h-[200px]\"\n                    data-testid=\"input-medical-text\"\n                  />\n                  <Button\n                    onClick={handleAnalyze}\n                    disabled={medicalIntelligenceMutation.isPending}\n                    data-testid=\"button-analyze\"\n                  >\n                    {medicalIntelligenceMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Generate Chronology\n                  </Button>\n\n                  {results.chronology && results.chronology.timeline && (\n                    <div className=\"mt-6 space-y-4\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-pdf\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export PDF\n                        </Button>\n                        <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-docx\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export Word\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg\" data-testid=\"result-chronology\">\n                        <h3 className=\"font-semibold mb-2\">Timeline ({results.chronology.totalVisits} visits)</h3>\n                        {results.chronology.timeline.slice(0, 5).map((item: any, idx: number) => (\n                          <div key={idx} className=\"border-b py-2\" data-testid={`timeline-item-${idx}`}>\n                            <div className=\"font-medium\">{item.date} - {item.provider}</div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400\">\n                              {item.diagnosis} | {item.treatment}\n                            </div>\n                          </div>\n                        ))}\n                        {results.chronology.timeline.length > 5 && (\n                          <p className=\"text-sm text-slate-500 mt-2\">\n                            ...and {results.chronology.timeline.length - 5} more entries\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"bills\">\n              <Card>\n                <CardHeader>\n                  <CardTitle data-testid=\"heading-bills\">Medical Bill Analyzer</CardTitle>\n                  <CardDescription>\n                    Analyze medical bills and identify charges, payments, and discrepancies\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <Textarea\n                    placeholder=\"Paste medical bills text here...\"\n                    value={documentText.bills}\n                    onChange={(e) => setDocumentText((prev) => ({ ...prev, bills: e.target.value }))}\n                    className=\"min-h-[200px]\"\n                    data-testid=\"input-bills-text\"\n                  />\n                  <Button\n                    onClick={handleAnalyze}\n                    disabled={medicalIntelligenceMutation.isPending}\n                    data-testid=\"button-analyze-bills\"\n                  >\n                    {medicalIntelligenceMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Analyze Bills\n                  </Button>\n\n                  {results.bills && results.bills.summary && (\n                    <div className=\"mt-6 space-y-4\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-bills-pdf\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export PDF\n                        </Button>\n                        <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-bills-docx\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export Word\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg\" data-testid=\"result-bills\">\n                        <h3 className=\"font-semibold mb-4\">Billing Summary</h3>\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Total Charges</div>\n                            <div className=\"text-2xl font-bold\" data-testid=\"text-total-charges\">\n                              ${results.bills.summary.totalCharges?.toFixed(2) || \"0.00\"}\n                            </div>\n                          </div>\n                          <div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Total Paid</div>\n                            <div className=\"text-2xl font-bold text-green-600\" data-testid=\"text-total-paid\">\n                              ${results.bills.summary.totalPaid?.toFixed(2) || \"0.00\"}\n                            </div>\n                          </div>\n                          <div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Outstanding</div>\n                            <div className=\"text-2xl font-bold text-red-600\" data-testid=\"text-total-outstanding\">\n                              ${results.bills.summary.totalOutstanding?.toFixed(2) || \"0.00\"}\n                            </div>\n                          </div>\n                          <div>\n                            <div className=\"text-sm text-slate-600 dark:text-slate-400\">Patient Responsibility</div>\n                            <div className=\"text-2xl font-bold\" data-testid=\"text-patient-responsibility\">\n                              ${results.bills.summary.patientResponsibility?.toFixed(2) || \"0.00\"}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"summary\">\n              <Card>\n                <CardHeader>\n                  <CardTitle data-testid=\"heading-summary\">Medical Summary Generator</CardTitle>\n                  <CardDescription>\n                    Create comprehensive medical summary for legal proceedings\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <Textarea\n                    placeholder=\"Paste medical information here...\"\n                    value={documentText.summary}\n                    onChange={(e) => setDocumentText((prev) => ({ ...prev, summary: e.target.value }))}\n                    className=\"min-h-[200px]\"\n                    data-testid=\"input-summary-text\"\n                  />\n                  <Button\n                    onClick={handleAnalyze}\n                    disabled={medicalIntelligenceMutation.isPending}\n                    data-testid=\"button-generate-summary\"\n                  >\n                    {medicalIntelligenceMutation.isPending && <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />}\n                    Generate Summary\n                  </Button>\n\n                  {results.summary && results.summary.chiefComplaint && (\n                    <div className=\"mt-6 space-y-4\">\n                      <div className=\"flex gap-2\">\n                        <Button onClick={() => handleExport(\"pdf\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-summary-pdf\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export PDF\n                        </Button>\n                        <Button onClick={() => handleExport(\"docx\")} variant=\"outline\" size=\"sm\" data-testid=\"button-export-summary-docx\">\n                          <Download className=\"w-4 h-4 mr-2\" />\n                          Export Word\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg space-y-4\" data-testid=\"result-summary\">\n                        <div>\n                          <h3 className=\"font-semibold mb-2\">Chief Complaint</h3>\n                          <p className=\"text-slate-700 dark:text-slate-300\" data-testid=\"text-chief-complaint\">\n                            {results.summary.chiefComplaint}\n                          </p>\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold mb-2\">Current Status</h3>\n                          <p className=\"text-slate-700 dark:text-slate-300\" data-testid=\"text-current-status\">\n                            {results.summary.currentStatus}\n                          </p>\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold mb-2\">Total Medical Expenses</h3>\n                          <p className=\"text-2xl font-bold text-blue-600\" data-testid=\"text-medical-expenses\">\n                            ${results.summary.totalMedicalExpenses?.toFixed(2) || \"0.00\"}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n      </div>\n    </SidebarLayout>\n  );\n}\n","size_bytes":15158},"client/src/pages/my-cases.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogDescription } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Briefcase, Plus, FileText, Calendar, DollarSign, User, MapPin, Trash2, Edit, Eye } from \"lucide-react\";\nimport { useLocation } from \"wouter\";\nimport { type Case, insertCaseSchema } from \"@shared/schema\";\n\n// Extend the shared schema for form-specific validation\nconst caseFormSchema = insertCaseSchema.omit({ userId: true, dateOpened: true }).extend({\n  valueLow: z.string().optional().transform(val => val ? val : undefined),\n  valueHigh: z.string().optional().transform(val => val ? val : undefined),\n});\n\ntype CaseFormData = z.infer<typeof caseFormSchema>;\n\nexport default function MyCases() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [, setLocation] = useLocation();\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [selectedCase, setSelectedCase] = useState<Case | null>(null);\n\n  const form = useForm<CaseFormData>({\n    resolver: zodResolver(caseFormSchema),\n    defaultValues: {\n      caseName: \"\",\n      caseNumber: \"\",\n      clientName: \"\",\n      caseType: \"\",\n      status: \"active\",\n      description: \"\",\n      jurisdiction: \"\",\n      practiceArea: \"\",\n      leadAttorney: \"\",\n      opposingParty: \"\",\n      opposingCounsel: \"\",\n      valueLow: \"\",\n      valueHigh: \"\",\n    },\n  });\n\n  const { data: cases = [], isLoading } = useQuery<Case[]>({\n    queryKey: [\"/api/cases\"],\n    enabled: !!user,\n  });\n\n  const createCaseMutation = useMutation({\n    mutationFn: async (data: CaseFormData) => {\n      const res = await apiRequest(\"POST\", \"/api/cases\", data);\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      setIsCreateDialogOpen(false);\n      form.reset();\n      toast({\n        title: \"Case created\",\n        description: \"Your case has been created successfully.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Failed to create case\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteCaseMutation = useMutation({\n    mutationFn: async (caseId: string) => {\n      await apiRequest(\"DELETE\", `/api/cases/${caseId}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/cases\"] });\n      toast({\n        title: \"Case deleted\",\n        description: \"The case has been deleted successfully.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Failed to delete case\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (data: CaseFormData) => {\n    createCaseMutation.mutate(data);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200\";\n      case \"pending\":\n        return \"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200\";\n      case \"closed\":\n        return \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  const getCaseTypeLabel = (type: string) => {\n    return type.split(\"-\").map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n  };\n\n  if (!user) {\n    return null;\n  }\n\n  return (\n    <SidebarLayout>\n      <div className=\"min-h-screen bg-background p-4 md:p-6 lg:p-8\">\n        <div className=\"max-w-7xl mx-auto space-y-6\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl md:text-4xl font-bold text-foreground font-serif\">My Cases</h1>\n              <p className=\"text-muted-foreground mt-2\">Manage and organize all your legal cases</p>\n            </div>\n            <Dialog open={isCreateDialogOpen} onOpenChange={setIsCreateDialogOpen}>\n              <DialogTrigger asChild>\n                <Button className=\"gap-2\" data-testid=\"button-create-case\">\n                  <Plus className=\"h-4 w-4\" />\n                  New Case\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n                <DialogHeader>\n                  <DialogTitle>Create New Case</DialogTitle>\n                  <DialogDescription>\n                    Enter the details for your new legal case\n                  </DialogDescription>\n                </DialogHeader>\n                <Form {...form}>\n                  <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"caseName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Case Name *</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"e.g., Smith v. Johnson\" {...field} data-testid=\"input-case-name\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"caseNumber\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Case Number</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"e.g., CV-2024-001\" {...field} data-testid=\"input-case-number\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"clientName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Client Name *</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"e.g., John Smith\" {...field} data-testid=\"input-client-name\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"caseType\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Case Type *</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger data-testid=\"select-case-type\">\n                                  <SelectValue placeholder=\"Select case type\" />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"personal-injury\">Personal Injury</SelectItem>\n                                <SelectItem value=\"contract-dispute\">Contract Dispute</SelectItem>\n                                <SelectItem value=\"employment\">Employment Law</SelectItem>\n                                <SelectItem value=\"intellectual-property\">Intellectual Property</SelectItem>\n                                <SelectItem value=\"real-estate\">Real Estate</SelectItem>\n                                <SelectItem value=\"family\">Family Law</SelectItem>\n                                <SelectItem value=\"criminal\">Criminal Defense</SelectItem>\n                                <SelectItem value=\"medical-malpractice\">Medical Malpractice</SelectItem>\n                                <SelectItem value=\"product-liability\">Product Liability</SelectItem>\n                                <SelectItem value=\"other\">Other</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"status\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Status</FormLabel>\n                            <Select onValueChange={field.onChange} value={field.value}>\n                              <FormControl>\n                                <SelectTrigger data-testid=\"select-status\">\n                                  <SelectValue />\n                                </SelectTrigger>\n                              </FormControl>\n                              <SelectContent>\n                                <SelectItem value=\"active\">Active</SelectItem>\n                                <SelectItem value=\"pending\">Pending</SelectItem>\n                                <SelectItem value=\"closed\">Closed</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"jurisdiction\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Jurisdiction</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"e.g., California, Federal\" {...field} data-testid=\"input-jurisdiction\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={form.control}\n                      name=\"description\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Case Description</FormLabel>\n                          <FormControl>\n                            <Textarea \n                              placeholder=\"Brief description of the case...\"\n                              className=\"min-h-[100px]\"\n                              {...field}\n                              data-testid=\"input-description\"\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"leadAttorney\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Lead Attorney</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Attorney name\" {...field} data-testid=\"input-lead-attorney\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"opposingParty\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Opposing Party</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"Opposing party name\" {...field} data-testid=\"input-opposing-party\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <FormField\n                        control={form.control}\n                        name=\"valueLow\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Estimated Value (Low)</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"e.g., 50000\" {...field} data-testid=\"input-value-low\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={form.control}\n                        name=\"valueHigh\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Estimated Value (High)</FormLabel>\n                            <FormControl>\n                              <Input placeholder=\"e.g., 150000\" {...field} data-testid=\"input-value-high\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <div className=\"flex justify-end gap-3 pt-4\">\n                      <Button\n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={() => {\n                          setIsCreateDialogOpen(false);\n                          form.reset();\n                        }}\n                        data-testid=\"button-cancel\"\n                      >\n                        Cancel\n                      </Button>\n                      <Button type=\"submit\" disabled={createCaseMutation.isPending} data-testid=\"button-submit-case\">\n                        {createCaseMutation.isPending ? \"Creating...\" : \"Create Case\"}\n                      </Button>\n                    </div>\n                  </form>\n                </Form>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          {/* Statistics */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Active Cases</p>\n                    <p className=\"text-3xl font-bold mt-1\" data-testid=\"stat-active-cases\">\n                      {cases.filter(c => c.status === \"active\").length}\n                    </p>\n                  </div>\n                  <Briefcase className=\"h-10 w-10 text-green-500\" />\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Pending Cases</p>\n                    <p className=\"text-3xl font-bold mt-1\" data-testid=\"stat-pending-cases\">\n                      {cases.filter(c => c.status === \"pending\").length}\n                    </p>\n                  </div>\n                  <Calendar className=\"h-10 w-10 text-yellow-500\" />\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"pt-6\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Total Cases</p>\n                    <p className=\"text-3xl font-bold mt-1\" data-testid=\"stat-total-cases\">{cases.length}</p>\n                  </div>\n                  <FileText className=\"h-10 w-10 text-blue-500\" />\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Cases List */}\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary\"></div>\n            </div>\n          ) : cases.length === 0 ? (\n            <Card>\n              <CardContent className=\"py-12 text-center\">\n                <Briefcase className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n                <h3 className=\"text-lg font-semibold mb-2\">No cases yet</h3>\n                <p className=\"text-muted-foreground mb-4\">Create your first case to get started</p>\n                <Button onClick={() => setIsCreateDialogOpen(true)} data-testid=\"button-create-first-case\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Case\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              {cases.map((caseItem) => (\n                <Card key={caseItem.id} className=\"hover:shadow-lg transition-shadow\" data-testid={`case-card-${caseItem.id}`}>\n                  <CardHeader className=\"pb-3\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <CardTitle className=\"text-xl mb-2\">{caseItem.caseName}</CardTitle>\n                        <CardDescription className=\"flex items-center gap-2 flex-wrap\">\n                          <Badge className={getStatusColor(caseItem.status)}>\n                            {caseItem.status.charAt(0).toUpperCase() + caseItem.status.slice(1)}\n                          </Badge>\n                          <span className=\"text-sm\">{getCaseTypeLabel(caseItem.caseType)}</span>\n                          {caseItem.caseNumber && (\n                            <span className=\"text-sm\">â€¢ {caseItem.caseNumber}</span>\n                          )}\n                        </CardDescription>\n                      </div>\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\n                      <div className=\"flex items-center gap-2\">\n                        <User className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"text-muted-foreground\">Client:</span>\n                        <span className=\"font-medium\">{caseItem.clientName}</span>\n                      </div>\n                      {caseItem.jurisdiction && (\n                        <div className=\"flex items-center gap-2\">\n                          <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"text-muted-foreground\">Jurisdiction:</span>\n                          <span className=\"font-medium\">{caseItem.jurisdiction}</span>\n                        </div>\n                      )}\n                      {(caseItem.valueLow || caseItem.valueHigh) && (\n                        <div className=\"flex items-center gap-2\">\n                          <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"text-muted-foreground\">Value:</span>\n                          <span className=\"font-medium\">\n                            {caseItem.valueLow && caseItem.valueHigh\n                              ? `$${Number(caseItem.valueLow).toLocaleString()} - $${Number(caseItem.valueHigh).toLocaleString()}`\n                              : caseItem.valueLow\n                              ? `$${Number(caseItem.valueLow).toLocaleString()}+`\n                              : `Up to $${Number(caseItem.valueHigh).toLocaleString()}`}\n                          </span>\n                        </div>\n                      )}\n                      {caseItem.leadAttorney && (\n                        <div className=\"flex items-center gap-2\">\n                          <User className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"text-muted-foreground\">Attorney:</span>\n                          <span className=\"font-medium\">{caseItem.leadAttorney}</span>\n                        </div>\n                      )}\n                    </div>\n                    {caseItem.description && (\n                      <p className=\"text-sm text-muted-foreground line-clamp-2 pt-2\">\n                        {caseItem.description}\n                      </p>\n                    )}\n                    <div className=\"flex justify-end gap-2 pt-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setLocation(`/cases/${caseItem.id}`)}\n                        data-testid={`button-view-case-${caseItem.id}`}\n                      >\n                        <Eye className=\"h-4 w-4 mr-1\" />\n                        View Details\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => deleteCaseMutation.mutate(caseItem.id)}\n                        disabled={deleteCaseMutation.isPending}\n                        data-testid={`button-delete-case-${caseItem.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4 mr-1\" />\n                        Delete\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </SidebarLayout>\n  );\n}\n","size_bytes":23182},"client/src/pages/case-details.tsx":{"content":"import { useParams, useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { SidebarLayout } from \"@/components/layout/sidebar-layout\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport {\n  ArrowLeft,\n  Calendar,\n  User,\n  Briefcase,\n  FileText,\n  DollarSign,\n  Clock,\n  MapPin,\n} from \"lucide-react\";\nimport type { Case } from \"@shared/schema\";\n\nexport default function CaseDetails() {\n  const { id } = useParams();\n  const [, setLocation] = useLocation();\n\n  const { data: caseData, isLoading } = useQuery<Case>({\n    queryKey: [\"/api/cases\", id],\n    enabled: !!id,\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case \"active\":\n        return \"bg-green-500/10 text-green-600 border-green-500/20\";\n      case \"closed\":\n        return \"bg-gray-500/10 text-gray-600 border-gray-500/20\";\n      case \"pending\":\n        return \"bg-yellow-500/10 text-yellow-600 border-yellow-500/20\";\n      default:\n        return \"bg-blue-500/10 text-blue-600 border-blue-500/20\";\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <SidebarLayout>\n        <div className=\"flex flex-col h-full\">\n          <div className=\"bg-card border-b border-border p-4 md:p-6\">\n            <Skeleton className=\"h-8 w-64 mb-2\" />\n            <Skeleton className=\"h-4 w-96\" />\n          </div>\n          <div className=\"flex-1 p-4 md:p-6 space-y-6\">\n            <Skeleton className=\"h-40 w-full\" />\n            <Skeleton className=\"h-40 w-full\" />\n            <Skeleton className=\"h-40 w-full\" />\n          </div>\n        </div>\n      </SidebarLayout>\n    );\n  }\n\n  if (!caseData) {\n    return (\n      <SidebarLayout>\n        <div className=\"flex flex-col h-full items-center justify-center p-6\">\n          <FileText className=\"h-16 w-16 text-muted-foreground mb-4\" />\n          <h2 className=\"text-2xl font-bold text-foreground mb-2\">Case Not Found</h2>\n          <p className=\"text-muted-foreground mb-6\">\n            The case you're looking for doesn't exist or has been deleted.\n          </p>\n          <Button onClick={() => setLocation(\"/my-cases\")} data-testid=\"button-back-to-cases\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to My Cases\n          </Button>\n        </div>\n      </SidebarLayout>\n    );\n  }\n\n  return (\n    <SidebarLayout>\n      <div className=\"flex flex-col h-full\">\n        {/* Header */}\n        <div className=\"bg-card border-b border-border p-4 md:p-6\">\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n            <div>\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setLocation(\"/my-cases\")}\n                  data-testid=\"button-back\"\n                >\n                  <ArrowLeft className=\"h-4 w-4 mr-1\" />\n                  Back\n                </Button>\n              </div>\n              <h1 className=\"text-xl md:text-2xl font-bold text-foreground flex items-center gap-3\">\n                {caseData.title}\n                <Badge\n                  variant=\"outline\"\n                  className={getStatusColor(caseData.status)}\n                  data-testid=\"badge-status\"\n                >\n                  {caseData.status}\n                </Badge>\n              </h1>\n              <p className=\"text-sm md:text-base text-muted-foreground\">\n                Case Number: {caseData.caseNumber}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 p-4 md:p-6 overflow-auto space-y-6\">\n          {/* Case Overview */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Briefcase className=\"h-5 w-5 text-primary\" />\n                Case Overview\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"flex items-start gap-3\">\n                  <FileText className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground\">Case Type</p>\n                    <p className=\"text-base font-semibold text-foreground\" data-testid=\"text-case-type\">\n                      {caseData.caseType}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start gap-3\">\n                  <Calendar className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground\">Date Filed</p>\n                    <p className=\"text-base font-semibold text-foreground\" data-testid=\"text-date-filed\">\n                      {caseData.dateFiled\n                        ? new Date(caseData.dateFiled).toLocaleDateString()\n                        : \"Not specified\"}\n                    </p>\n                  </div>\n                </div>\n\n                {caseData.courtName && (\n                  <div className=\"flex items-start gap-3\">\n                    <MapPin className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">Court</p>\n                      <p className=\"text-base font-semibold text-foreground\" data-testid=\"text-court\">\n                        {caseData.courtName}\n                      </p>\n                    </div>\n                  </div>\n                )}\n\n                {caseData.leadAttorney && (\n                  <div className=\"flex items-start gap-3\">\n                    <User className=\"h-5 w-5 text-muted-foreground mt-0.5\" />\n                    <div>\n                      <p className=\"text-sm font-medium text-muted-foreground\">Lead Attorney</p>\n                      <p className=\"text-base font-semibold text-foreground\" data-testid=\"text-attorney\">\n                        {caseData.leadAttorney}\n                      </p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {caseData.description && (\n                <div className=\"pt-4 border-t border-border\">\n                  <p className=\"text-sm font-medium text-muted-foreground mb-2\">Description</p>\n                  <p className=\"text-base text-foreground\" data-testid=\"text-description\">\n                    {caseData.description}\n                  </p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          {/* Financial Information */}\n          {(caseData.valueLow || caseData.valueHigh) && (\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <DollarSign className=\"h-5 w-5 text-primary\" />\n                  Financial Information\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center gap-3\">\n                  <div>\n                    <p className=\"text-sm font-medium text-muted-foreground mb-1\">\n                      Estimated Case Value\n                    </p>\n                    <p className=\"text-2xl font-bold text-foreground\" data-testid=\"text-value\">\n                      {caseData.valueLow && caseData.valueHigh\n                        ? `$${Number(caseData.valueLow).toLocaleString()} - $${Number(caseData.valueHigh).toLocaleString()}`\n                        : caseData.valueLow\n                        ? `$${Number(caseData.valueLow).toLocaleString()}+`\n                        : `Up to $${Number(caseData.valueHigh).toLocaleString()}`}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Case Timeline */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Clock className=\"h-5 w-5 text-primary\" />\n                Case Timeline\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                {caseData.dateFiled && (\n                  <div className=\"flex gap-4\">\n                    <div className=\"flex flex-col items-center\">\n                      <div className=\"h-3 w-3 rounded-full bg-primary\" />\n                      <div className=\"flex-1 w-0.5 bg-border min-h-[40px]\" />\n                    </div>\n                    <div className=\"pb-4\">\n                      <p className=\"font-semibold text-foreground\">Case Filed</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {new Date(caseData.dateFiled).toLocaleDateString(\"en-US\", {\n                          year: \"numeric\",\n                          month: \"long\",\n                          day: \"numeric\",\n                        })}\n                      </p>\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"flex gap-4\">\n                  <div className=\"flex flex-col items-center\">\n                    <div className=\"h-3 w-3 rounded-full bg-primary\" />\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-foreground\">Current Status</p>\n                    <p className=\"text-sm text-muted-foreground capitalize\">{caseData.status}</p>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Quick Actions */}\n          <Card>\n            <CardHeader>\n              <CardTitle>Quick Actions</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex flex-wrap gap-3\">\n                <Button\n                  onClick={() => setLocation(\"/document-generation\")}\n                  data-testid=\"button-generate-document\"\n                >\n                  <FileText className=\"h-4 w-4 mr-2\" />\n                  Generate Document\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setLocation(\"/medical-intelligence\")}\n                  data-testid=\"button-medical-tools\"\n                >\n                  <Briefcase className=\"h-4 w-4 mr-2\" />\n                  Medical Tools\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => setLocation(\"/demand-letter\")}\n                  data-testid=\"button-demand-letter\"\n                >\n                  <FileText className=\"h-4 w-4 mr-2\" />\n                  Create Demand Letter\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </SidebarLayout>\n  );\n}\n","size_bytes":11131}},"version":2}